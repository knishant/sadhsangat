import{$ as Li,$a as ui,A as Wg,Aa as zi,Ab as Ku,B as Hl,Ba as Vt,Bb as Yu,C as zl,Ca as Lt,D as Wu,Da as E,E as Ke,Ea as k,F as ta,Fa as q,Fb as t0,G as Wl,Ga as br,Gb as Ql,H as na,Ha as wr,I as On,Ia as Kg,Ib as n0,J as Ue,Ja as Te,Jb as Zl,K as li,Ka as is,L as qn,La as oa,M as Vi,Ma as z,N as j,Na as R,O as te,Oa as Ul,P as le,Pa as ql,Q as ci,Qa as Yg,R as ke,Ra as Jl,S as Gg,Sa as Kn,T as Gu,Ta as rs,U as jg,Ua as kt,V as In,Va as Et,W as re,Wa as Xt,X as oe,Xa as $,Y as $g,Ya as We,Z as ns,Za as it,_ as Gl,_a as Qg,a as Ae,aa as jl,ab as pi,b as _t,ba as fn,bb as hi,c as iM,ca as be,cb as gn,d as Ag,da as vt,db as ye,e as ea,ea as He,eb as Uu,f as ts,fa as ju,fb as Ot,g as nt,ga as Ug,gb as fi,h as Ng,ha as di,hb as Kl,i as Pg,ia as Qr,ib as we,j as Rg,ja as ia,jb as Ce,k as vr,ka as D,kb as Yn,l as Fg,la as K,lb as Zg,m as Qt,ma as Jn,mb as sa,n as Hu,na as ra,nb as Zr,o as Bg,oa as Hi,ob as qu,p as Vg,pa as qg,pb as ss,q as Lg,qa as $l,qb as as,r as Zt,ra as mn,rb as Ju,s as Hg,sa as Jg,sb as Wi,t as Yr,ta as J,tb as Ht,u as zu,ua as ze,ub as Yl,v as Bl,va as I,vb as Xr,w as Vl,wa as $u,wb as Xg,x as yr,xa as Re,xb as Cr,y as zg,ya as Mt,yb as eo,z as Ll,za as Ee,zb as e0}from"./chunk-IDDLKJ3U.js";var tf=iM((Rs,Ua)=>{"use strict";(function(){var t,e="4.17.21",n=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",p=1,f=2,g=4,y=1,b=2,C=1,M=2,A=4,V=8,se=16,ue=32,Q=64,ae=128,ne=256,Se=512,Ve=30,Y="...",De=800,je=16,Tt=1,mt=2,Ti=3,Pt=1/0,qe=9007199254740991,rn=17976931348623157e292,Si=NaN,at=4294967295,Bo=at-1,Fs=at>>>1,Lr=[["ary",ae],["bind",C],["bindKey",M],["curry",V],["curryRight",se],["flip",Se],["partial",ue],["partialRight",Q],["rearg",ne]],Ln="[object Arguments]",Hn="[object Array]",ii="[object AsyncFunction]",zn="[object Boolean]",ri="[object Date]",Di="[object DOMException]",rr="[object Error]",Vo="[object Function]",Lo="[object GeneratorFunction]",on="[object Map]",or="[object Number]",bd="[object Null]",Wn="[object Object]",Bs="[object Promise]",qa="[object Proxy]",Hr="[object RegExp]",sn="[object Set]",an="[object String]",Mi="[object Symbol]",Ja="[object Undefined]",sr="[object WeakMap]",Vs="[object WeakSet]",ar="[object ArrayBuffer]",ki="[object DataView]",Ho="[object Float32Array]",zo="[object Float64Array]",wd="[object Int8Array]",Cd="[object Int16Array]",xd="[object Int32Array]",Td="[object Uint8Array]",Sd="[object Uint8ClampedArray]",Dd="[object Uint16Array]",Md="[object Uint32Array]",Ty=/\b__p \+= '';/g,Sy=/\b(__p \+=) '' \+/g,Dy=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nf=/&(?:amp|lt|gt|quot|#39);/g,rf=/[&<>"']/g,My=RegExp(nf.source),ky=RegExp(rf.source),Ey=/<%-([\s\S]+?)%>/g,Oy=/<%([\s\S]+?)%>/g,of=/<%=([\s\S]+?)%>/g,Iy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ay=/^\w*$/,Ny=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kd=/[\\^$.*+?()[\]{}|]/g,Py=RegExp(kd.source),Ed=/^\s+/,Ry=/\s/,Fy=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,By=/\{\n\/\* \[wrapped with (.+)\] \*/,Vy=/,? & /,Ly=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hy=/[()=,{}\[\]\/\s]/,zy=/\\(\\)?/g,Wy=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sf=/\w*$/,Gy=/^[-+]0x[0-9a-f]+$/i,jy=/^0b[01]+$/i,$y=/^\[object .+?Constructor\]$/,Uy=/^0o[0-7]+$/i,qy=/^(?:0|[1-9]\d*)$/,Jy=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ka=/($^)/,Ky=/['\n\r\u2028\u2029\\]/g,Ya="\\ud800-\\udfff",Yy="\\u0300-\\u036f",Qy="\\ufe20-\\ufe2f",Zy="\\u20d0-\\u20ff",af=Yy+Qy+Zy,lf="\\u2700-\\u27bf",cf="a-z\\xdf-\\xf6\\xf8-\\xff",Xy="\\xac\\xb1\\xd7\\xf7",eb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tb="\\u2000-\\u206f",nb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",df="A-Z\\xc0-\\xd6\\xd8-\\xde",uf="\\ufe0e\\ufe0f",pf=Xy+eb+tb+nb,Od="['\u2019]",ib="["+Ya+"]",hf="["+pf+"]",Qa="["+af+"]",ff="\\d+",rb="["+lf+"]",mf="["+cf+"]",gf="[^"+Ya+pf+ff+lf+cf+df+"]",Id="\\ud83c[\\udffb-\\udfff]",ob="(?:"+Qa+"|"+Id+")",_f="[^"+Ya+"]",Ad="(?:\\ud83c[\\udde6-\\uddff]){2}",Nd="[\\ud800-\\udbff][\\udc00-\\udfff]",Wo="["+df+"]",vf="\\u200d",yf="(?:"+mf+"|"+gf+")",sb="(?:"+Wo+"|"+gf+")",bf="(?:"+Od+"(?:d|ll|m|re|s|t|ve))?",wf="(?:"+Od+"(?:D|LL|M|RE|S|T|VE))?",Cf=ob+"?",xf="["+uf+"]?",ab="(?:"+vf+"(?:"+[_f,Ad,Nd].join("|")+")"+xf+Cf+")*",lb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cb="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Tf=xf+Cf+ab,db="(?:"+[rb,Ad,Nd].join("|")+")"+Tf,ub="(?:"+[_f+Qa+"?",Qa,Ad,Nd,ib].join("|")+")",pb=RegExp(Od,"g"),hb=RegExp(Qa,"g"),Pd=RegExp(Id+"(?="+Id+")|"+ub+Tf,"g"),fb=RegExp([Wo+"?"+mf+"+"+bf+"(?="+[hf,Wo,"$"].join("|")+")",sb+"+"+wf+"(?="+[hf,Wo+yf,"$"].join("|")+")",Wo+"?"+yf+"+"+bf,Wo+"+"+wf,cb,lb,ff,db].join("|"),"g"),mb=RegExp("["+vf+Ya+af+uf+"]"),gb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_b=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],vb=-1,Be={};Be[Ho]=Be[zo]=Be[wd]=Be[Cd]=Be[xd]=Be[Td]=Be[Sd]=Be[Dd]=Be[Md]=!0,Be[Ln]=Be[Hn]=Be[ar]=Be[zn]=Be[ki]=Be[ri]=Be[rr]=Be[Vo]=Be[on]=Be[or]=Be[Wn]=Be[Hr]=Be[sn]=Be[an]=Be[sr]=!1;var Fe={};Fe[Ln]=Fe[Hn]=Fe[ar]=Fe[ki]=Fe[zn]=Fe[ri]=Fe[Ho]=Fe[zo]=Fe[wd]=Fe[Cd]=Fe[xd]=Fe[on]=Fe[or]=Fe[Wn]=Fe[Hr]=Fe[sn]=Fe[an]=Fe[Mi]=Fe[Td]=Fe[Sd]=Fe[Dd]=Fe[Md]=!0,Fe[rr]=Fe[Vo]=Fe[sr]=!1;var yb={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},bb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xb=parseFloat,Tb=parseInt,Sf=typeof global=="object"&&global&&global.Object===Object&&global,Sb=typeof self=="object"&&self&&self.Object===Object&&self,lt=Sf||Sb||Function("return this")(),Rd=typeof Rs=="object"&&Rs&&!Rs.nodeType&&Rs,zr=Rd&&typeof Ua=="object"&&Ua&&!Ua.nodeType&&Ua,Df=zr&&zr.exports===Rd,Fd=Df&&Sf.process,Cn=function(){try{var T=zr&&zr.require&&zr.require("util").types;return T||Fd&&Fd.binding&&Fd.binding("util")}catch{}}(),Mf=Cn&&Cn.isArrayBuffer,kf=Cn&&Cn.isDate,Ef=Cn&&Cn.isMap,Of=Cn&&Cn.isRegExp,If=Cn&&Cn.isSet,Af=Cn&&Cn.isTypedArray;function ln(T,N,O){switch(O.length){case 0:return T.call(N);case 1:return T.call(N,O[0]);case 2:return T.call(N,O[0],O[1]);case 3:return T.call(N,O[0],O[1],O[2])}return T.apply(N,O)}function Db(T,N,O,G){for(var ce=-1,xe=T==null?0:T.length;++ce<xe;){var et=T[ce];N(G,et,O(et),T)}return G}function xn(T,N){for(var O=-1,G=T==null?0:T.length;++O<G&&N(T[O],O,T)!==!1;);return T}function Mb(T,N){for(var O=T==null?0:T.length;O--&&N(T[O],O,T)!==!1;);return T}function Nf(T,N){for(var O=-1,G=T==null?0:T.length;++O<G;)if(!N(T[O],O,T))return!1;return!0}function lr(T,N){for(var O=-1,G=T==null?0:T.length,ce=0,xe=[];++O<G;){var et=T[O];N(et,O,T)&&(xe[ce++]=et)}return xe}function Za(T,N){var O=T==null?0:T.length;return!!O&&Go(T,N,0)>-1}function Bd(T,N,O){for(var G=-1,ce=T==null?0:T.length;++G<ce;)if(O(N,T[G]))return!0;return!1}function Le(T,N){for(var O=-1,G=T==null?0:T.length,ce=Array(G);++O<G;)ce[O]=N(T[O],O,T);return ce}function cr(T,N){for(var O=-1,G=N.length,ce=T.length;++O<G;)T[ce+O]=N[O];return T}function Vd(T,N,O,G){var ce=-1,xe=T==null?0:T.length;for(G&&xe&&(O=T[++ce]);++ce<xe;)O=N(O,T[ce],ce,T);return O}function kb(T,N,O,G){var ce=T==null?0:T.length;for(G&&ce&&(O=T[--ce]);ce--;)O=N(O,T[ce],ce,T);return O}function Ld(T,N){for(var O=-1,G=T==null?0:T.length;++O<G;)if(N(T[O],O,T))return!0;return!1}var Eb=Hd("length");function Ob(T){return T.split("")}function Ib(T){return T.match(Ly)||[]}function Pf(T,N,O){var G;return O(T,function(ce,xe,et){if(N(ce,xe,et))return G=xe,!1}),G}function Xa(T,N,O,G){for(var ce=T.length,xe=O+(G?1:-1);G?xe--:++xe<ce;)if(N(T[xe],xe,T))return xe;return-1}function Go(T,N,O){return N===N?Gb(T,N,O):Xa(T,Rf,O)}function Ab(T,N,O,G){for(var ce=O-1,xe=T.length;++ce<xe;)if(G(T[ce],N))return ce;return-1}function Rf(T){return T!==T}function Ff(T,N){var O=T==null?0:T.length;return O?Wd(T,N)/O:Si}function Hd(T){return function(N){return N==null?t:N[T]}}function zd(T){return function(N){return T==null?t:T[N]}}function Bf(T,N,O,G,ce){return ce(T,function(xe,et,Pe){O=G?(G=!1,xe):N(O,xe,et,Pe)}),O}function Nb(T,N){var O=T.length;for(T.sort(N);O--;)T[O]=T[O].value;return T}function Wd(T,N){for(var O,G=-1,ce=T.length;++G<ce;){var xe=N(T[G]);xe!==t&&(O=O===t?xe:O+xe)}return O}function Gd(T,N){for(var O=-1,G=Array(T);++O<T;)G[O]=N(O);return G}function Pb(T,N){return Le(N,function(O){return[O,T[O]]})}function Vf(T){return T&&T.slice(0,Wf(T)+1).replace(Ed,"")}function cn(T){return function(N){return T(N)}}function jd(T,N){return Le(N,function(O){return T[O]})}function Ls(T,N){return T.has(N)}function Lf(T,N){for(var O=-1,G=T.length;++O<G&&Go(N,T[O],0)>-1;);return O}function Hf(T,N){for(var O=T.length;O--&&Go(N,T[O],0)>-1;);return O}function Rb(T,N){for(var O=T.length,G=0;O--;)T[O]===N&&++G;return G}var Fb=zd(yb),Bb=zd(bb);function Vb(T){return"\\"+Cb[T]}function Lb(T,N){return T==null?t:T[N]}function jo(T){return mb.test(T)}function Hb(T){return gb.test(T)}function zb(T){for(var N,O=[];!(N=T.next()).done;)O.push(N.value);return O}function $d(T){var N=-1,O=Array(T.size);return T.forEach(function(G,ce){O[++N]=[ce,G]}),O}function zf(T,N){return function(O){return T(N(O))}}function dr(T,N){for(var O=-1,G=T.length,ce=0,xe=[];++O<G;){var et=T[O];(et===N||et===u)&&(T[O]=u,xe[ce++]=O)}return xe}function el(T){var N=-1,O=Array(T.size);return T.forEach(function(G){O[++N]=G}),O}function Wb(T){var N=-1,O=Array(T.size);return T.forEach(function(G){O[++N]=[G,G]}),O}function Gb(T,N,O){for(var G=O-1,ce=T.length;++G<ce;)if(T[G]===N)return G;return-1}function jb(T,N,O){for(var G=O+1;G--;)if(T[G]===N)return G;return G}function $o(T){return jo(T)?Ub(T):Eb(T)}function Gn(T){return jo(T)?qb(T):Ob(T)}function Wf(T){for(var N=T.length;N--&&Ry.test(T.charAt(N)););return N}var $b=zd(wb);function Ub(T){for(var N=Pd.lastIndex=0;Pd.test(T);)++N;return N}function qb(T){return T.match(Pd)||[]}function Jb(T){return T.match(fb)||[]}var Kb=function T(N){N=N==null?lt:ur.defaults(lt.Object(),N,ur.pick(lt,_b));var O=N.Array,G=N.Date,ce=N.Error,xe=N.Function,et=N.Math,Pe=N.Object,Ud=N.RegExp,Yb=N.String,Tn=N.TypeError,tl=O.prototype,Qb=xe.prototype,Uo=Pe.prototype,nl=N["__core-js_shared__"],il=Qb.toString,Ie=Uo.hasOwnProperty,Zb=0,Gf=function(){var s=/[^.]+$/.exec(nl&&nl.keys&&nl.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),rl=Uo.toString,Xb=il.call(Pe),ew=lt._,tw=Ud("^"+il.call(Ie).replace(kd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ol=Df?N.Buffer:t,pr=N.Symbol,sl=N.Uint8Array,jf=ol?ol.allocUnsafe:t,al=zf(Pe.getPrototypeOf,Pe),$f=Pe.create,Uf=Uo.propertyIsEnumerable,ll=tl.splice,qf=pr?pr.isConcatSpreadable:t,Hs=pr?pr.iterator:t,Wr=pr?pr.toStringTag:t,cl=function(){try{var s=qr(Pe,"defineProperty");return s({},"",{}),s}catch{}}(),nw=N.clearTimeout!==lt.clearTimeout&&N.clearTimeout,iw=G&&G.now!==lt.Date.now&&G.now,rw=N.setTimeout!==lt.setTimeout&&N.setTimeout,dl=et.ceil,ul=et.floor,qd=Pe.getOwnPropertySymbols,ow=ol?ol.isBuffer:t,Jf=N.isFinite,sw=tl.join,aw=zf(Pe.keys,Pe),tt=et.max,St=et.min,lw=G.now,cw=N.parseInt,Kf=et.random,dw=tl.reverse,Jd=qr(N,"DataView"),zs=qr(N,"Map"),Kd=qr(N,"Promise"),qo=qr(N,"Set"),Ws=qr(N,"WeakMap"),Gs=qr(Pe,"create"),pl=Ws&&new Ws,Jo={},uw=Jr(Jd),pw=Jr(zs),hw=Jr(Kd),fw=Jr(qo),mw=Jr(Ws),hl=pr?pr.prototype:t,js=hl?hl.valueOf:t,Yf=hl?hl.toString:t;function _(s){if(Je(s)&&!de(s)&&!(s instanceof _e)){if(s instanceof Sn)return s;if(Ie.call(s,"__wrapped__"))return Qm(s)}return new Sn(s)}var Ko=function(){function s(){}return function(a){if(!$e(a))return{};if($f)return $f(a);s.prototype=a;var d=new s;return s.prototype=t,d}}();function fl(){}function Sn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}_.templateSettings={escape:Ey,evaluate:Oy,interpolate:of,variable:"",imports:{_}},_.prototype=fl.prototype,_.prototype.constructor=_,Sn.prototype=Ko(fl.prototype),Sn.prototype.constructor=Sn;function _e(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=at,this.__views__=[]}function gw(){var s=new _e(this.__wrapped__);return s.__actions__=qt(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=qt(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=qt(this.__views__),s}function _w(){if(this.__filtered__){var s=new _e(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function vw(){var s=this.__wrapped__.value(),a=this.__dir__,d=de(s),h=a<0,m=d?s.length:0,v=OC(0,m,this.__views__),w=v.start,x=v.end,S=x-w,P=h?x:w-1,F=this.__iteratees__,B=F.length,H=0,U=St(S,this.__takeCount__);if(!d||!h&&m==S&&U==S)return bm(s,this.__actions__);var X=[];e:for(;S--&&H<U;){P+=a;for(var he=-1,ee=s[P];++he<B;){var ge=F[he],ve=ge.iteratee,pn=ge.type,Bt=ve(ee);if(pn==mt)ee=Bt;else if(!Bt){if(pn==Tt)continue e;break e}}X[H++]=ee}return X}_e.prototype=Ko(fl.prototype),_e.prototype.constructor=_e;function Gr(s){var a=-1,d=s==null?0:s.length;for(this.clear();++a<d;){var h=s[a];this.set(h[0],h[1])}}function yw(){this.__data__=Gs?Gs(null):{},this.size=0}function bw(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function ww(s){var a=this.__data__;if(Gs){var d=a[s];return d===l?t:d}return Ie.call(a,s)?a[s]:t}function Cw(s){var a=this.__data__;return Gs?a[s]!==t:Ie.call(a,s)}function xw(s,a){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=Gs&&a===t?l:a,this}Gr.prototype.clear=yw,Gr.prototype.delete=bw,Gr.prototype.get=ww,Gr.prototype.has=Cw,Gr.prototype.set=xw;function Ei(s){var a=-1,d=s==null?0:s.length;for(this.clear();++a<d;){var h=s[a];this.set(h[0],h[1])}}function Tw(){this.__data__=[],this.size=0}function Sw(s){var a=this.__data__,d=ml(a,s);if(d<0)return!1;var h=a.length-1;return d==h?a.pop():ll.call(a,d,1),--this.size,!0}function Dw(s){var a=this.__data__,d=ml(a,s);return d<0?t:a[d][1]}function Mw(s){return ml(this.__data__,s)>-1}function kw(s,a){var d=this.__data__,h=ml(d,s);return h<0?(++this.size,d.push([s,a])):d[h][1]=a,this}Ei.prototype.clear=Tw,Ei.prototype.delete=Sw,Ei.prototype.get=Dw,Ei.prototype.has=Mw,Ei.prototype.set=kw;function Oi(s){var a=-1,d=s==null?0:s.length;for(this.clear();++a<d;){var h=s[a];this.set(h[0],h[1])}}function Ew(){this.size=0,this.__data__={hash:new Gr,map:new(zs||Ei),string:new Gr}}function Ow(s){var a=Ml(this,s).delete(s);return this.size-=a?1:0,a}function Iw(s){return Ml(this,s).get(s)}function Aw(s){return Ml(this,s).has(s)}function Nw(s,a){var d=Ml(this,s),h=d.size;return d.set(s,a),this.size+=d.size==h?0:1,this}Oi.prototype.clear=Ew,Oi.prototype.delete=Ow,Oi.prototype.get=Iw,Oi.prototype.has=Aw,Oi.prototype.set=Nw;function jr(s){var a=-1,d=s==null?0:s.length;for(this.__data__=new Oi;++a<d;)this.add(s[a])}function Pw(s){return this.__data__.set(s,l),this}function Rw(s){return this.__data__.has(s)}jr.prototype.add=jr.prototype.push=Pw,jr.prototype.has=Rw;function jn(s){var a=this.__data__=new Ei(s);this.size=a.size}function Fw(){this.__data__=new Ei,this.size=0}function Bw(s){var a=this.__data__,d=a.delete(s);return this.size=a.size,d}function Vw(s){return this.__data__.get(s)}function Lw(s){return this.__data__.has(s)}function Hw(s,a){var d=this.__data__;if(d instanceof Ei){var h=d.__data__;if(!zs||h.length<n-1)return h.push([s,a]),this.size=++d.size,this;d=this.__data__=new Oi(h)}return d.set(s,a),this.size=d.size,this}jn.prototype.clear=Fw,jn.prototype.delete=Bw,jn.prototype.get=Vw,jn.prototype.has=Lw,jn.prototype.set=Hw;function Qf(s,a){var d=de(s),h=!d&&Kr(s),m=!d&&!h&&_r(s),v=!d&&!h&&!m&&Xo(s),w=d||h||m||v,x=w?Gd(s.length,Yb):[],S=x.length;for(var P in s)(a||Ie.call(s,P))&&!(w&&(P=="length"||m&&(P=="offset"||P=="parent")||v&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||Pi(P,S)))&&x.push(P);return x}function Zf(s){var a=s.length;return a?s[su(0,a-1)]:t}function zw(s,a){return kl(qt(s),$r(a,0,s.length))}function Ww(s){return kl(qt(s))}function Yd(s,a,d){(d!==t&&!$n(s[a],d)||d===t&&!(a in s))&&Ii(s,a,d)}function $s(s,a,d){var h=s[a];(!(Ie.call(s,a)&&$n(h,d))||d===t&&!(a in s))&&Ii(s,a,d)}function ml(s,a){for(var d=s.length;d--;)if($n(s[d][0],a))return d;return-1}function Gw(s,a,d,h){return hr(s,function(m,v,w){a(h,m,d(m),w)}),h}function Xf(s,a){return s&&si(a,ct(a),s)}function jw(s,a){return s&&si(a,Kt(a),s)}function Ii(s,a,d){a=="__proto__"&&cl?cl(s,a,{configurable:!0,enumerable:!0,value:d,writable:!0}):s[a]=d}function Qd(s,a){for(var d=-1,h=a.length,m=O(h),v=s==null;++d<h;)m[d]=v?t:Iu(s,a[d]);return m}function $r(s,a,d){return s===s&&(d!==t&&(s=s<=d?s:d),a!==t&&(s=s>=a?s:a)),s}function Dn(s,a,d,h,m,v){var w,x=a&p,S=a&f,P=a&g;if(d&&(w=m?d(s,h,m,v):d(s)),w!==t)return w;if(!$e(s))return s;var F=de(s);if(F){if(w=AC(s),!x)return qt(s,w)}else{var B=Dt(s),H=B==Vo||B==Lo;if(_r(s))return xm(s,x);if(B==Wn||B==Ln||H&&!m){if(w=S||H?{}:Wm(s),!x)return S?wC(s,jw(w,s)):bC(s,Xf(w,s))}else{if(!Fe[B])return m?s:{};w=NC(s,B,x)}}v||(v=new jn);var U=v.get(s);if(U)return U;v.set(s,w),_g(s)?s.forEach(function(ee){w.add(Dn(ee,a,d,ee,s,v))}):mg(s)&&s.forEach(function(ee,ge){w.set(ge,Dn(ee,a,d,ge,s,v))});var X=P?S?_u:gu:S?Kt:ct,he=F?t:X(s);return xn(he||s,function(ee,ge){he&&(ge=ee,ee=s[ge]),$s(w,ge,Dn(ee,a,d,ge,s,v))}),w}function $w(s){var a=ct(s);return function(d){return em(d,s,a)}}function em(s,a,d){var h=d.length;if(s==null)return!h;for(s=Pe(s);h--;){var m=d[h],v=a[m],w=s[m];if(w===t&&!(m in s)||!v(w))return!1}return!0}function tm(s,a,d){if(typeof s!="function")throw new Tn(r);return Zs(function(){s.apply(t,d)},a)}function Us(s,a,d,h){var m=-1,v=Za,w=!0,x=s.length,S=[],P=a.length;if(!x)return S;d&&(a=Le(a,cn(d))),h?(v=Bd,w=!1):a.length>=n&&(v=Ls,w=!1,a=new jr(a));e:for(;++m<x;){var F=s[m],B=d==null?F:d(F);if(F=h||F!==0?F:0,w&&B===B){for(var H=P;H--;)if(a[H]===B)continue e;S.push(F)}else v(a,B,h)||S.push(F)}return S}var hr=km(oi),nm=km(Xd,!0);function Uw(s,a){var d=!0;return hr(s,function(h,m,v){return d=!!a(h,m,v),d}),d}function gl(s,a,d){for(var h=-1,m=s.length;++h<m;){var v=s[h],w=a(v);if(w!=null&&(x===t?w===w&&!un(w):d(w,x)))var x=w,S=v}return S}function qw(s,a,d,h){var m=s.length;for(d=pe(d),d<0&&(d=-d>m?0:m+d),h=h===t||h>m?m:pe(h),h<0&&(h+=m),h=d>h?0:yg(h);d<h;)s[d++]=a;return s}function im(s,a){var d=[];return hr(s,function(h,m,v){a(h,m,v)&&d.push(h)}),d}function gt(s,a,d,h,m){var v=-1,w=s.length;for(d||(d=RC),m||(m=[]);++v<w;){var x=s[v];a>0&&d(x)?a>1?gt(x,a-1,d,h,m):cr(m,x):h||(m[m.length]=x)}return m}var Zd=Em(),rm=Em(!0);function oi(s,a){return s&&Zd(s,a,ct)}function Xd(s,a){return s&&rm(s,a,ct)}function _l(s,a){return lr(a,function(d){return Ri(s[d])})}function Ur(s,a){a=mr(a,s);for(var d=0,h=a.length;s!=null&&d<h;)s=s[ai(a[d++])];return d&&d==h?s:t}function om(s,a,d){var h=a(s);return de(s)?h:cr(h,d(s))}function Rt(s){return s==null?s===t?Ja:bd:Wr&&Wr in Pe(s)?EC(s):WC(s)}function eu(s,a){return s>a}function Jw(s,a){return s!=null&&Ie.call(s,a)}function Kw(s,a){return s!=null&&a in Pe(s)}function Yw(s,a,d){return s>=St(a,d)&&s<tt(a,d)}function tu(s,a,d){for(var h=d?Bd:Za,m=s[0].length,v=s.length,w=v,x=O(v),S=1/0,P=[];w--;){var F=s[w];w&&a&&(F=Le(F,cn(a))),S=St(F.length,S),x[w]=!d&&(a||m>=120&&F.length>=120)?new jr(w&&F):t}F=s[0];var B=-1,H=x[0];e:for(;++B<m&&P.length<S;){var U=F[B],X=a?a(U):U;if(U=d||U!==0?U:0,!(H?Ls(H,X):h(P,X,d))){for(w=v;--w;){var he=x[w];if(!(he?Ls(he,X):h(s[w],X,d)))continue e}H&&H.push(X),P.push(U)}}return P}function Qw(s,a,d,h){return oi(s,function(m,v,w){a(h,d(m),v,w)}),h}function qs(s,a,d){a=mr(a,s),s=Um(s,a);var h=s==null?s:s[ai(kn(a))];return h==null?t:ln(h,s,d)}function sm(s){return Je(s)&&Rt(s)==Ln}function Zw(s){return Je(s)&&Rt(s)==ar}function Xw(s){return Je(s)&&Rt(s)==ri}function Js(s,a,d,h,m){return s===a?!0:s==null||a==null||!Je(s)&&!Je(a)?s!==s&&a!==a:eC(s,a,d,h,Js,m)}function eC(s,a,d,h,m,v){var w=de(s),x=de(a),S=w?Hn:Dt(s),P=x?Hn:Dt(a);S=S==Ln?Wn:S,P=P==Ln?Wn:P;var F=S==Wn,B=P==Wn,H=S==P;if(H&&_r(s)){if(!_r(a))return!1;w=!0,F=!1}if(H&&!F)return v||(v=new jn),w||Xo(s)?Lm(s,a,d,h,m,v):MC(s,a,S,d,h,m,v);if(!(d&y)){var U=F&&Ie.call(s,"__wrapped__"),X=B&&Ie.call(a,"__wrapped__");if(U||X){var he=U?s.value():s,ee=X?a.value():a;return v||(v=new jn),m(he,ee,d,h,v)}}return H?(v||(v=new jn),kC(s,a,d,h,m,v)):!1}function tC(s){return Je(s)&&Dt(s)==on}function nu(s,a,d,h){var m=d.length,v=m,w=!h;if(s==null)return!v;for(s=Pe(s);m--;){var x=d[m];if(w&&x[2]?x[1]!==s[x[0]]:!(x[0]in s))return!1}for(;++m<v;){x=d[m];var S=x[0],P=s[S],F=x[1];if(w&&x[2]){if(P===t&&!(S in s))return!1}else{var B=new jn;if(h)var H=h(P,F,S,s,a,B);if(!(H===t?Js(F,P,y|b,h,B):H))return!1}}return!0}function am(s){if(!$e(s)||BC(s))return!1;var a=Ri(s)?tw:$y;return a.test(Jr(s))}function nC(s){return Je(s)&&Rt(s)==Hr}function iC(s){return Je(s)&&Dt(s)==sn}function rC(s){return Je(s)&&Pl(s.length)&&!!Be[Rt(s)]}function lm(s){return typeof s=="function"?s:s==null?Yt:typeof s=="object"?de(s)?um(s[0],s[1]):dm(s):Og(s)}function iu(s){if(!Qs(s))return aw(s);var a=[];for(var d in Pe(s))Ie.call(s,d)&&d!="constructor"&&a.push(d);return a}function oC(s){if(!$e(s))return zC(s);var a=Qs(s),d=[];for(var h in s)h=="constructor"&&(a||!Ie.call(s,h))||d.push(h);return d}function ru(s,a){return s<a}function cm(s,a){var d=-1,h=Jt(s)?O(s.length):[];return hr(s,function(m,v,w){h[++d]=a(m,v,w)}),h}function dm(s){var a=yu(s);return a.length==1&&a[0][2]?jm(a[0][0],a[0][1]):function(d){return d===s||nu(d,s,a)}}function um(s,a){return wu(s)&&Gm(a)?jm(ai(s),a):function(d){var h=Iu(d,s);return h===t&&h===a?Au(d,s):Js(a,h,y|b)}}function vl(s,a,d,h,m){s!==a&&Zd(a,function(v,w){if(m||(m=new jn),$e(v))sC(s,a,w,d,vl,h,m);else{var x=h?h(xu(s,w),v,w+"",s,a,m):t;x===t&&(x=v),Yd(s,w,x)}},Kt)}function sC(s,a,d,h,m,v,w){var x=xu(s,d),S=xu(a,d),P=w.get(S);if(P){Yd(s,d,P);return}var F=v?v(x,S,d+"",s,a,w):t,B=F===t;if(B){var H=de(S),U=!H&&_r(S),X=!H&&!U&&Xo(S);F=S,H||U||X?de(x)?F=x:Ye(x)?F=qt(x):U?(B=!1,F=xm(S,!0)):X?(B=!1,F=Tm(S,!0)):F=[]:Xs(S)||Kr(S)?(F=x,Kr(x)?F=bg(x):(!$e(x)||Ri(x))&&(F=Wm(S))):B=!1}B&&(w.set(S,F),m(F,S,h,v,w),w.delete(S)),Yd(s,d,F)}function pm(s,a){var d=s.length;if(d)return a+=a<0?d:0,Pi(a,d)?s[a]:t}function hm(s,a,d){a.length?a=Le(a,function(v){return de(v)?function(w){return Ur(w,v.length===1?v[0]:v)}:v}):a=[Yt];var h=-1;a=Le(a,cn(Z()));var m=cm(s,function(v,w,x){var S=Le(a,function(P){return P(v)});return{criteria:S,index:++h,value:v}});return Nb(m,function(v,w){return yC(v,w,d)})}function aC(s,a){return fm(s,a,function(d,h){return Au(s,h)})}function fm(s,a,d){for(var h=-1,m=a.length,v={};++h<m;){var w=a[h],x=Ur(s,w);d(x,w)&&Ks(v,mr(w,s),x)}return v}function lC(s){return function(a){return Ur(a,s)}}function ou(s,a,d,h){var m=h?Ab:Go,v=-1,w=a.length,x=s;for(s===a&&(a=qt(a)),d&&(x=Le(s,cn(d)));++v<w;)for(var S=0,P=a[v],F=d?d(P):P;(S=m(x,F,S,h))>-1;)x!==s&&ll.call(x,S,1),ll.call(s,S,1);return s}function mm(s,a){for(var d=s?a.length:0,h=d-1;d--;){var m=a[d];if(d==h||m!==v){var v=m;Pi(m)?ll.call(s,m,1):cu(s,m)}}return s}function su(s,a){return s+ul(Kf()*(a-s+1))}function cC(s,a,d,h){for(var m=-1,v=tt(dl((a-s)/(d||1)),0),w=O(v);v--;)w[h?v:++m]=s,s+=d;return w}function au(s,a){var d="";if(!s||a<1||a>qe)return d;do a%2&&(d+=s),a=ul(a/2),a&&(s+=s);while(a);return d}function fe(s,a){return Tu($m(s,a,Yt),s+"")}function dC(s){return Zf(es(s))}function uC(s,a){var d=es(s);return kl(d,$r(a,0,d.length))}function Ks(s,a,d,h){if(!$e(s))return s;a=mr(a,s);for(var m=-1,v=a.length,w=v-1,x=s;x!=null&&++m<v;){var S=ai(a[m]),P=d;if(S==="__proto__"||S==="constructor"||S==="prototype")return s;if(m!=w){var F=x[S];P=h?h(F,S,x):t,P===t&&(P=$e(F)?F:Pi(a[m+1])?[]:{})}$s(x,S,P),x=x[S]}return s}var gm=pl?function(s,a){return pl.set(s,a),s}:Yt,pC=cl?function(s,a){return cl(s,"toString",{configurable:!0,enumerable:!1,value:Pu(a),writable:!0})}:Yt;function hC(s){return kl(es(s))}function Mn(s,a,d){var h=-1,m=s.length;a<0&&(a=-a>m?0:m+a),d=d>m?m:d,d<0&&(d+=m),m=a>d?0:d-a>>>0,a>>>=0;for(var v=O(m);++h<m;)v[h]=s[h+a];return v}function fC(s,a){var d;return hr(s,function(h,m,v){return d=a(h,m,v),!d}),!!d}function yl(s,a,d){var h=0,m=s==null?h:s.length;if(typeof a=="number"&&a===a&&m<=Fs){for(;h<m;){var v=h+m>>>1,w=s[v];w!==null&&!un(w)&&(d?w<=a:w<a)?h=v+1:m=v}return m}return lu(s,a,Yt,d)}function lu(s,a,d,h){var m=0,v=s==null?0:s.length;if(v===0)return 0;a=d(a);for(var w=a!==a,x=a===null,S=un(a),P=a===t;m<v;){var F=ul((m+v)/2),B=d(s[F]),H=B!==t,U=B===null,X=B===B,he=un(B);if(w)var ee=h||X;else P?ee=X&&(h||H):x?ee=X&&H&&(h||!U):S?ee=X&&H&&!U&&(h||!he):U||he?ee=!1:ee=h?B<=a:B<a;ee?m=F+1:v=F}return St(v,Bo)}function _m(s,a){for(var d=-1,h=s.length,m=0,v=[];++d<h;){var w=s[d],x=a?a(w):w;if(!d||!$n(x,S)){var S=x;v[m++]=w===0?0:w}}return v}function vm(s){return typeof s=="number"?s:un(s)?Si:+s}function dn(s){if(typeof s=="string")return s;if(de(s))return Le(s,dn)+"";if(un(s))return Yf?Yf.call(s):"";var a=s+"";return a=="0"&&1/s==-Pt?"-0":a}function fr(s,a,d){var h=-1,m=Za,v=s.length,w=!0,x=[],S=x;if(d)w=!1,m=Bd;else if(v>=n){var P=a?null:SC(s);if(P)return el(P);w=!1,m=Ls,S=new jr}else S=a?[]:x;e:for(;++h<v;){var F=s[h],B=a?a(F):F;if(F=d||F!==0?F:0,w&&B===B){for(var H=S.length;H--;)if(S[H]===B)continue e;a&&S.push(B),x.push(F)}else m(S,B,d)||(S!==x&&S.push(B),x.push(F))}return x}function cu(s,a){return a=mr(a,s),s=Um(s,a),s==null||delete s[ai(kn(a))]}function ym(s,a,d,h){return Ks(s,a,d(Ur(s,a)),h)}function bl(s,a,d,h){for(var m=s.length,v=h?m:-1;(h?v--:++v<m)&&a(s[v],v,s););return d?Mn(s,h?0:v,h?v+1:m):Mn(s,h?v+1:0,h?m:v)}function bm(s,a){var d=s;return d instanceof _e&&(d=d.value()),Vd(a,function(h,m){return m.func.apply(m.thisArg,cr([h],m.args))},d)}function du(s,a,d){var h=s.length;if(h<2)return h?fr(s[0]):[];for(var m=-1,v=O(h);++m<h;)for(var w=s[m],x=-1;++x<h;)x!=m&&(v[m]=Us(v[m]||w,s[x],a,d));return fr(gt(v,1),a,d)}function wm(s,a,d){for(var h=-1,m=s.length,v=a.length,w={};++h<m;){var x=h<v?a[h]:t;d(w,s[h],x)}return w}function uu(s){return Ye(s)?s:[]}function pu(s){return typeof s=="function"?s:Yt}function mr(s,a){return de(s)?s:wu(s,a)?[s]:Ym(Me(s))}var mC=fe;function gr(s,a,d){var h=s.length;return d=d===t?h:d,!a&&d>=h?s:Mn(s,a,d)}var Cm=nw||function(s){return lt.clearTimeout(s)};function xm(s,a){if(a)return s.slice();var d=s.length,h=jf?jf(d):new s.constructor(d);return s.copy(h),h}function hu(s){var a=new s.constructor(s.byteLength);return new sl(a).set(new sl(s)),a}function gC(s,a){var d=a?hu(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function _C(s){var a=new s.constructor(s.source,sf.exec(s));return a.lastIndex=s.lastIndex,a}function vC(s){return js?Pe(js.call(s)):{}}function Tm(s,a){var d=a?hu(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function Sm(s,a){if(s!==a){var d=s!==t,h=s===null,m=s===s,v=un(s),w=a!==t,x=a===null,S=a===a,P=un(a);if(!x&&!P&&!v&&s>a||v&&w&&S&&!x&&!P||h&&w&&S||!d&&S||!m)return 1;if(!h&&!v&&!P&&s<a||P&&d&&m&&!h&&!v||x&&d&&m||!w&&m||!S)return-1}return 0}function yC(s,a,d){for(var h=-1,m=s.criteria,v=a.criteria,w=m.length,x=d.length;++h<w;){var S=Sm(m[h],v[h]);if(S){if(h>=x)return S;var P=d[h];return S*(P=="desc"?-1:1)}}return s.index-a.index}function Dm(s,a,d,h){for(var m=-1,v=s.length,w=d.length,x=-1,S=a.length,P=tt(v-w,0),F=O(S+P),B=!h;++x<S;)F[x]=a[x];for(;++m<w;)(B||m<v)&&(F[d[m]]=s[m]);for(;P--;)F[x++]=s[m++];return F}function Mm(s,a,d,h){for(var m=-1,v=s.length,w=-1,x=d.length,S=-1,P=a.length,F=tt(v-x,0),B=O(F+P),H=!h;++m<F;)B[m]=s[m];for(var U=m;++S<P;)B[U+S]=a[S];for(;++w<x;)(H||m<v)&&(B[U+d[w]]=s[m++]);return B}function qt(s,a){var d=-1,h=s.length;for(a||(a=O(h));++d<h;)a[d]=s[d];return a}function si(s,a,d,h){var m=!d;d||(d={});for(var v=-1,w=a.length;++v<w;){var x=a[v],S=h?h(d[x],s[x],x,d,s):t;S===t&&(S=s[x]),m?Ii(d,x,S):$s(d,x,S)}return d}function bC(s,a){return si(s,bu(s),a)}function wC(s,a){return si(s,Hm(s),a)}function wl(s,a){return function(d,h){var m=de(d)?Db:Gw,v=a?a():{};return m(d,s,Z(h,2),v)}}function Yo(s){return fe(function(a,d){var h=-1,m=d.length,v=m>1?d[m-1]:t,w=m>2?d[2]:t;for(v=s.length>3&&typeof v=="function"?(m--,v):t,w&&Ft(d[0],d[1],w)&&(v=m<3?t:v,m=1),a=Pe(a);++h<m;){var x=d[h];x&&s(a,x,h,v)}return a})}function km(s,a){return function(d,h){if(d==null)return d;if(!Jt(d))return s(d,h);for(var m=d.length,v=a?m:-1,w=Pe(d);(a?v--:++v<m)&&h(w[v],v,w)!==!1;);return d}}function Em(s){return function(a,d,h){for(var m=-1,v=Pe(a),w=h(a),x=w.length;x--;){var S=w[s?x:++m];if(d(v[S],S,v)===!1)break}return a}}function CC(s,a,d){var h=a&C,m=Ys(s);function v(){var w=this&&this!==lt&&this instanceof v?m:s;return w.apply(h?d:this,arguments)}return v}function Om(s){return function(a){a=Me(a);var d=jo(a)?Gn(a):t,h=d?d[0]:a.charAt(0),m=d?gr(d,1).join(""):a.slice(1);return h[s]()+m}}function Qo(s){return function(a){return Vd(kg(Mg(a).replace(pb,"")),s,"")}}function Ys(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var d=Ko(s.prototype),h=s.apply(d,a);return $e(h)?h:d}}function xC(s,a,d){var h=Ys(s);function m(){for(var v=arguments.length,w=O(v),x=v,S=Zo(m);x--;)w[x]=arguments[x];var P=v<3&&w[0]!==S&&w[v-1]!==S?[]:dr(w,S);if(v-=P.length,v<d)return Rm(s,a,Cl,m.placeholder,t,w,P,t,t,d-v);var F=this&&this!==lt&&this instanceof m?h:s;return ln(F,this,w)}return m}function Im(s){return function(a,d,h){var m=Pe(a);if(!Jt(a)){var v=Z(d,3);a=ct(a),d=function(x){return v(m[x],x,m)}}var w=s(a,d,h);return w>-1?m[v?a[w]:w]:t}}function Am(s){return Ni(function(a){var d=a.length,h=d,m=Sn.prototype.thru;for(s&&a.reverse();h--;){var v=a[h];if(typeof v!="function")throw new Tn(r);if(m&&!w&&Dl(v)=="wrapper")var w=new Sn([],!0)}for(h=w?h:d;++h<d;){v=a[h];var x=Dl(v),S=x=="wrapper"?vu(v):t;S&&Cu(S[0])&&S[1]==(ae|V|ue|ne)&&!S[4].length&&S[9]==1?w=w[Dl(S[0])].apply(w,S[3]):w=v.length==1&&Cu(v)?w[x]():w.thru(v)}return function(){var P=arguments,F=P[0];if(w&&P.length==1&&de(F))return w.plant(F).value();for(var B=0,H=d?a[B].apply(this,P):F;++B<d;)H=a[B].call(this,H);return H}})}function Cl(s,a,d,h,m,v,w,x,S,P){var F=a&ae,B=a&C,H=a&M,U=a&(V|se),X=a&Se,he=H?t:Ys(s);function ee(){for(var ge=arguments.length,ve=O(ge),pn=ge;pn--;)ve[pn]=arguments[pn];if(U)var Bt=Zo(ee),hn=Rb(ve,Bt);if(h&&(ve=Dm(ve,h,m,U)),v&&(ve=Mm(ve,v,w,U)),ge-=hn,U&&ge<P){var Qe=dr(ve,Bt);return Rm(s,a,Cl,ee.placeholder,d,ve,Qe,x,S,P-ge)}var Un=B?d:this,Bi=H?Un[s]:s;return ge=ve.length,x?ve=GC(ve,x):X&&ge>1&&ve.reverse(),F&&S<ge&&(ve.length=S),this&&this!==lt&&this instanceof ee&&(Bi=he||Ys(Bi)),Bi.apply(Un,ve)}return ee}function Nm(s,a){return function(d,h){return Qw(d,s,a(h),{})}}function xl(s,a){return function(d,h){var m;if(d===t&&h===t)return a;if(d!==t&&(m=d),h!==t){if(m===t)return h;typeof d=="string"||typeof h=="string"?(d=dn(d),h=dn(h)):(d=vm(d),h=vm(h)),m=s(d,h)}return m}}function fu(s){return Ni(function(a){return a=Le(a,cn(Z())),fe(function(d){var h=this;return s(a,function(m){return ln(m,h,d)})})})}function Tl(s,a){a=a===t?" ":dn(a);var d=a.length;if(d<2)return d?au(a,s):a;var h=au(a,dl(s/$o(a)));return jo(a)?gr(Gn(h),0,s).join(""):h.slice(0,s)}function TC(s,a,d,h){var m=a&C,v=Ys(s);function w(){for(var x=-1,S=arguments.length,P=-1,F=h.length,B=O(F+S),H=this&&this!==lt&&this instanceof w?v:s;++P<F;)B[P]=h[P];for(;S--;)B[P++]=arguments[++x];return ln(H,m?d:this,B)}return w}function Pm(s){return function(a,d,h){return h&&typeof h!="number"&&Ft(a,d,h)&&(d=h=t),a=Fi(a),d===t?(d=a,a=0):d=Fi(d),h=h===t?a<d?1:-1:Fi(h),cC(a,d,h,s)}}function Sl(s){return function(a,d){return typeof a=="string"&&typeof d=="string"||(a=En(a),d=En(d)),s(a,d)}}function Rm(s,a,d,h,m,v,w,x,S,P){var F=a&V,B=F?w:t,H=F?t:w,U=F?v:t,X=F?t:v;a|=F?ue:Q,a&=~(F?Q:ue),a&A||(a&=~(C|M));var he=[s,a,m,U,B,X,H,x,S,P],ee=d.apply(t,he);return Cu(s)&&qm(ee,he),ee.placeholder=h,Jm(ee,s,a)}function mu(s){var a=et[s];return function(d,h){if(d=En(d),h=h==null?0:St(pe(h),292),h&&Jf(d)){var m=(Me(d)+"e").split("e"),v=a(m[0]+"e"+(+m[1]+h));return m=(Me(v)+"e").split("e"),+(m[0]+"e"+(+m[1]-h))}return a(d)}}var SC=qo&&1/el(new qo([,-0]))[1]==Pt?function(s){return new qo(s)}:Bu;function Fm(s){return function(a){var d=Dt(a);return d==on?$d(a):d==sn?Wb(a):Pb(a,s(a))}}function Ai(s,a,d,h,m,v,w,x){var S=a&M;if(!S&&typeof s!="function")throw new Tn(r);var P=h?h.length:0;if(P||(a&=~(ue|Q),h=m=t),w=w===t?w:tt(pe(w),0),x=x===t?x:pe(x),P-=m?m.length:0,a&Q){var F=h,B=m;h=m=t}var H=S?t:vu(s),U=[s,a,d,h,m,F,B,v,w,x];if(H&&HC(U,H),s=U[0],a=U[1],d=U[2],h=U[3],m=U[4],x=U[9]=U[9]===t?S?0:s.length:tt(U[9]-P,0),!x&&a&(V|se)&&(a&=~(V|se)),!a||a==C)var X=CC(s,a,d);else a==V||a==se?X=xC(s,a,x):(a==ue||a==(C|ue))&&!m.length?X=TC(s,a,d,h):X=Cl.apply(t,U);var he=H?gm:qm;return Jm(he(X,U),s,a)}function Bm(s,a,d,h){return s===t||$n(s,Uo[d])&&!Ie.call(h,d)?a:s}function Vm(s,a,d,h,m,v){return $e(s)&&$e(a)&&(v.set(a,s),vl(s,a,t,Vm,v),v.delete(a)),s}function DC(s){return Xs(s)?t:s}function Lm(s,a,d,h,m,v){var w=d&y,x=s.length,S=a.length;if(x!=S&&!(w&&S>x))return!1;var P=v.get(s),F=v.get(a);if(P&&F)return P==a&&F==s;var B=-1,H=!0,U=d&b?new jr:t;for(v.set(s,a),v.set(a,s);++B<x;){var X=s[B],he=a[B];if(h)var ee=w?h(he,X,B,a,s,v):h(X,he,B,s,a,v);if(ee!==t){if(ee)continue;H=!1;break}if(U){if(!Ld(a,function(ge,ve){if(!Ls(U,ve)&&(X===ge||m(X,ge,d,h,v)))return U.push(ve)})){H=!1;break}}else if(!(X===he||m(X,he,d,h,v))){H=!1;break}}return v.delete(s),v.delete(a),H}function MC(s,a,d,h,m,v,w){switch(d){case ki:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case ar:return!(s.byteLength!=a.byteLength||!v(new sl(s),new sl(a)));case zn:case ri:case or:return $n(+s,+a);case rr:return s.name==a.name&&s.message==a.message;case Hr:case an:return s==a+"";case on:var x=$d;case sn:var S=h&y;if(x||(x=el),s.size!=a.size&&!S)return!1;var P=w.get(s);if(P)return P==a;h|=b,w.set(s,a);var F=Lm(x(s),x(a),h,m,v,w);return w.delete(s),F;case Mi:if(js)return js.call(s)==js.call(a)}return!1}function kC(s,a,d,h,m,v){var w=d&y,x=gu(s),S=x.length,P=gu(a),F=P.length;if(S!=F&&!w)return!1;for(var B=S;B--;){var H=x[B];if(!(w?H in a:Ie.call(a,H)))return!1}var U=v.get(s),X=v.get(a);if(U&&X)return U==a&&X==s;var he=!0;v.set(s,a),v.set(a,s);for(var ee=w;++B<S;){H=x[B];var ge=s[H],ve=a[H];if(h)var pn=w?h(ve,ge,H,a,s,v):h(ge,ve,H,s,a,v);if(!(pn===t?ge===ve||m(ge,ve,d,h,v):pn)){he=!1;break}ee||(ee=H=="constructor")}if(he&&!ee){var Bt=s.constructor,hn=a.constructor;Bt!=hn&&"constructor"in s&&"constructor"in a&&!(typeof Bt=="function"&&Bt instanceof Bt&&typeof hn=="function"&&hn instanceof hn)&&(he=!1)}return v.delete(s),v.delete(a),he}function Ni(s){return Tu($m(s,t,eg),s+"")}function gu(s){return om(s,ct,bu)}function _u(s){return om(s,Kt,Hm)}var vu=pl?function(s){return pl.get(s)}:Bu;function Dl(s){for(var a=s.name+"",d=Jo[a],h=Ie.call(Jo,a)?d.length:0;h--;){var m=d[h],v=m.func;if(v==null||v==s)return m.name}return a}function Zo(s){var a=Ie.call(_,"placeholder")?_:s;return a.placeholder}function Z(){var s=_.iteratee||Ru;return s=s===Ru?lm:s,arguments.length?s(arguments[0],arguments[1]):s}function Ml(s,a){var d=s.__data__;return FC(a)?d[typeof a=="string"?"string":"hash"]:d.map}function yu(s){for(var a=ct(s),d=a.length;d--;){var h=a[d],m=s[h];a[d]=[h,m,Gm(m)]}return a}function qr(s,a){var d=Lb(s,a);return am(d)?d:t}function EC(s){var a=Ie.call(s,Wr),d=s[Wr];try{s[Wr]=t;var h=!0}catch{}var m=rl.call(s);return h&&(a?s[Wr]=d:delete s[Wr]),m}var bu=qd?function(s){return s==null?[]:(s=Pe(s),lr(qd(s),function(a){return Uf.call(s,a)}))}:Vu,Hm=qd?function(s){for(var a=[];s;)cr(a,bu(s)),s=al(s);return a}:Vu,Dt=Rt;(Jd&&Dt(new Jd(new ArrayBuffer(1)))!=ki||zs&&Dt(new zs)!=on||Kd&&Dt(Kd.resolve())!=Bs||qo&&Dt(new qo)!=sn||Ws&&Dt(new Ws)!=sr)&&(Dt=function(s){var a=Rt(s),d=a==Wn?s.constructor:t,h=d?Jr(d):"";if(h)switch(h){case uw:return ki;case pw:return on;case hw:return Bs;case fw:return sn;case mw:return sr}return a});function OC(s,a,d){for(var h=-1,m=d.length;++h<m;){var v=d[h],w=v.size;switch(v.type){case"drop":s+=w;break;case"dropRight":a-=w;break;case"take":a=St(a,s+w);break;case"takeRight":s=tt(s,a-w);break}}return{start:s,end:a}}function IC(s){var a=s.match(By);return a?a[1].split(Vy):[]}function zm(s,a,d){a=mr(a,s);for(var h=-1,m=a.length,v=!1;++h<m;){var w=ai(a[h]);if(!(v=s!=null&&d(s,w)))break;s=s[w]}return v||++h!=m?v:(m=s==null?0:s.length,!!m&&Pl(m)&&Pi(w,m)&&(de(s)||Kr(s)))}function AC(s){var a=s.length,d=new s.constructor(a);return a&&typeof s[0]=="string"&&Ie.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function Wm(s){return typeof s.constructor=="function"&&!Qs(s)?Ko(al(s)):{}}function NC(s,a,d){var h=s.constructor;switch(a){case ar:return hu(s);case zn:case ri:return new h(+s);case ki:return gC(s,d);case Ho:case zo:case wd:case Cd:case xd:case Td:case Sd:case Dd:case Md:return Tm(s,d);case on:return new h;case or:case an:return new h(s);case Hr:return _C(s);case sn:return new h;case Mi:return vC(s)}}function PC(s,a){var d=a.length;if(!d)return s;var h=d-1;return a[h]=(d>1?"& ":"")+a[h],a=a.join(d>2?", ":" "),s.replace(Fy,`{
/* [wrapped with `+a+`] */
`)}function RC(s){return de(s)||Kr(s)||!!(qf&&s&&s[qf])}function Pi(s,a){var d=typeof s;return a=a??qe,!!a&&(d=="number"||d!="symbol"&&qy.test(s))&&s>-1&&s%1==0&&s<a}function Ft(s,a,d){if(!$e(d))return!1;var h=typeof a;return(h=="number"?Jt(d)&&Pi(a,d.length):h=="string"&&a in d)?$n(d[a],s):!1}function wu(s,a){if(de(s))return!1;var d=typeof s;return d=="number"||d=="symbol"||d=="boolean"||s==null||un(s)?!0:Ay.test(s)||!Iy.test(s)||a!=null&&s in Pe(a)}function FC(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function Cu(s){var a=Dl(s),d=_[a];if(typeof d!="function"||!(a in _e.prototype))return!1;if(s===d)return!0;var h=vu(d);return!!h&&s===h[0]}function BC(s){return!!Gf&&Gf in s}var VC=nl?Ri:Lu;function Qs(s){var a=s&&s.constructor,d=typeof a=="function"&&a.prototype||Uo;return s===d}function Gm(s){return s===s&&!$e(s)}function jm(s,a){return function(d){return d==null?!1:d[s]===a&&(a!==t||s in Pe(d))}}function LC(s){var a=Al(s,function(h){return d.size===c&&d.clear(),h}),d=a.cache;return a}function HC(s,a){var d=s[1],h=a[1],m=d|h,v=m<(C|M|ae),w=h==ae&&d==V||h==ae&&d==ne&&s[7].length<=a[8]||h==(ae|ne)&&a[7].length<=a[8]&&d==V;if(!(v||w))return s;h&C&&(s[2]=a[2],m|=d&C?0:A);var x=a[3];if(x){var S=s[3];s[3]=S?Dm(S,x,a[4]):x,s[4]=S?dr(s[3],u):a[4]}return x=a[5],x&&(S=s[5],s[5]=S?Mm(S,x,a[6]):x,s[6]=S?dr(s[5],u):a[6]),x=a[7],x&&(s[7]=x),h&ae&&(s[8]=s[8]==null?a[8]:St(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=m,s}function zC(s){var a=[];if(s!=null)for(var d in Pe(s))a.push(d);return a}function WC(s){return rl.call(s)}function $m(s,a,d){return a=tt(a===t?s.length-1:a,0),function(){for(var h=arguments,m=-1,v=tt(h.length-a,0),w=O(v);++m<v;)w[m]=h[a+m];m=-1;for(var x=O(a+1);++m<a;)x[m]=h[m];return x[a]=d(w),ln(s,this,x)}}function Um(s,a){return a.length<2?s:Ur(s,Mn(a,0,-1))}function GC(s,a){for(var d=s.length,h=St(a.length,d),m=qt(s);h--;){var v=a[h];s[h]=Pi(v,d)?m[v]:t}return s}function xu(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var qm=Km(gm),Zs=rw||function(s,a){return lt.setTimeout(s,a)},Tu=Km(pC);function Jm(s,a,d){var h=a+"";return Tu(s,PC(h,jC(IC(h),d)))}function Km(s){var a=0,d=0;return function(){var h=lw(),m=je-(h-d);if(d=h,m>0){if(++a>=De)return arguments[0]}else a=0;return s.apply(t,arguments)}}function kl(s,a){var d=-1,h=s.length,m=h-1;for(a=a===t?h:a;++d<a;){var v=su(d,m),w=s[v];s[v]=s[d],s[d]=w}return s.length=a,s}var Ym=LC(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Ny,function(d,h,m,v){a.push(m?v.replace(zy,"$1"):h||d)}),a});function ai(s){if(typeof s=="string"||un(s))return s;var a=s+"";return a=="0"&&1/s==-Pt?"-0":a}function Jr(s){if(s!=null){try{return il.call(s)}catch{}try{return s+""}catch{}}return""}function jC(s,a){return xn(Lr,function(d){var h="_."+d[0];a&d[1]&&!Za(s,h)&&s.push(h)}),s.sort()}function Qm(s){if(s instanceof _e)return s.clone();var a=new Sn(s.__wrapped__,s.__chain__);return a.__actions__=qt(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function $C(s,a,d){(d?Ft(s,a,d):a===t)?a=1:a=tt(pe(a),0);var h=s==null?0:s.length;if(!h||a<1)return[];for(var m=0,v=0,w=O(dl(h/a));m<h;)w[v++]=Mn(s,m,m+=a);return w}function UC(s){for(var a=-1,d=s==null?0:s.length,h=0,m=[];++a<d;){var v=s[a];v&&(m[h++]=v)}return m}function qC(){var s=arguments.length;if(!s)return[];for(var a=O(s-1),d=arguments[0],h=s;h--;)a[h-1]=arguments[h];return cr(de(d)?qt(d):[d],gt(a,1))}var JC=fe(function(s,a){return Ye(s)?Us(s,gt(a,1,Ye,!0)):[]}),KC=fe(function(s,a){var d=kn(a);return Ye(d)&&(d=t),Ye(s)?Us(s,gt(a,1,Ye,!0),Z(d,2)):[]}),YC=fe(function(s,a){var d=kn(a);return Ye(d)&&(d=t),Ye(s)?Us(s,gt(a,1,Ye,!0),t,d):[]});function QC(s,a,d){var h=s==null?0:s.length;return h?(a=d||a===t?1:pe(a),Mn(s,a<0?0:a,h)):[]}function ZC(s,a,d){var h=s==null?0:s.length;return h?(a=d||a===t?1:pe(a),a=h-a,Mn(s,0,a<0?0:a)):[]}function XC(s,a){return s&&s.length?bl(s,Z(a,3),!0,!0):[]}function ex(s,a){return s&&s.length?bl(s,Z(a,3),!0):[]}function tx(s,a,d,h){var m=s==null?0:s.length;return m?(d&&typeof d!="number"&&Ft(s,a,d)&&(d=0,h=m),qw(s,a,d,h)):[]}function Zm(s,a,d){var h=s==null?0:s.length;if(!h)return-1;var m=d==null?0:pe(d);return m<0&&(m=tt(h+m,0)),Xa(s,Z(a,3),m)}function Xm(s,a,d){var h=s==null?0:s.length;if(!h)return-1;var m=h-1;return d!==t&&(m=pe(d),m=d<0?tt(h+m,0):St(m,h-1)),Xa(s,Z(a,3),m,!0)}function eg(s){var a=s==null?0:s.length;return a?gt(s,1):[]}function nx(s){var a=s==null?0:s.length;return a?gt(s,Pt):[]}function ix(s,a){var d=s==null?0:s.length;return d?(a=a===t?1:pe(a),gt(s,a)):[]}function rx(s){for(var a=-1,d=s==null?0:s.length,h={};++a<d;){var m=s[a];h[m[0]]=m[1]}return h}function tg(s){return s&&s.length?s[0]:t}function ox(s,a,d){var h=s==null?0:s.length;if(!h)return-1;var m=d==null?0:pe(d);return m<0&&(m=tt(h+m,0)),Go(s,a,m)}function sx(s){var a=s==null?0:s.length;return a?Mn(s,0,-1):[]}var ax=fe(function(s){var a=Le(s,uu);return a.length&&a[0]===s[0]?tu(a):[]}),lx=fe(function(s){var a=kn(s),d=Le(s,uu);return a===kn(d)?a=t:d.pop(),d.length&&d[0]===s[0]?tu(d,Z(a,2)):[]}),cx=fe(function(s){var a=kn(s),d=Le(s,uu);return a=typeof a=="function"?a:t,a&&d.pop(),d.length&&d[0]===s[0]?tu(d,t,a):[]});function dx(s,a){return s==null?"":sw.call(s,a)}function kn(s){var a=s==null?0:s.length;return a?s[a-1]:t}function ux(s,a,d){var h=s==null?0:s.length;if(!h)return-1;var m=h;return d!==t&&(m=pe(d),m=m<0?tt(h+m,0):St(m,h-1)),a===a?jb(s,a,m):Xa(s,Rf,m,!0)}function px(s,a){return s&&s.length?pm(s,pe(a)):t}var hx=fe(ng);function ng(s,a){return s&&s.length&&a&&a.length?ou(s,a):s}function fx(s,a,d){return s&&s.length&&a&&a.length?ou(s,a,Z(d,2)):s}function mx(s,a,d){return s&&s.length&&a&&a.length?ou(s,a,t,d):s}var gx=Ni(function(s,a){var d=s==null?0:s.length,h=Qd(s,a);return mm(s,Le(a,function(m){return Pi(m,d)?+m:m}).sort(Sm)),h});function _x(s,a){var d=[];if(!(s&&s.length))return d;var h=-1,m=[],v=s.length;for(a=Z(a,3);++h<v;){var w=s[h];a(w,h,s)&&(d.push(w),m.push(h))}return mm(s,m),d}function Su(s){return s==null?s:dw.call(s)}function vx(s,a,d){var h=s==null?0:s.length;return h?(d&&typeof d!="number"&&Ft(s,a,d)?(a=0,d=h):(a=a==null?0:pe(a),d=d===t?h:pe(d)),Mn(s,a,d)):[]}function yx(s,a){return yl(s,a)}function bx(s,a,d){return lu(s,a,Z(d,2))}function wx(s,a){var d=s==null?0:s.length;if(d){var h=yl(s,a);if(h<d&&$n(s[h],a))return h}return-1}function Cx(s,a){return yl(s,a,!0)}function xx(s,a,d){return lu(s,a,Z(d,2),!0)}function Tx(s,a){var d=s==null?0:s.length;if(d){var h=yl(s,a,!0)-1;if($n(s[h],a))return h}return-1}function Sx(s){return s&&s.length?_m(s):[]}function Dx(s,a){return s&&s.length?_m(s,Z(a,2)):[]}function Mx(s){var a=s==null?0:s.length;return a?Mn(s,1,a):[]}function kx(s,a,d){return s&&s.length?(a=d||a===t?1:pe(a),Mn(s,0,a<0?0:a)):[]}function Ex(s,a,d){var h=s==null?0:s.length;return h?(a=d||a===t?1:pe(a),a=h-a,Mn(s,a<0?0:a,h)):[]}function Ox(s,a){return s&&s.length?bl(s,Z(a,3),!1,!0):[]}function Ix(s,a){return s&&s.length?bl(s,Z(a,3)):[]}var Ax=fe(function(s){return fr(gt(s,1,Ye,!0))}),Nx=fe(function(s){var a=kn(s);return Ye(a)&&(a=t),fr(gt(s,1,Ye,!0),Z(a,2))}),Px=fe(function(s){var a=kn(s);return a=typeof a=="function"?a:t,fr(gt(s,1,Ye,!0),t,a)});function Rx(s){return s&&s.length?fr(s):[]}function Fx(s,a){return s&&s.length?fr(s,Z(a,2)):[]}function Bx(s,a){return a=typeof a=="function"?a:t,s&&s.length?fr(s,t,a):[]}function Du(s){if(!(s&&s.length))return[];var a=0;return s=lr(s,function(d){if(Ye(d))return a=tt(d.length,a),!0}),Gd(a,function(d){return Le(s,Hd(d))})}function ig(s,a){if(!(s&&s.length))return[];var d=Du(s);return a==null?d:Le(d,function(h){return ln(a,t,h)})}var Vx=fe(function(s,a){return Ye(s)?Us(s,a):[]}),Lx=fe(function(s){return du(lr(s,Ye))}),Hx=fe(function(s){var a=kn(s);return Ye(a)&&(a=t),du(lr(s,Ye),Z(a,2))}),zx=fe(function(s){var a=kn(s);return a=typeof a=="function"?a:t,du(lr(s,Ye),t,a)}),Wx=fe(Du);function Gx(s,a){return wm(s||[],a||[],$s)}function jx(s,a){return wm(s||[],a||[],Ks)}var $x=fe(function(s){var a=s.length,d=a>1?s[a-1]:t;return d=typeof d=="function"?(s.pop(),d):t,ig(s,d)});function rg(s){var a=_(s);return a.__chain__=!0,a}function Ux(s,a){return a(s),s}function El(s,a){return a(s)}var qx=Ni(function(s){var a=s.length,d=a?s[0]:0,h=this.__wrapped__,m=function(v){return Qd(v,s)};return a>1||this.__actions__.length||!(h instanceof _e)||!Pi(d)?this.thru(m):(h=h.slice(d,+d+(a?1:0)),h.__actions__.push({func:El,args:[m],thisArg:t}),new Sn(h,this.__chain__).thru(function(v){return a&&!v.length&&v.push(t),v}))});function Jx(){return rg(this)}function Kx(){return new Sn(this.value(),this.__chain__)}function Yx(){this.__values__===t&&(this.__values__=vg(this.value()));var s=this.__index__>=this.__values__.length,a=s?t:this.__values__[this.__index__++];return{done:s,value:a}}function Qx(){return this}function Zx(s){for(var a,d=this;d instanceof fl;){var h=Qm(d);h.__index__=0,h.__values__=t,a?m.__wrapped__=h:a=h;var m=h;d=d.__wrapped__}return m.__wrapped__=s,a}function Xx(){var s=this.__wrapped__;if(s instanceof _e){var a=s;return this.__actions__.length&&(a=new _e(this)),a=a.reverse(),a.__actions__.push({func:El,args:[Su],thisArg:t}),new Sn(a,this.__chain__)}return this.thru(Su)}function eT(){return bm(this.__wrapped__,this.__actions__)}var tT=wl(function(s,a,d){Ie.call(s,d)?++s[d]:Ii(s,d,1)});function nT(s,a,d){var h=de(s)?Nf:Uw;return d&&Ft(s,a,d)&&(a=t),h(s,Z(a,3))}function iT(s,a){var d=de(s)?lr:im;return d(s,Z(a,3))}var rT=Im(Zm),oT=Im(Xm);function sT(s,a){return gt(Ol(s,a),1)}function aT(s,a){return gt(Ol(s,a),Pt)}function lT(s,a,d){return d=d===t?1:pe(d),gt(Ol(s,a),d)}function og(s,a){var d=de(s)?xn:hr;return d(s,Z(a,3))}function sg(s,a){var d=de(s)?Mb:nm;return d(s,Z(a,3))}var cT=wl(function(s,a,d){Ie.call(s,d)?s[d].push(a):Ii(s,d,[a])});function dT(s,a,d,h){s=Jt(s)?s:es(s),d=d&&!h?pe(d):0;var m=s.length;return d<0&&(d=tt(m+d,0)),Rl(s)?d<=m&&s.indexOf(a,d)>-1:!!m&&Go(s,a,d)>-1}var uT=fe(function(s,a,d){var h=-1,m=typeof a=="function",v=Jt(s)?O(s.length):[];return hr(s,function(w){v[++h]=m?ln(a,w,d):qs(w,a,d)}),v}),pT=wl(function(s,a,d){Ii(s,d,a)});function Ol(s,a){var d=de(s)?Le:cm;return d(s,Z(a,3))}function hT(s,a,d,h){return s==null?[]:(de(a)||(a=a==null?[]:[a]),d=h?t:d,de(d)||(d=d==null?[]:[d]),hm(s,a,d))}var fT=wl(function(s,a,d){s[d?0:1].push(a)},function(){return[[],[]]});function mT(s,a,d){var h=de(s)?Vd:Bf,m=arguments.length<3;return h(s,Z(a,4),d,m,hr)}function gT(s,a,d){var h=de(s)?kb:Bf,m=arguments.length<3;return h(s,Z(a,4),d,m,nm)}function _T(s,a){var d=de(s)?lr:im;return d(s,Nl(Z(a,3)))}function vT(s){var a=de(s)?Zf:dC;return a(s)}function yT(s,a,d){(d?Ft(s,a,d):a===t)?a=1:a=pe(a);var h=de(s)?zw:uC;return h(s,a)}function bT(s){var a=de(s)?Ww:hC;return a(s)}function wT(s){if(s==null)return 0;if(Jt(s))return Rl(s)?$o(s):s.length;var a=Dt(s);return a==on||a==sn?s.size:iu(s).length}function CT(s,a,d){var h=de(s)?Ld:fC;return d&&Ft(s,a,d)&&(a=t),h(s,Z(a,3))}var xT=fe(function(s,a){if(s==null)return[];var d=a.length;return d>1&&Ft(s,a[0],a[1])?a=[]:d>2&&Ft(a[0],a[1],a[2])&&(a=[a[0]]),hm(s,gt(a,1),[])}),Il=iw||function(){return lt.Date.now()};function TT(s,a){if(typeof a!="function")throw new Tn(r);return s=pe(s),function(){if(--s<1)return a.apply(this,arguments)}}function ag(s,a,d){return a=d?t:a,a=s&&a==null?s.length:a,Ai(s,ae,t,t,t,t,a)}function lg(s,a){var d;if(typeof a!="function")throw new Tn(r);return s=pe(s),function(){return--s>0&&(d=a.apply(this,arguments)),s<=1&&(a=t),d}}var Mu=fe(function(s,a,d){var h=C;if(d.length){var m=dr(d,Zo(Mu));h|=ue}return Ai(s,h,a,d,m)}),cg=fe(function(s,a,d){var h=C|M;if(d.length){var m=dr(d,Zo(cg));h|=ue}return Ai(a,h,s,d,m)});function dg(s,a,d){a=d?t:a;var h=Ai(s,V,t,t,t,t,t,a);return h.placeholder=dg.placeholder,h}function ug(s,a,d){a=d?t:a;var h=Ai(s,se,t,t,t,t,t,a);return h.placeholder=ug.placeholder,h}function pg(s,a,d){var h,m,v,w,x,S,P=0,F=!1,B=!1,H=!0;if(typeof s!="function")throw new Tn(r);a=En(a)||0,$e(d)&&(F=!!d.leading,B="maxWait"in d,v=B?tt(En(d.maxWait)||0,a):v,H="trailing"in d?!!d.trailing:H);function U(Qe){var Un=h,Bi=m;return h=m=t,P=Qe,w=s.apply(Bi,Un),w}function X(Qe){return P=Qe,x=Zs(ge,a),F?U(Qe):w}function he(Qe){var Un=Qe-S,Bi=Qe-P,Ig=a-Un;return B?St(Ig,v-Bi):Ig}function ee(Qe){var Un=Qe-S,Bi=Qe-P;return S===t||Un>=a||Un<0||B&&Bi>=v}function ge(){var Qe=Il();if(ee(Qe))return ve(Qe);x=Zs(ge,he(Qe))}function ve(Qe){return x=t,H&&h?U(Qe):(h=m=t,w)}function pn(){x!==t&&Cm(x),P=0,h=S=m=x=t}function Bt(){return x===t?w:ve(Il())}function hn(){var Qe=Il(),Un=ee(Qe);if(h=arguments,m=this,S=Qe,Un){if(x===t)return X(S);if(B)return Cm(x),x=Zs(ge,a),U(S)}return x===t&&(x=Zs(ge,a)),w}return hn.cancel=pn,hn.flush=Bt,hn}var ST=fe(function(s,a){return tm(s,1,a)}),DT=fe(function(s,a,d){return tm(s,En(a)||0,d)});function MT(s){return Ai(s,Se)}function Al(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new Tn(r);var d=function(){var h=arguments,m=a?a.apply(this,h):h[0],v=d.cache;if(v.has(m))return v.get(m);var w=s.apply(this,h);return d.cache=v.set(m,w)||v,w};return d.cache=new(Al.Cache||Oi),d}Al.Cache=Oi;function Nl(s){if(typeof s!="function")throw new Tn(r);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function kT(s){return lg(2,s)}var ET=mC(function(s,a){a=a.length==1&&de(a[0])?Le(a[0],cn(Z())):Le(gt(a,1),cn(Z()));var d=a.length;return fe(function(h){for(var m=-1,v=St(h.length,d);++m<v;)h[m]=a[m].call(this,h[m]);return ln(s,this,h)})}),ku=fe(function(s,a){var d=dr(a,Zo(ku));return Ai(s,ue,t,a,d)}),hg=fe(function(s,a){var d=dr(a,Zo(hg));return Ai(s,Q,t,a,d)}),OT=Ni(function(s,a){return Ai(s,ne,t,t,t,a)});function IT(s,a){if(typeof s!="function")throw new Tn(r);return a=a===t?a:pe(a),fe(s,a)}function AT(s,a){if(typeof s!="function")throw new Tn(r);return a=a==null?0:tt(pe(a),0),fe(function(d){var h=d[a],m=gr(d,0,a);return h&&cr(m,h),ln(s,this,m)})}function NT(s,a,d){var h=!0,m=!0;if(typeof s!="function")throw new Tn(r);return $e(d)&&(h="leading"in d?!!d.leading:h,m="trailing"in d?!!d.trailing:m),pg(s,a,{leading:h,maxWait:a,trailing:m})}function PT(s){return ag(s,1)}function RT(s,a){return ku(pu(a),s)}function FT(){if(!arguments.length)return[];var s=arguments[0];return de(s)?s:[s]}function BT(s){return Dn(s,g)}function VT(s,a){return a=typeof a=="function"?a:t,Dn(s,g,a)}function LT(s){return Dn(s,p|g)}function HT(s,a){return a=typeof a=="function"?a:t,Dn(s,p|g,a)}function zT(s,a){return a==null||em(s,a,ct(a))}function $n(s,a){return s===a||s!==s&&a!==a}var WT=Sl(eu),GT=Sl(function(s,a){return s>=a}),Kr=sm(function(){return arguments}())?sm:function(s){return Je(s)&&Ie.call(s,"callee")&&!Uf.call(s,"callee")},de=O.isArray,jT=Mf?cn(Mf):Zw;function Jt(s){return s!=null&&Pl(s.length)&&!Ri(s)}function Ye(s){return Je(s)&&Jt(s)}function $T(s){return s===!0||s===!1||Je(s)&&Rt(s)==zn}var _r=ow||Lu,UT=kf?cn(kf):Xw;function qT(s){return Je(s)&&s.nodeType===1&&!Xs(s)}function JT(s){if(s==null)return!0;if(Jt(s)&&(de(s)||typeof s=="string"||typeof s.splice=="function"||_r(s)||Xo(s)||Kr(s)))return!s.length;var a=Dt(s);if(a==on||a==sn)return!s.size;if(Qs(s))return!iu(s).length;for(var d in s)if(Ie.call(s,d))return!1;return!0}function KT(s,a){return Js(s,a)}function YT(s,a,d){d=typeof d=="function"?d:t;var h=d?d(s,a):t;return h===t?Js(s,a,t,d):!!h}function Eu(s){if(!Je(s))return!1;var a=Rt(s);return a==rr||a==Di||typeof s.message=="string"&&typeof s.name=="string"&&!Xs(s)}function QT(s){return typeof s=="number"&&Jf(s)}function Ri(s){if(!$e(s))return!1;var a=Rt(s);return a==Vo||a==Lo||a==ii||a==qa}function fg(s){return typeof s=="number"&&s==pe(s)}function Pl(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=qe}function $e(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Je(s){return s!=null&&typeof s=="object"}var mg=Ef?cn(Ef):tC;function ZT(s,a){return s===a||nu(s,a,yu(a))}function XT(s,a,d){return d=typeof d=="function"?d:t,nu(s,a,yu(a),d)}function eS(s){return gg(s)&&s!=+s}function tS(s){if(VC(s))throw new ce(i);return am(s)}function nS(s){return s===null}function iS(s){return s==null}function gg(s){return typeof s=="number"||Je(s)&&Rt(s)==or}function Xs(s){if(!Je(s)||Rt(s)!=Wn)return!1;var a=al(s);if(a===null)return!0;var d=Ie.call(a,"constructor")&&a.constructor;return typeof d=="function"&&d instanceof d&&il.call(d)==Xb}var Ou=Of?cn(Of):nC;function rS(s){return fg(s)&&s>=-qe&&s<=qe}var _g=If?cn(If):iC;function Rl(s){return typeof s=="string"||!de(s)&&Je(s)&&Rt(s)==an}function un(s){return typeof s=="symbol"||Je(s)&&Rt(s)==Mi}var Xo=Af?cn(Af):rC;function oS(s){return s===t}function sS(s){return Je(s)&&Dt(s)==sr}function aS(s){return Je(s)&&Rt(s)==Vs}var lS=Sl(ru),cS=Sl(function(s,a){return s<=a});function vg(s){if(!s)return[];if(Jt(s))return Rl(s)?Gn(s):qt(s);if(Hs&&s[Hs])return zb(s[Hs]());var a=Dt(s),d=a==on?$d:a==sn?el:es;return d(s)}function Fi(s){if(!s)return s===0?s:0;if(s=En(s),s===Pt||s===-Pt){var a=s<0?-1:1;return a*rn}return s===s?s:0}function pe(s){var a=Fi(s),d=a%1;return a===a?d?a-d:a:0}function yg(s){return s?$r(pe(s),0,at):0}function En(s){if(typeof s=="number")return s;if(un(s))return Si;if($e(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=$e(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Vf(s);var d=jy.test(s);return d||Uy.test(s)?Tb(s.slice(2),d?2:8):Gy.test(s)?Si:+s}function bg(s){return si(s,Kt(s))}function dS(s){return s?$r(pe(s),-qe,qe):s===0?s:0}function Me(s){return s==null?"":dn(s)}var uS=Yo(function(s,a){if(Qs(a)||Jt(a)){si(a,ct(a),s);return}for(var d in a)Ie.call(a,d)&&$s(s,d,a[d])}),wg=Yo(function(s,a){si(a,Kt(a),s)}),Fl=Yo(function(s,a,d,h){si(a,Kt(a),s,h)}),pS=Yo(function(s,a,d,h){si(a,ct(a),s,h)}),hS=Ni(Qd);function fS(s,a){var d=Ko(s);return a==null?d:Xf(d,a)}var mS=fe(function(s,a){s=Pe(s);var d=-1,h=a.length,m=h>2?a[2]:t;for(m&&Ft(a[0],a[1],m)&&(h=1);++d<h;)for(var v=a[d],w=Kt(v),x=-1,S=w.length;++x<S;){var P=w[x],F=s[P];(F===t||$n(F,Uo[P])&&!Ie.call(s,P))&&(s[P]=v[P])}return s}),gS=fe(function(s){return s.push(t,Vm),ln(Cg,t,s)});function _S(s,a){return Pf(s,Z(a,3),oi)}function vS(s,a){return Pf(s,Z(a,3),Xd)}function yS(s,a){return s==null?s:Zd(s,Z(a,3),Kt)}function bS(s,a){return s==null?s:rm(s,Z(a,3),Kt)}function wS(s,a){return s&&oi(s,Z(a,3))}function CS(s,a){return s&&Xd(s,Z(a,3))}function xS(s){return s==null?[]:_l(s,ct(s))}function TS(s){return s==null?[]:_l(s,Kt(s))}function Iu(s,a,d){var h=s==null?t:Ur(s,a);return h===t?d:h}function SS(s,a){return s!=null&&zm(s,a,Jw)}function Au(s,a){return s!=null&&zm(s,a,Kw)}var DS=Nm(function(s,a,d){a!=null&&typeof a.toString!="function"&&(a=rl.call(a)),s[a]=d},Pu(Yt)),MS=Nm(function(s,a,d){a!=null&&typeof a.toString!="function"&&(a=rl.call(a)),Ie.call(s,a)?s[a].push(d):s[a]=[d]},Z),kS=fe(qs);function ct(s){return Jt(s)?Qf(s):iu(s)}function Kt(s){return Jt(s)?Qf(s,!0):oC(s)}function ES(s,a){var d={};return a=Z(a,3),oi(s,function(h,m,v){Ii(d,a(h,m,v),h)}),d}function OS(s,a){var d={};return a=Z(a,3),oi(s,function(h,m,v){Ii(d,m,a(h,m,v))}),d}var IS=Yo(function(s,a,d){vl(s,a,d)}),Cg=Yo(function(s,a,d,h){vl(s,a,d,h)}),AS=Ni(function(s,a){var d={};if(s==null)return d;var h=!1;a=Le(a,function(v){return v=mr(v,s),h||(h=v.length>1),v}),si(s,_u(s),d),h&&(d=Dn(d,p|f|g,DC));for(var m=a.length;m--;)cu(d,a[m]);return d});function NS(s,a){return xg(s,Nl(Z(a)))}var PS=Ni(function(s,a){return s==null?{}:aC(s,a)});function xg(s,a){if(s==null)return{};var d=Le(_u(s),function(h){return[h]});return a=Z(a),fm(s,d,function(h,m){return a(h,m[0])})}function RS(s,a,d){a=mr(a,s);var h=-1,m=a.length;for(m||(m=1,s=t);++h<m;){var v=s==null?t:s[ai(a[h])];v===t&&(h=m,v=d),s=Ri(v)?v.call(s):v}return s}function FS(s,a,d){return s==null?s:Ks(s,a,d)}function BS(s,a,d,h){return h=typeof h=="function"?h:t,s==null?s:Ks(s,a,d,h)}var Tg=Fm(ct),Sg=Fm(Kt);function VS(s,a,d){var h=de(s),m=h||_r(s)||Xo(s);if(a=Z(a,4),d==null){var v=s&&s.constructor;m?d=h?new v:[]:$e(s)?d=Ri(v)?Ko(al(s)):{}:d={}}return(m?xn:oi)(s,function(w,x,S){return a(d,w,x,S)}),d}function LS(s,a){return s==null?!0:cu(s,a)}function HS(s,a,d){return s==null?s:ym(s,a,pu(d))}function zS(s,a,d,h){return h=typeof h=="function"?h:t,s==null?s:ym(s,a,pu(d),h)}function es(s){return s==null?[]:jd(s,ct(s))}function WS(s){return s==null?[]:jd(s,Kt(s))}function GS(s,a,d){return d===t&&(d=a,a=t),d!==t&&(d=En(d),d=d===d?d:0),a!==t&&(a=En(a),a=a===a?a:0),$r(En(s),a,d)}function jS(s,a,d){return a=Fi(a),d===t?(d=a,a=0):d=Fi(d),s=En(s),Yw(s,a,d)}function $S(s,a,d){if(d&&typeof d!="boolean"&&Ft(s,a,d)&&(a=d=t),d===t&&(typeof a=="boolean"?(d=a,a=t):typeof s=="boolean"&&(d=s,s=t)),s===t&&a===t?(s=0,a=1):(s=Fi(s),a===t?(a=s,s=0):a=Fi(a)),s>a){var h=s;s=a,a=h}if(d||s%1||a%1){var m=Kf();return St(s+m*(a-s+xb("1e-"+((m+"").length-1))),a)}return su(s,a)}var US=Qo(function(s,a,d){return a=a.toLowerCase(),s+(d?Dg(a):a)});function Dg(s){return Nu(Me(s).toLowerCase())}function Mg(s){return s=Me(s),s&&s.replace(Jy,Fb).replace(hb,"")}function qS(s,a,d){s=Me(s),a=dn(a);var h=s.length;d=d===t?h:$r(pe(d),0,h);var m=d;return d-=a.length,d>=0&&s.slice(d,m)==a}function JS(s){return s=Me(s),s&&ky.test(s)?s.replace(rf,Bb):s}function KS(s){return s=Me(s),s&&Py.test(s)?s.replace(kd,"\\$&"):s}var YS=Qo(function(s,a,d){return s+(d?"-":"")+a.toLowerCase()}),QS=Qo(function(s,a,d){return s+(d?" ":"")+a.toLowerCase()}),ZS=Om("toLowerCase");function XS(s,a,d){s=Me(s),a=pe(a);var h=a?$o(s):0;if(!a||h>=a)return s;var m=(a-h)/2;return Tl(ul(m),d)+s+Tl(dl(m),d)}function eD(s,a,d){s=Me(s),a=pe(a);var h=a?$o(s):0;return a&&h<a?s+Tl(a-h,d):s}function tD(s,a,d){s=Me(s),a=pe(a);var h=a?$o(s):0;return a&&h<a?Tl(a-h,d)+s:s}function nD(s,a,d){return d||a==null?a=0:a&&(a=+a),cw(Me(s).replace(Ed,""),a||0)}function iD(s,a,d){return(d?Ft(s,a,d):a===t)?a=1:a=pe(a),au(Me(s),a)}function rD(){var s=arguments,a=Me(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var oD=Qo(function(s,a,d){return s+(d?"_":"")+a.toLowerCase()});function sD(s,a,d){return d&&typeof d!="number"&&Ft(s,a,d)&&(a=d=t),d=d===t?at:d>>>0,d?(s=Me(s),s&&(typeof a=="string"||a!=null&&!Ou(a))&&(a=dn(a),!a&&jo(s))?gr(Gn(s),0,d):s.split(a,d)):[]}var aD=Qo(function(s,a,d){return s+(d?" ":"")+Nu(a)});function lD(s,a,d){return s=Me(s),d=d==null?0:$r(pe(d),0,s.length),a=dn(a),s.slice(d,d+a.length)==a}function cD(s,a,d){var h=_.templateSettings;d&&Ft(s,a,d)&&(a=t),s=Me(s),a=Fl({},a,h,Bm);var m=Fl({},a.imports,h.imports,Bm),v=ct(m),w=jd(m,v),x,S,P=0,F=a.interpolate||Ka,B="__p += '",H=Ud((a.escape||Ka).source+"|"+F.source+"|"+(F===of?Wy:Ka).source+"|"+(a.evaluate||Ka).source+"|$","g"),U="//# sourceURL="+(Ie.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++vb+"]")+`
`;s.replace(H,function(ee,ge,ve,pn,Bt,hn){return ve||(ve=pn),B+=s.slice(P,hn).replace(Ky,Vb),ge&&(x=!0,B+=`' +
__e(`+ge+`) +
'`),Bt&&(S=!0,B+=`';
`+Bt+`;
__p += '`),ve&&(B+=`' +
((__t = (`+ve+`)) == null ? '' : __t) +
'`),P=hn+ee.length,ee}),B+=`';
`;var X=Ie.call(a,"variable")&&a.variable;if(!X)B=`with (obj) {
`+B+`
}
`;else if(Hy.test(X))throw new ce(o);B=(S?B.replace(Ty,""):B).replace(Sy,"$1").replace(Dy,"$1;"),B="function("+(X||"obj")+`) {
`+(X?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(x?", __e = _.escape":"")+(S?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var he=Eg(function(){return xe(v,U+"return "+B).apply(t,w)});if(he.source=B,Eu(he))throw he;return he}function dD(s){return Me(s).toLowerCase()}function uD(s){return Me(s).toUpperCase()}function pD(s,a,d){if(s=Me(s),s&&(d||a===t))return Vf(s);if(!s||!(a=dn(a)))return s;var h=Gn(s),m=Gn(a),v=Lf(h,m),w=Hf(h,m)+1;return gr(h,v,w).join("")}function hD(s,a,d){if(s=Me(s),s&&(d||a===t))return s.slice(0,Wf(s)+1);if(!s||!(a=dn(a)))return s;var h=Gn(s),m=Hf(h,Gn(a))+1;return gr(h,0,m).join("")}function fD(s,a,d){if(s=Me(s),s&&(d||a===t))return s.replace(Ed,"");if(!s||!(a=dn(a)))return s;var h=Gn(s),m=Lf(h,Gn(a));return gr(h,m).join("")}function mD(s,a){var d=Ve,h=Y;if($e(a)){var m="separator"in a?a.separator:m;d="length"in a?pe(a.length):d,h="omission"in a?dn(a.omission):h}s=Me(s);var v=s.length;if(jo(s)){var w=Gn(s);v=w.length}if(d>=v)return s;var x=d-$o(h);if(x<1)return h;var S=w?gr(w,0,x).join(""):s.slice(0,x);if(m===t)return S+h;if(w&&(x+=S.length-x),Ou(m)){if(s.slice(x).search(m)){var P,F=S;for(m.global||(m=Ud(m.source,Me(sf.exec(m))+"g")),m.lastIndex=0;P=m.exec(F);)var B=P.index;S=S.slice(0,B===t?x:B)}}else if(s.indexOf(dn(m),x)!=x){var H=S.lastIndexOf(m);H>-1&&(S=S.slice(0,H))}return S+h}function gD(s){return s=Me(s),s&&My.test(s)?s.replace(nf,$b):s}var _D=Qo(function(s,a,d){return s+(d?" ":"")+a.toUpperCase()}),Nu=Om("toUpperCase");function kg(s,a,d){return s=Me(s),a=d?t:a,a===t?Hb(s)?Jb(s):Ib(s):s.match(a)||[]}var Eg=fe(function(s,a){try{return ln(s,t,a)}catch(d){return Eu(d)?d:new ce(d)}}),vD=Ni(function(s,a){return xn(a,function(d){d=ai(d),Ii(s,d,Mu(s[d],s))}),s});function yD(s){var a=s==null?0:s.length,d=Z();return s=a?Le(s,function(h){if(typeof h[1]!="function")throw new Tn(r);return[d(h[0]),h[1]]}):[],fe(function(h){for(var m=-1;++m<a;){var v=s[m];if(ln(v[0],this,h))return ln(v[1],this,h)}})}function bD(s){return $w(Dn(s,p))}function Pu(s){return function(){return s}}function wD(s,a){return s==null||s!==s?a:s}var CD=Am(),xD=Am(!0);function Yt(s){return s}function Ru(s){return lm(typeof s=="function"?s:Dn(s,p))}function TD(s){return dm(Dn(s,p))}function SD(s,a){return um(s,Dn(a,p))}var DD=fe(function(s,a){return function(d){return qs(d,s,a)}}),MD=fe(function(s,a){return function(d){return qs(s,d,a)}});function Fu(s,a,d){var h=ct(a),m=_l(a,h);d==null&&!($e(a)&&(m.length||!h.length))&&(d=a,a=s,s=this,m=_l(a,ct(a)));var v=!($e(d)&&"chain"in d)||!!d.chain,w=Ri(s);return xn(m,function(x){var S=a[x];s[x]=S,w&&(s.prototype[x]=function(){var P=this.__chain__;if(v||P){var F=s(this.__wrapped__),B=F.__actions__=qt(this.__actions__);return B.push({func:S,args:arguments,thisArg:s}),F.__chain__=P,F}return S.apply(s,cr([this.value()],arguments))})}),s}function kD(){return lt._===this&&(lt._=ew),this}function Bu(){}function ED(s){return s=pe(s),fe(function(a){return pm(a,s)})}var OD=fu(Le),ID=fu(Nf),AD=fu(Ld);function Og(s){return wu(s)?Hd(ai(s)):lC(s)}function ND(s){return function(a){return s==null?t:Ur(s,a)}}var PD=Pm(),RD=Pm(!0);function Vu(){return[]}function Lu(){return!1}function FD(){return{}}function BD(){return""}function VD(){return!0}function LD(s,a){if(s=pe(s),s<1||s>qe)return[];var d=at,h=St(s,at);a=Z(a),s-=at;for(var m=Gd(h,a);++d<s;)a(d);return m}function HD(s){return de(s)?Le(s,ai):un(s)?[s]:qt(Ym(Me(s)))}function zD(s){var a=++Zb;return Me(s)+a}var WD=xl(function(s,a){return s+a},0),GD=mu("ceil"),jD=xl(function(s,a){return s/a},1),$D=mu("floor");function UD(s){return s&&s.length?gl(s,Yt,eu):t}function qD(s,a){return s&&s.length?gl(s,Z(a,2),eu):t}function JD(s){return Ff(s,Yt)}function KD(s,a){return Ff(s,Z(a,2))}function YD(s){return s&&s.length?gl(s,Yt,ru):t}function QD(s,a){return s&&s.length?gl(s,Z(a,2),ru):t}var ZD=xl(function(s,a){return s*a},1),XD=mu("round"),eM=xl(function(s,a){return s-a},0);function tM(s){return s&&s.length?Wd(s,Yt):0}function nM(s,a){return s&&s.length?Wd(s,Z(a,2)):0}return _.after=TT,_.ary=ag,_.assign=uS,_.assignIn=wg,_.assignInWith=Fl,_.assignWith=pS,_.at=hS,_.before=lg,_.bind=Mu,_.bindAll=vD,_.bindKey=cg,_.castArray=FT,_.chain=rg,_.chunk=$C,_.compact=UC,_.concat=qC,_.cond=yD,_.conforms=bD,_.constant=Pu,_.countBy=tT,_.create=fS,_.curry=dg,_.curryRight=ug,_.debounce=pg,_.defaults=mS,_.defaultsDeep=gS,_.defer=ST,_.delay=DT,_.difference=JC,_.differenceBy=KC,_.differenceWith=YC,_.drop=QC,_.dropRight=ZC,_.dropRightWhile=XC,_.dropWhile=ex,_.fill=tx,_.filter=iT,_.flatMap=sT,_.flatMapDeep=aT,_.flatMapDepth=lT,_.flatten=eg,_.flattenDeep=nx,_.flattenDepth=ix,_.flip=MT,_.flow=CD,_.flowRight=xD,_.fromPairs=rx,_.functions=xS,_.functionsIn=TS,_.groupBy=cT,_.initial=sx,_.intersection=ax,_.intersectionBy=lx,_.intersectionWith=cx,_.invert=DS,_.invertBy=MS,_.invokeMap=uT,_.iteratee=Ru,_.keyBy=pT,_.keys=ct,_.keysIn=Kt,_.map=Ol,_.mapKeys=ES,_.mapValues=OS,_.matches=TD,_.matchesProperty=SD,_.memoize=Al,_.merge=IS,_.mergeWith=Cg,_.method=DD,_.methodOf=MD,_.mixin=Fu,_.negate=Nl,_.nthArg=ED,_.omit=AS,_.omitBy=NS,_.once=kT,_.orderBy=hT,_.over=OD,_.overArgs=ET,_.overEvery=ID,_.overSome=AD,_.partial=ku,_.partialRight=hg,_.partition=fT,_.pick=PS,_.pickBy=xg,_.property=Og,_.propertyOf=ND,_.pull=hx,_.pullAll=ng,_.pullAllBy=fx,_.pullAllWith=mx,_.pullAt=gx,_.range=PD,_.rangeRight=RD,_.rearg=OT,_.reject=_T,_.remove=_x,_.rest=IT,_.reverse=Su,_.sampleSize=yT,_.set=FS,_.setWith=BS,_.shuffle=bT,_.slice=vx,_.sortBy=xT,_.sortedUniq=Sx,_.sortedUniqBy=Dx,_.split=sD,_.spread=AT,_.tail=Mx,_.take=kx,_.takeRight=Ex,_.takeRightWhile=Ox,_.takeWhile=Ix,_.tap=Ux,_.throttle=NT,_.thru=El,_.toArray=vg,_.toPairs=Tg,_.toPairsIn=Sg,_.toPath=HD,_.toPlainObject=bg,_.transform=VS,_.unary=PT,_.union=Ax,_.unionBy=Nx,_.unionWith=Px,_.uniq=Rx,_.uniqBy=Fx,_.uniqWith=Bx,_.unset=LS,_.unzip=Du,_.unzipWith=ig,_.update=HS,_.updateWith=zS,_.values=es,_.valuesIn=WS,_.without=Vx,_.words=kg,_.wrap=RT,_.xor=Lx,_.xorBy=Hx,_.xorWith=zx,_.zip=Wx,_.zipObject=Gx,_.zipObjectDeep=jx,_.zipWith=$x,_.entries=Tg,_.entriesIn=Sg,_.extend=wg,_.extendWith=Fl,Fu(_,_),_.add=WD,_.attempt=Eg,_.camelCase=US,_.capitalize=Dg,_.ceil=GD,_.clamp=GS,_.clone=BT,_.cloneDeep=LT,_.cloneDeepWith=HT,_.cloneWith=VT,_.conformsTo=zT,_.deburr=Mg,_.defaultTo=wD,_.divide=jD,_.endsWith=qS,_.eq=$n,_.escape=JS,_.escapeRegExp=KS,_.every=nT,_.find=rT,_.findIndex=Zm,_.findKey=_S,_.findLast=oT,_.findLastIndex=Xm,_.findLastKey=vS,_.floor=$D,_.forEach=og,_.forEachRight=sg,_.forIn=yS,_.forInRight=bS,_.forOwn=wS,_.forOwnRight=CS,_.get=Iu,_.gt=WT,_.gte=GT,_.has=SS,_.hasIn=Au,_.head=tg,_.identity=Yt,_.includes=dT,_.indexOf=ox,_.inRange=jS,_.invoke=kS,_.isArguments=Kr,_.isArray=de,_.isArrayBuffer=jT,_.isArrayLike=Jt,_.isArrayLikeObject=Ye,_.isBoolean=$T,_.isBuffer=_r,_.isDate=UT,_.isElement=qT,_.isEmpty=JT,_.isEqual=KT,_.isEqualWith=YT,_.isError=Eu,_.isFinite=QT,_.isFunction=Ri,_.isInteger=fg,_.isLength=Pl,_.isMap=mg,_.isMatch=ZT,_.isMatchWith=XT,_.isNaN=eS,_.isNative=tS,_.isNil=iS,_.isNull=nS,_.isNumber=gg,_.isObject=$e,_.isObjectLike=Je,_.isPlainObject=Xs,_.isRegExp=Ou,_.isSafeInteger=rS,_.isSet=_g,_.isString=Rl,_.isSymbol=un,_.isTypedArray=Xo,_.isUndefined=oS,_.isWeakMap=sS,_.isWeakSet=aS,_.join=dx,_.kebabCase=YS,_.last=kn,_.lastIndexOf=ux,_.lowerCase=QS,_.lowerFirst=ZS,_.lt=lS,_.lte=cS,_.max=UD,_.maxBy=qD,_.mean=JD,_.meanBy=KD,_.min=YD,_.minBy=QD,_.stubArray=Vu,_.stubFalse=Lu,_.stubObject=FD,_.stubString=BD,_.stubTrue=VD,_.multiply=ZD,_.nth=px,_.noConflict=kD,_.noop=Bu,_.now=Il,_.pad=XS,_.padEnd=eD,_.padStart=tD,_.parseInt=nD,_.random=$S,_.reduce=mT,_.reduceRight=gT,_.repeat=iD,_.replace=rD,_.result=RS,_.round=XD,_.runInContext=T,_.sample=vT,_.size=wT,_.snakeCase=oD,_.some=CT,_.sortedIndex=yx,_.sortedIndexBy=bx,_.sortedIndexOf=wx,_.sortedLastIndex=Cx,_.sortedLastIndexBy=xx,_.sortedLastIndexOf=Tx,_.startCase=aD,_.startsWith=lD,_.subtract=eM,_.sum=tM,_.sumBy=nM,_.template=cD,_.times=LD,_.toFinite=Fi,_.toInteger=pe,_.toLength=yg,_.toLower=dD,_.toNumber=En,_.toSafeInteger=dS,_.toString=Me,_.toUpper=uD,_.trim=pD,_.trimEnd=hD,_.trimStart=fD,_.truncate=mD,_.unescape=gD,_.uniqueId=zD,_.upperCase=_D,_.upperFirst=Nu,_.each=og,_.eachRight=sg,_.first=tg,Fu(_,function(){var s={};return oi(_,function(a,d){Ie.call(_.prototype,d)||(s[d]=a)}),s}(),{chain:!1}),_.VERSION=e,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){_[s].placeholder=_}),xn(["drop","take"],function(s,a){_e.prototype[s]=function(d){d=d===t?1:tt(pe(d),0);var h=this.__filtered__&&!a?new _e(this):this.clone();return h.__filtered__?h.__takeCount__=St(d,h.__takeCount__):h.__views__.push({size:St(d,at),type:s+(h.__dir__<0?"Right":"")}),h},_e.prototype[s+"Right"]=function(d){return this.reverse()[s](d).reverse()}}),xn(["filter","map","takeWhile"],function(s,a){var d=a+1,h=d==Tt||d==Ti;_e.prototype[s]=function(m){var v=this.clone();return v.__iteratees__.push({iteratee:Z(m,3),type:d}),v.__filtered__=v.__filtered__||h,v}}),xn(["head","last"],function(s,a){var d="take"+(a?"Right":"");_e.prototype[s]=function(){return this[d](1).value()[0]}}),xn(["initial","tail"],function(s,a){var d="drop"+(a?"":"Right");_e.prototype[s]=function(){return this.__filtered__?new _e(this):this[d](1)}}),_e.prototype.compact=function(){return this.filter(Yt)},_e.prototype.find=function(s){return this.filter(s).head()},_e.prototype.findLast=function(s){return this.reverse().find(s)},_e.prototype.invokeMap=fe(function(s,a){return typeof s=="function"?new _e(this):this.map(function(d){return qs(d,s,a)})}),_e.prototype.reject=function(s){return this.filter(Nl(Z(s)))},_e.prototype.slice=function(s,a){s=pe(s);var d=this;return d.__filtered__&&(s>0||a<0)?new _e(d):(s<0?d=d.takeRight(-s):s&&(d=d.drop(s)),a!==t&&(a=pe(a),d=a<0?d.dropRight(-a):d.take(a-s)),d)},_e.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},_e.prototype.toArray=function(){return this.take(at)},oi(_e.prototype,function(s,a){var d=/^(?:filter|find|map|reject)|While$/.test(a),h=/^(?:head|last)$/.test(a),m=_[h?"take"+(a=="last"?"Right":""):a],v=h||/^find/.test(a);m&&(_.prototype[a]=function(){var w=this.__wrapped__,x=h?[1]:arguments,S=w instanceof _e,P=x[0],F=S||de(w),B=function(ge){var ve=m.apply(_,cr([ge],x));return h&&H?ve[0]:ve};F&&d&&typeof P=="function"&&P.length!=1&&(S=F=!1);var H=this.__chain__,U=!!this.__actions__.length,X=v&&!H,he=S&&!U;if(!v&&F){w=he?w:new _e(this);var ee=s.apply(w,x);return ee.__actions__.push({func:El,args:[B],thisArg:t}),new Sn(ee,H)}return X&&he?s.apply(this,x):(ee=this.thru(B),X?h?ee.value()[0]:ee.value():ee)})}),xn(["pop","push","shift","sort","splice","unshift"],function(s){var a=tl[s],d=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",h=/^(?:pop|shift)$/.test(s);_.prototype[s]=function(){var m=arguments;if(h&&!this.__chain__){var v=this.value();return a.apply(de(v)?v:[],m)}return this[d](function(w){return a.apply(de(w)?w:[],m)})}}),oi(_e.prototype,function(s,a){var d=_[a];if(d){var h=d.name+"";Ie.call(Jo,h)||(Jo[h]=[]),Jo[h].push({name:a,func:d})}}),Jo[Cl(t,M).name]=[{name:"wrapper",func:t}],_e.prototype.clone=gw,_e.prototype.reverse=_w,_e.prototype.value=vw,_.prototype.at=qx,_.prototype.chain=Jx,_.prototype.commit=Kx,_.prototype.next=Yx,_.prototype.plant=Zx,_.prototype.reverse=Xx,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=eT,_.prototype.first=_.prototype.head,Hs&&(_.prototype[Hs]=Qx),_},ur=Kb();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(lt._=ur,define(function(){return ur})):zr?((zr.exports=ur)._=ur,Rd._=ur):lt._=ur}).call(Rs)});function Xl(t){t||(jg(Xl),t=j(jl));let e=new ts(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Ke(e))}var d0=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(K(ra),K(vt))},e.\u0275dir=ke({type:e});let t=e;return t})(),u0=(()=>{let e=class e extends d0{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ns(e)))(o||e)}})(),e.\u0275dir=ke({type:e,features:[mn]});let t=e;return t})(),Sr=new qn(""),rM={provide:Sr,useExisting:On(()=>Zu),multi:!0},Zu=(()=>{let e=class e extends u0{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ns(e)))(o||e)}})(),e.\u0275dir=ke({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&z("change",function(c){return o.onChange(c.target.checked)})("blur",function(){return o.onTouched()})},features:[gn([rM]),mn]});let t=e;return t})(),oM={provide:Sr,useExisting:On(()=>_n),multi:!0};function sM(){let t=Ju()?Ju().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var aM=new qn(""),_n=(()=>{let e=class e extends d0{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!sM())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(K(ra),K(vt),K(aM,8))},e.\u0275dir=ke({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&z("input",function(c){return o._handleInput(c.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(c){return o._compositionEnd(c.target.value)})},features:[gn([oM]),mn]});let t=e;return t})();function xr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function p0(t){return t!=null&&typeof t.length=="number"}var cs=new qn(""),cc=new qn(""),lM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Tr=class{static min(e){return cM(e)}static max(e){return dM(e)}static required(e){return h0(e)}static requiredTrue(e){return uM(e)}static email(e){return pM(e)}static minLength(e){return hM(e)}static maxLength(e){return fM(e)}static pattern(e){return mM(e)}static nullValidator(e){return tc(e)}static compose(e){return y0(e)}static composeAsync(e){return b0(e)}};function cM(t){return e=>{if(xr(e.value)||xr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function dM(t){return e=>{if(xr(e.value)||xr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function h0(t){return xr(t.value)?{required:!0}:null}function uM(t){return t.value===!0?null:{required:!0}}function pM(t){return xr(t.value)||lM.test(t.value)?null:{email:!0}}function hM(t){return e=>xr(e.value)||!p0(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function fM(t){return e=>p0(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function mM(t){if(!t)return tc;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(xr(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function tc(t){return null}function f0(t){return t!=null}function m0(t){return Zg(t)?Rg(t):t}function g0(t){let e={};return t.forEach(n=>{e=n!=null?Ae(Ae({},e),n):e}),Object.keys(e).length===0?null:e}function _0(t,e){return e.map(n=>n(t))}function gM(t){return!t.validate}function v0(t){return t.map(e=>gM(e)?e:n=>e.validate(n))}function y0(t){if(!t)return null;let e=t.filter(f0);return e.length==0?null:function(n){return g0(_0(n,e))}}function Xu(t){return t!=null?y0(v0(t)):null}function b0(t){if(!t)return null;let e=t.filter(f0);return e.length==0?null:function(n){let i=_0(n,e).map(m0);return Lg(i).pipe(Qt(g0))}}function ep(t){return t!=null?b0(v0(t)):null}function i0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function w0(t){return t._rawValidators}function C0(t){return t._rawAsyncValidators}function Qu(t){return t?Array.isArray(t)?t:[t]:[]}function nc(t,e){return Array.isArray(t)?t.includes(e):t===e}function r0(t,e){let n=Qu(e);return Qu(t).forEach(r=>{nc(n,r)||n.push(r)}),n}function o0(t,e){return Qu(e).filter(n=>!nc(t,n))}var ic=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ep(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Gi=class extends ic{get formDirective(){return null}get path(){return null}},to=class extends ic{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},rc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},_M={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_F=_t(Ae({},_M),{"[class.ng-submitted]":"isSubmitted"}),vn=(()=>{let e=class e extends rc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(K(to,2))},e.\u0275dir=ke({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Re("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[mn]});let t=e;return t})(),io=(()=>{let e=class e extends rc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(K(Gi,10))},e.\u0275dir=ke({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Re("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[mn]});let t=e;return t})();var aa="VALID",ec="INVALID",ls="PENDING",la="DISABLED";function x0(t){return(dc(t)?t.validators:t)||null}function vM(t){return Array.isArray(t)?Xu(t):t||null}function T0(t,e){return(dc(e)?e.asyncValidators:t)||null}function yM(t){return Array.isArray(t)?ep(t):t||null}function dc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function bM(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new na(1e3,"");if(!i[n])throw new na(1001,"")}function wM(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new na(1002,"")})}var oc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===aa}get invalid(){return this.status===ec}get pending(){return this.status==ls}get disabled(){return this.status===la}get enabled(){return this.status!==la}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(r0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(r0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(o0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(o0(e,this._rawAsyncValidators))}hasValidator(e){return nc(this._rawValidators,e)}hasAsyncValidator(e){return nc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ls,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=la,this.errors=null,this._forEachChild(i=>{i.disable(_t(Ae({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_t(Ae({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=aa,this._forEachChild(i=>{i.enable(_t(Ae({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_t(Ae({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aa||this.status===ls)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?la:aa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ls,this._hasOwnPendingAsyncValidator=!0;let n=m0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?la:this.errors?ec:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ls)?ls:this._anyControlsHaveStatus(ec)?ec:aa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yM(this._rawAsyncValidators)}},no=class extends oc{constructor(e,n,i){super(x0(n),T0(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){wM(this,!0,e),Object.keys(e).forEach(i=>{bM(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var da=new qn("CallSetDisabledState",{providedIn:"root",factory:()=>uc}),uc="always";function S0(t,e){return[...e.path,t]}function sc(t,e,n=uc){tp(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),xM(t,e),SM(t,e),TM(t,e),CM(t,e)}function s0(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),lc(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ac(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function CM(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function tp(t,e){let n=w0(t);e.validator!==null?t.setValidators(i0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=C0(t);e.asyncValidator!==null?t.setAsyncValidators(i0(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();ac(e._rawValidators,r),ac(e._rawAsyncValidators,r)}function lc(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=w0(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(l=>l!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=C0(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(l=>l!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return ac(e._rawValidators,i),ac(e._rawAsyncValidators,i),n}function xM(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&D0(t,e)})}function TM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&D0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function D0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SM(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function M0(t,e){t==null,tp(t,e)}function DM(t,e){return lc(t,e)}function k0(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function MM(t){return Object.getPrototypeOf(t.constructor)===u0}function E0(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function O0(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===_n?n=o:MM(o)?i=o:r=o}),r||i||n||null}function kM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var EM={provide:Gi,useExisting:On(()=>ua)},ca=Promise.resolve(),ua=(()=>{let e=class e extends Gi{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new He,this.form=new no({},Xu(i),ep(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){ca.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),sc(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){ca.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){ca.then(()=>{let r=this._findContainer(i.path),o=new no({});M0(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){ca.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){ca.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,E0(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(K(cs,10),K(cc,10),K(da,8))},e.\u0275dir=ke({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&z("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{options:[te.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([EM]),mn]});let t=e;return t})();function a0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function l0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ji=class extends oc{constructor(e=null,n,i){super(x0(n),T0(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(l0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){a0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){a0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){l0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OM=t=>t instanceof ji;var IM={provide:to,useExisting:On(()=>Qn)},c0=Promise.resolve(),Qn=(()=>{let e=class e extends to{constructor(i,r,o,l,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new ji,this._registered=!1,this.name="",this.update=new He,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=O0(this,l)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),k0(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){c0.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&qu(r);c0.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?S0(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(K(Gi,9),K(cs,10),K(cc,10),K(Sr,10),K(Zr,8),K(da,8))},e.\u0275dir=ke({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[te.None,"disabled","isDisabled"],model:[te.None,"ngModel","model"],options:[te.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gn([IM]),mn,In]});let t=e;return t})(),ro=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var I0=new qn("");var AM={provide:Gi,useExisting:On(()=>pc)},pc=(()=>{let e=class e extends Gi{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return sc(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){s0(i.control||null,i,!1),kM(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,E0(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,o=this.form.get(i.path);r!==o&&(s0(r||null,i),OM(o)&&(sc(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);M0(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&DM(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tp(this.form,this),this._oldForm&&lc(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(K(cs,10),K(cc,10),K(da,8))},e.\u0275dir=ke({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&z("submit",function(c){return o.onSubmit(c)})("reset",function(){return o.onReset()})},inputs:{form:[te.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([AM]),mn,In]});let t=e;return t})();var NM={provide:to,useExisting:On(()=>hc)},hc=(()=>{let e=class e extends to{set isDisabled(i){}constructor(i,r,o,l,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new He,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=O0(this,l)}ngOnChanges(i){this._added||this._setUpControl(),k0(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return S0(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(K(Gi,13),K(cs,10),K(cc,10),K(Sr,10),K(I0,8))},e.\u0275dir=ke({type:e,selectors:[["","formControlName",""]],inputs:{name:[te.None,"formControlName","name"],isDisabled:[te.None,"disabled","isDisabled"],model:[te.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[gn([NM]),mn,In]});let t=e;return t})();var PM=(()=>{let e=class e{constructor(){this._validator=tc}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):tc,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,features:[In]});let t=e;return t})();var RM={provide:cs,useExisting:On(()=>pa),multi:!0};var pa=(()=>{let e=class e extends PM{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=qu,this.createValidator=i=>h0}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ns(e)))(o||e)}})(),e.\u0275dir=ke({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&ze("required",o._enabled?"":null)},inputs:{required:"required"},features:[gn([RM]),mn]});let t=e;return t})();var A0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ci({type:e}),e.\u0275inj=li({});let t=e;return t})();var mi=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:da,useValue:i.callSetDisabledState??uc}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ci({type:e}),e.\u0275inj=li({imports:[A0]});let t=e;return t})(),N0=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:I0,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:da,useValue:i.callSetDisabledState??uc}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ci({type:e}),e.\u0275inj=li({imports:[A0]});let t=e;return t})();var Ze="top",yt="bottom",dt="right",ot="left",fc="auto",Dr=[Ze,yt,dt,ot],$i="start",oo="end",P0="clippingParents",mc="viewport",us="popper",R0="reference",np=Dr.reduce(function(t,e){return t.concat([e+"-"+$i,e+"-"+oo])},[]),gc=[].concat(Dr,[fc]).reduce(function(t,e){return t.concat([e,e+"-"+$i,e+"-"+oo])},[]),FM="beforeRead",BM="read",VM="afterRead",LM="beforeMain",HM="main",zM="afterMain",WM="beforeWrite",GM="write",jM="afterWrite",F0=[FM,BM,VM,LM,HM,zM,WM,GM,jM];function ut(t){return t?(t.nodeName||"").toLowerCase():null}function Ge(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function An(t){var e=Ge(t).Element;return t instanceof e||t instanceof Element}function st(t){var e=Ge(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ps(t){if(typeof ShadowRoot>"u")return!1;var e=Ge(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $M(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!st(o)||!ut(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var c=r[l];c===!1?o.removeAttribute(l):o.setAttribute(l,c===!0?"":c)}))})}function UM(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),c=l.reduce(function(u,p){return u[p]="",u},{});!st(r)||!ut(r)||(Object.assign(r.style,c),Object.keys(o).forEach(function(u){r.removeAttribute(u)}))})}}var B0={name:"applyStyles",enabled:!0,phase:"write",fn:$M,effect:UM,requires:["computeStyles"]};function pt(t){return t.split("-")[0]}var Zn=Math.max,so=Math.min,Ui=Math.round;function hs(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ha(){return!/^((?!chrome|android).)*safari/i.test(hs())}function Nn(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&st(t)&&(r=t.offsetWidth>0&&Ui(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ui(i.height)/t.offsetHeight||1);var l=An(t)?Ge(t):window,c=l.visualViewport,u=!ha()&&n,p=(i.left+(u&&c?c.offsetLeft:0))/r,f=(i.top+(u&&c?c.offsetTop:0))/o,g=i.width/r,y=i.height/o;return{width:g,height:y,top:f,right:p+g,bottom:f+y,left:p,x:p,y:f}}function ao(t){var e=Nn(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function fa(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ps(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function zt(t){return Ge(t).getComputedStyle(t)}function ip(t){return["table","td","th"].indexOf(ut(t))>=0}function bt(t){return((An(t)?t.ownerDocument:t.document)||window.document).documentElement}function qi(t){return ut(t)==="html"?t:t.assignedSlot||t.parentNode||(ps(t)?t.host:null)||bt(t)}function V0(t){return!st(t)||zt(t).position==="fixed"?null:t.offsetParent}function qM(t){var e=/firefox/i.test(hs()),n=/Trident/i.test(hs());if(n&&st(t)){var i=zt(t);if(i.position==="fixed")return null}var r=qi(t);for(ps(r)&&(r=r.host);st(r)&&["html","body"].indexOf(ut(r))<0;){var o=zt(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Xn(t){for(var e=Ge(t),n=V0(t);n&&ip(n)&&zt(n).position==="static";)n=V0(n);return n&&(ut(n)==="html"||ut(n)==="body"&&zt(n).position==="static")?e:n||qM(t)||e}function lo(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function co(t,e,n){return Zn(t,so(e,n))}function L0(t,e,n){var i=co(t,e,n);return i>n?n:i}function ma(){return{top:0,right:0,bottom:0,left:0}}function ga(t){return Object.assign({},ma(),t)}function _a(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var JM=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ga(typeof e!="number"?e:_a(e,Dr))};function KM(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,c=pt(n.placement),u=lo(c),p=[ot,dt].indexOf(c)>=0,f=p?"height":"width";if(!(!o||!l)){var g=JM(r.padding,n),y=ao(o),b=u==="y"?Ze:ot,C=u==="y"?yt:dt,M=n.rects.reference[f]+n.rects.reference[u]-l[u]-n.rects.popper[f],A=l[u]-n.rects.reference[u],V=Xn(o),se=V?u==="y"?V.clientHeight||0:V.clientWidth||0:0,ue=M/2-A/2,Q=g[b],ae=se-y[f]-g[C],ne=se/2-y[f]/2+ue,Se=co(Q,ne,ae),Ve=u;n.modifiersData[i]=(e={},e[Ve]=Se,e.centerOffset=Se-ne,e)}}function YM(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||fa(e.elements.popper,r)&&(e.elements.arrow=r))}var rp={name:"arrow",enabled:!0,phase:"main",fn:KM,effect:YM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pn(t){return t.split("-")[1]}var QM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZM(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Ui(n*r)/r||0,y:Ui(i*r)/r||0}}function H0(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,c=t.position,u=t.gpuAcceleration,p=t.adaptive,f=t.roundOffsets,g=t.isFixed,y=l.x,b=y===void 0?0:y,C=l.y,M=C===void 0?0:C,A=typeof f=="function"?f({x:b,y:M}):{x:b,y:M};b=A.x,M=A.y;var V=l.hasOwnProperty("x"),se=l.hasOwnProperty("y"),ue=ot,Q=Ze,ae=window;if(p){var ne=Xn(n),Se="clientHeight",Ve="clientWidth";if(ne===Ge(n)&&(ne=bt(n),zt(ne).position!=="static"&&c==="absolute"&&(Se="scrollHeight",Ve="scrollWidth")),ne=ne,r===Ze||(r===ot||r===dt)&&o===oo){Q=yt;var Y=g&&ne===ae&&ae.visualViewport?ae.visualViewport.height:ne[Se];M-=Y-i.height,M*=u?1:-1}if(r===ot||(r===Ze||r===yt)&&o===oo){ue=dt;var De=g&&ne===ae&&ae.visualViewport?ae.visualViewport.width:ne[Ve];b-=De-i.width,b*=u?1:-1}}var je=Object.assign({position:c},p&&QM),Tt=f===!0?ZM({x:b,y:M},Ge(n)):{x:b,y:M};if(b=Tt.x,M=Tt.y,u){var mt;return Object.assign({},je,(mt={},mt[Q]=se?"0":"",mt[ue]=V?"0":"",mt.transform=(ae.devicePixelRatio||1)<=1?"translate("+b+"px, "+M+"px)":"translate3d("+b+"px, "+M+"px, 0)",mt))}return Object.assign({},je,(e={},e[Q]=se?M+"px":"",e[ue]=V?b+"px":"",e.transform="",e))}function XM(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,c=n.roundOffsets,u=c===void 0?!0:c,p={placement:pt(e.placement),variation:Pn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,H0(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,H0(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var z0={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:XM,data:{}};var _c={passive:!0};function ek(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,c=l===void 0?!0:l,u=Ge(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&p.forEach(function(f){f.addEventListener("scroll",n.update,_c)}),c&&u.addEventListener("resize",n.update,_c),function(){o&&p.forEach(function(f){f.removeEventListener("scroll",n.update,_c)}),c&&u.removeEventListener("resize",n.update,_c)}}var W0={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ek,data:{}};var tk={left:"right",right:"left",bottom:"top",top:"bottom"};function fs(t){return t.replace(/left|right|bottom|top/g,function(e){return tk[e]})}var nk={start:"end",end:"start"};function vc(t){return t.replace(/start|end/g,function(e){return nk[e]})}function uo(t){var e=Ge(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function po(t){return Nn(bt(t)).left+uo(t).scrollLeft}function op(t,e){var n=Ge(t),i=bt(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,c=0,u=0;if(r){o=r.width,l=r.height;var p=ha();(p||!p&&e==="fixed")&&(c=r.offsetLeft,u=r.offsetTop)}return{width:o,height:l,x:c+po(t),y:u}}function sp(t){var e,n=bt(t),i=uo(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Zn(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Zn(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-i.scrollLeft+po(t),u=-i.scrollTop;return zt(r||n).direction==="rtl"&&(c+=Zn(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:c,y:u}}function ho(t){var e=zt(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function yc(t){return["html","body","#document"].indexOf(ut(t))>=0?t.ownerDocument.body:st(t)&&ho(t)?t:yc(qi(t))}function Mr(t,e){var n;e===void 0&&(e=[]);var i=yc(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=Ge(i),l=r?[o].concat(o.visualViewport||[],ho(i)?i:[]):i,c=e.concat(l);return r?c:c.concat(Mr(qi(l)))}function ms(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ik(t,e){var n=Nn(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function G0(t,e,n){return e===mc?ms(op(t,n)):An(e)?ik(e,n):ms(sp(bt(t)))}function rk(t){var e=Mr(qi(t)),n=["absolute","fixed"].indexOf(zt(t).position)>=0,i=n&&st(t)?Xn(t):t;return An(i)?e.filter(function(r){return An(r)&&fa(r,i)&&ut(r)!=="body"}):[]}function ap(t,e,n,i){var r=e==="clippingParents"?rk(t):[].concat(e),o=[].concat(r,[n]),l=o[0],c=o.reduce(function(u,p){var f=G0(t,p,i);return u.top=Zn(f.top,u.top),u.right=so(f.right,u.right),u.bottom=so(f.bottom,u.bottom),u.left=Zn(f.left,u.left),u},G0(t,l,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function va(t){var e=t.reference,n=t.element,i=t.placement,r=i?pt(i):null,o=i?Pn(i):null,l=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,u;switch(r){case Ze:u={x:l,y:e.y-n.height};break;case yt:u={x:l,y:e.y+e.height};break;case dt:u={x:e.x+e.width,y:c};break;case ot:u={x:e.x-n.width,y:c};break;default:u={x:e.x,y:e.y}}var p=r?lo(r):null;if(p!=null){var f=p==="y"?"height":"width";switch(o){case $i:u[p]=u[p]-(e[f]/2-n[f]/2);break;case oo:u[p]=u[p]+(e[f]/2-n[f]/2);break;default:}}return u}function kr(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,c=n.boundary,u=c===void 0?P0:c,p=n.rootBoundary,f=p===void 0?mc:p,g=n.elementContext,y=g===void 0?us:g,b=n.altBoundary,C=b===void 0?!1:b,M=n.padding,A=M===void 0?0:M,V=ga(typeof A!="number"?A:_a(A,Dr)),se=y===us?R0:us,ue=t.rects.popper,Q=t.elements[C?se:y],ae=ap(An(Q)?Q:Q.contextElement||bt(t.elements.popper),u,f,l),ne=Nn(t.elements.reference),Se=va({reference:ne,element:ue,strategy:"absolute",placement:r}),Ve=ms(Object.assign({},ue,Se)),Y=y===us?Ve:ne,De={top:ae.top-Y.top+V.top,bottom:Y.bottom-ae.bottom+V.bottom,left:ae.left-Y.left+V.left,right:Y.right-ae.right+V.right},je=t.modifiersData.offset;if(y===us&&je){var Tt=je[r];Object.keys(De).forEach(function(mt){var Ti=[dt,yt].indexOf(mt)>=0?1:-1,Pt=[Ze,yt].indexOf(mt)>=0?"y":"x";De[mt]+=Tt[Pt]*Ti})}return De}function lp(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,c=n.flipVariations,u=n.allowedAutoPlacements,p=u===void 0?gc:u,f=Pn(i),g=f?c?np:np.filter(function(C){return Pn(C)===f}):Dr,y=g.filter(function(C){return p.indexOf(C)>=0});y.length===0&&(y=g);var b=y.reduce(function(C,M){return C[M]=kr(t,{placement:M,boundary:r,rootBoundary:o,padding:l})[pt(M)],C},{});return Object.keys(b).sort(function(C,M){return b[C]-b[M]})}function ok(t){if(pt(t)===fc)return[];var e=fs(t);return[vc(t),e,vc(e)]}function sk(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,c=l===void 0?!0:l,u=n.fallbackPlacements,p=n.padding,f=n.boundary,g=n.rootBoundary,y=n.altBoundary,b=n.flipVariations,C=b===void 0?!0:b,M=n.allowedAutoPlacements,A=e.options.placement,V=pt(A),se=V===A,ue=u||(se||!C?[fs(A)]:ok(A)),Q=[A].concat(ue).reduce(function(Hn,ii){return Hn.concat(pt(ii)===fc?lp(e,{placement:ii,boundary:f,rootBoundary:g,padding:p,flipVariations:C,allowedAutoPlacements:M}):ii)},[]),ae=e.rects.reference,ne=e.rects.popper,Se=new Map,Ve=!0,Y=Q[0],De=0;De<Q.length;De++){var je=Q[De],Tt=pt(je),mt=Pn(je)===$i,Ti=[Ze,yt].indexOf(Tt)>=0,Pt=Ti?"width":"height",qe=kr(e,{placement:je,boundary:f,rootBoundary:g,altBoundary:y,padding:p}),rn=Ti?mt?dt:ot:mt?yt:Ze;ae[Pt]>ne[Pt]&&(rn=fs(rn));var Si=fs(rn),at=[];if(o&&at.push(qe[Tt]<=0),c&&at.push(qe[rn]<=0,qe[Si]<=0),at.every(function(Hn){return Hn})){Y=je,Ve=!1;break}Se.set(je,at)}if(Ve)for(var Bo=C?3:1,Fs=function(ii){var zn=Q.find(function(ri){var Di=Se.get(ri);if(Di)return Di.slice(0,ii).every(function(rr){return rr})});if(zn)return Y=zn,"break"},Lr=Bo;Lr>0;Lr--){var Ln=Fs(Lr);if(Ln==="break")break}e.placement!==Y&&(e.modifiersData[i]._skip=!0,e.placement=Y,e.reset=!0)}}var cp={name:"flip",enabled:!0,phase:"main",fn:sk,requiresIfExists:["offset"],data:{_skip:!1}};function ak(t,e,n){var i=pt(t),r=[ot,Ze].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],c=o[1];return l=l||0,c=(c||0)*r,[ot,dt].indexOf(i)>=0?{x:c,y:l}:{x:l,y:c}}function lk(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=gc.reduce(function(f,g){return f[g]=ak(g,e.rects,o),f},{}),c=l[e.placement],u=c.x,p=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=p),e.modifiersData[i]=l}var dp={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:lk};function ck(t){var e=t.state,n=t.name;e.modifiersData[n]=va({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var j0={name:"popperOffsets",enabled:!0,phase:"read",fn:ck,data:{}};function up(t){return t==="x"?"y":"x"}function dk(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,c=l===void 0?!1:l,u=n.boundary,p=n.rootBoundary,f=n.altBoundary,g=n.padding,y=n.tether,b=y===void 0?!0:y,C=n.tetherOffset,M=C===void 0?0:C,A=kr(e,{boundary:u,rootBoundary:p,padding:g,altBoundary:f}),V=pt(e.placement),se=Pn(e.placement),ue=!se,Q=lo(V),ae=up(Q),ne=e.modifiersData.popperOffsets,Se=e.rects.reference,Ve=e.rects.popper,Y=typeof M=="function"?M(Object.assign({},e.rects,{placement:e.placement})):M,De=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),je=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Tt={x:0,y:0};if(ne){if(o){var mt,Ti=Q==="y"?Ze:ot,Pt=Q==="y"?yt:dt,qe=Q==="y"?"height":"width",rn=ne[Q],Si=rn+A[Ti],at=rn-A[Pt],Bo=b?-Ve[qe]/2:0,Fs=se===$i?Se[qe]:Ve[qe],Lr=se===$i?-Ve[qe]:-Se[qe],Ln=e.elements.arrow,Hn=b&&Ln?ao(Ln):{width:0,height:0},ii=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ma(),zn=ii[Ti],ri=ii[Pt],Di=co(0,Se[qe],Hn[qe]),rr=ue?Se[qe]/2-Bo-Di-zn-De.mainAxis:Fs-Di-zn-De.mainAxis,Vo=ue?-Se[qe]/2+Bo+Di+ri+De.mainAxis:Lr+Di+ri+De.mainAxis,Lo=e.elements.arrow&&Xn(e.elements.arrow),on=Lo?Q==="y"?Lo.clientTop||0:Lo.clientLeft||0:0,or=(mt=je?.[Q])!=null?mt:0,bd=rn+rr-or-on,Wn=rn+Vo-or,Bs=co(b?so(Si,bd):Si,rn,b?Zn(at,Wn):at);ne[Q]=Bs,Tt[Q]=Bs-rn}if(c){var qa,Hr=Q==="x"?Ze:ot,sn=Q==="x"?yt:dt,an=ne[ae],Mi=ae==="y"?"height":"width",Ja=an+A[Hr],sr=an-A[sn],Vs=[Ze,ot].indexOf(V)!==-1,ar=(qa=je?.[ae])!=null?qa:0,ki=Vs?Ja:an-Se[Mi]-Ve[Mi]-ar+De.altAxis,Ho=Vs?an+Se[Mi]+Ve[Mi]-ar-De.altAxis:sr,zo=b&&Vs?L0(ki,an,Ho):co(b?ki:Ja,an,b?Ho:sr);ne[ae]=zo,Tt[ae]=zo-an}e.modifiersData[i]=Tt}}var pp={name:"preventOverflow",enabled:!0,phase:"main",fn:dk,requiresIfExists:["offset"]};function hp(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function fp(t){return t===Ge(t)||!st(t)?uo(t):hp(t)}function uk(t){var e=t.getBoundingClientRect(),n=Ui(e.width)/t.offsetWidth||1,i=Ui(e.height)/t.offsetHeight||1;return n!==1||i!==1}function mp(t,e,n){n===void 0&&(n=!1);var i=st(e),r=st(e)&&uk(e),o=bt(e),l=Nn(t,r,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(i||!i&&!n)&&((ut(e)!=="body"||ho(o))&&(c=fp(e)),st(e)?(u=Nn(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):o&&(u.x=po(o))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function pk(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(c){if(!n.has(c)){var u=e.get(c);u&&r(u)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function gp(t){var e=pk(t);return F0.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function _p(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function vp(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var $0={placement:"bottom",modifiers:[],strategy:"absolute"};function U0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function q0(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?$0:r;return function(c,u,p){p===void 0&&(p=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},$0,o),modifiersData:{},elements:{reference:c,popper:u},attributes:{},styles:{}},g=[],y=!1,b={state:f,setOptions:function(V){var se=typeof V=="function"?V(f.options):V;M(),f.options=Object.assign({},o,f.options,se),f.scrollParents={reference:An(c)?Mr(c):c.contextElement?Mr(c.contextElement):[],popper:Mr(u)};var ue=gp(vp([].concat(i,f.options.modifiers)));return f.orderedModifiers=ue.filter(function(Q){return Q.enabled}),C(),b.update()},forceUpdate:function(){if(!y){var V=f.elements,se=V.reference,ue=V.popper;if(U0(se,ue)){f.rects={reference:mp(se,Xn(ue),f.options.strategy==="fixed"),popper:ao(ue)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(De){return f.modifiersData[De.name]=Object.assign({},De.data)});for(var Q=0;Q<f.orderedModifiers.length;Q++){if(f.reset===!0){f.reset=!1,Q=-1;continue}var ae=f.orderedModifiers[Q],ne=ae.fn,Se=ae.options,Ve=Se===void 0?{}:Se,Y=ae.name;typeof ne=="function"&&(f=ne({state:f,options:Ve,name:Y,instance:b})||f)}}}},update:_p(function(){return new Promise(function(A){b.forceUpdate(),A(f)})}),destroy:function(){M(),y=!0}};if(!U0(c,u))return b;b.setOptions(p).then(function(A){!y&&p.onFirstUpdate&&p.onFirstUpdate(A)});function C(){f.orderedModifiers.forEach(function(A){var V=A.name,se=A.options,ue=se===void 0?{}:se,Q=A.effect;if(typeof Q=="function"){var ae=Q({state:f,name:V,instance:b,options:ue}),ne=function(){};g.push(ae||ne)}})}function M(){g.forEach(function(A){return A()}),g=[]}return b}}var hk=[W0,j0,z0,B0],yp=q0({defaultModifiers:hk});var fk=["*"];var mk=t=>({$implicit:t});var gk=["dialog"],_k=["ngbNavOutlet",""];function vk(t,e){}function yk(t,e){if(t&1&&(E(0,"div",0),J(1,vk,0,0,"ng-template",1),k()),t&2){let n=R().$implicit,i=R();I("item",n)("nav",i.nav)("role",i.paneRole),D(),I("ngTemplateOutlet",(n.contentTpl==null?null:n.contentTpl.templateRef)||null)("ngTemplateOutletContext",Ot(5,mk,n.active||i.isPanelTransitioning(n)))}}function bk(t,e){if(t&1&&J(0,yk,2,7,"div",0),t&2){let n=e.$implicit,i=R();Ee(0,n.isPanelInDom()||i.isPanelTransitioning(n)?0:-1)}}var wk=(t,e,n)=>({$implicit:t,pages:e,disabled:n}),Ck=t=>({disabled:!0,currentPage:t}),xk=(t,e,n)=>({disabled:t,$implicit:e,currentPage:n}),xp=(t,e)=>({disabled:t,currentPage:e}),Tk=t=>({disabled:t});function Sk(t,e){t&1&&(E(0,"span",13),oa(1,7),k())}function Dk(t,e){t&1&&(E(0,"span",13),oa(1,8),k())}function Mk(t,e){t&1&&(E(0,"span",13),oa(1,9),k())}function kk(t,e){t&1&&(E(0,"span",13),oa(1,10),k())}function Ek(t,e){t&1&&$(0,"...")}function Ok(t,e){if(t&1&&$(0),t&2){let n=e.$implicit;We(n)}}function Ik(t,e){}function Ak(t,e){if(t&1&&(E(0,"a",16),J(1,Ik,0,0,"ng-template",12),k()),t&2){let n=R(2).$implicit,i=R(),r=Xt(9);D(),I("ngTemplateOutlet",(i.tplEllipsis==null?null:i.tplEllipsis.templateRef)||r)("ngTemplateOutletContext",Ot(2,Ck,n))}}function Nk(t,e){}function Pk(t,e){if(t&1){let n=Te();E(0,"a",17),z("click",function(r){re(n);let o=R().$implicit;return R(2).selectPage(o),oe(r.preventDefault())}),J(1,Nk,0,0,"ng-template",12),k()}if(t&2){let n=R().$implicit,i=R(),r=i.$implicit,o=i.disabled,l=R(),c=Xt(11);ze("tabindex",o?"-1":null)("aria-disabled",o?"true":null),D(),I("ngTemplateOutlet",(l.tplNumber==null?null:l.tplNumber.templateRef)||c)("ngTemplateOutletContext",Kl(4,xk,o,n,r))}}function Rk(t,e){if(t&1&&(E(0,"li",15),J(1,Ak,2,4,"a",16)(2,Pk,2,8),k()),t&2){let n=e.$implicit,i=R(),r=i.$implicit,o=i.disabled,l=R();Re("active",n===r)("disabled",l.isEllipsis(n)||o),ze("aria-current",n===r?"page":null),D(),Ee(1,l.isEllipsis(n)?1:2)}}function Fk(t,e){if(t&1&&Vt(0,Rk,3,6,"li",14,zi),t&2){let n=e.pages;Lt(n)}}function Bk(t,e){}function Vk(t,e){if(t&1){let n=Te();E(0,"li",15)(1,"a",18),z("click",function(r){return re(n),R().selectPage(1),oe(r.preventDefault())}),J(2,Bk,0,0,"ng-template",12),k()()}if(t&2){let n=R(),i=Xt(1);Re("disabled",n.previousDisabled()),D(),ze("tabindex",n.previousDisabled()?"-1":null)("aria-disabled",n.previousDisabled()?"true":null),D(),I("ngTemplateOutlet",(n.tplFirst==null?null:n.tplFirst.templateRef)||i)("ngTemplateOutletContext",fi(6,xp,n.previousDisabled(),n.page))}}function Lk(t,e){}function Hk(t,e){if(t&1){let n=Te();E(0,"li",15)(1,"a",19),z("click",function(r){re(n);let o=R();return o.selectPage(o.page-1),oe(r.preventDefault())}),J(2,Lk,0,0,"ng-template",12),k()()}if(t&2){let n=R(),i=Xt(3);Re("disabled",n.previousDisabled()),D(),ze("tabindex",n.previousDisabled()?"-1":null)("aria-disabled",n.previousDisabled()?"true":null),D(),I("ngTemplateOutlet",(n.tplPrevious==null?null:n.tplPrevious.templateRef)||i)("ngTemplateOutletContext",Ot(6,Tk,n.previousDisabled()))}}function zk(t,e){}function Wk(t,e){}function Gk(t,e){if(t&1){let n=Te();E(0,"li",15)(1,"a",20),z("click",function(r){re(n);let o=R();return o.selectPage(o.page+1),oe(r.preventDefault())}),J(2,Wk,0,0,"ng-template",12),k()()}if(t&2){let n=R(),i=Xt(5);Re("disabled",n.nextDisabled()),D(),ze("tabindex",n.nextDisabled()?"-1":null)("aria-disabled",n.nextDisabled()?"true":null),D(),I("ngTemplateOutlet",(n.tplNext==null?null:n.tplNext.templateRef)||i)("ngTemplateOutletContext",fi(6,xp,n.nextDisabled(),n.page))}}function jk(t,e){}function $k(t,e){if(t&1){let n=Te();E(0,"li",15)(1,"a",21),z("click",function(r){re(n);let o=R();return o.selectPage(o.pageCount),oe(r.preventDefault())}),J(2,jk,0,0,"ng-template",12),k()()}if(t&2){let n=R(),i=Xt(7);Re("disabled",n.nextDisabled()),D(),ze("tabindex",n.nextDisabled()?"-1":null)("aria-disabled",n.nextDisabled()?"true":null),D(),I("ngTemplateOutlet",(n.tplLast==null?null:n.tplLast.templateRef)||i)("ngTemplateOutletContext",fi(6,xp,n.nextDisabled(),n.page))}}function Uk(t,e){if(t&1&&(E(0,"span"),$(1),k()),t&2){let n=R().$implicit,i=R();Mt(i.highlightClass),D(),We(n)}}function qk(t,e){if(t&1&&(br(0),$(1),wr()),t&2){let n=R().$implicit;D(),We(n)}}function Jk(t,e){if(t&1&&J(0,Uk,2,4,"span",0)(1,qk,2,1),t&2){let n=e.$index;Ee(0,n%2!==0?0:1)}}var Kk=(t,e,n)=>({result:t,term:e,formatter:n});function Yk(t,e){if(t&1&&q(0,"ngb-highlight",2),t&2){let n=e.result,i=e.term,r=e.formatter;I("result",r(n))("term",i)}}function Qk(t,e){}function Zk(t,e){if(t&1){let n=Te();E(0,"button",3),z("mouseenter",function(){let r=re(n).$index,o=R();return oe(o.markActive(r))})("click",function(){let r=re(n).$implicit,o=R();return oe(o.select(r))}),J(1,Qk,0,0,"ng-template",4),k()}if(t&2){let n=e.$implicit,i=e.$index,r=R(),o=Xt(1);Re("active",i===r.activeIdx),I("id",r.id+"-"+i),D(),I("ngTemplateOutlet",r.resultTemplate||o)("ngTemplateOutletContext",Kl(5,Kk,n,r.term,r.formatter))}}var t_={animation:!0,transitionTimerDelayMs:5},n_=(()=>{let e=class e{constructor(){this.animation=t_.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Xk(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function eE(t){return parseInt(`${t}`,10)}function ya(t){return t!=null?`${t}`:""}function tE(t,e,n=0){return Math.max(Math.min(t,e),n)}function i_(t){return typeof t=="string"}function J0(t){return!isNaN(eE(t))}function Er(t){return t!=null}function nE(t){return t&&t.then}function iE(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function rE(t,e){return!e||typeof t.closest>"u"?null:t.closest(e)}function Tp(t){return(t||document.body).getBoundingClientRect()}function oE(t){return e=>new ts(n=>{let i=l=>t.run(()=>n.next(l)),r=l=>t.run(()=>n.error(l)),o=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:o})})}function K0(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}var sE=()=>{},{transitionTimerDelayMs:aE}=t_,bc=new Map,ei=(t,e,n,i)=>{let r=i.context||{},o=bc.get(e);if(o)switch(i.runningTransition){case"continue":return Pg;case"stop":t.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),bc.delete(e)}let l=n(e,i.animation,r)||sE;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>l()),vr(void 0).pipe(oE(t));let c=new nt,u=new nt,p=c.pipe(Wg(!0));bc.set(e,{transition$:c,complete:()=>{u.next(),u.complete()},context:r});let f=Xk(e);return t.runOutsideAngular(()=>{let g=Zt(e,"transitionend").pipe(Ke(p),Yr(({target:b})=>b===e)),y=Hg(f+aE).pipe(Ke(p));zu(y,g,u).pipe(Ke(p)).subscribe(()=>{bc.delete(e),t.run(()=>{l(),c.next(),c.complete()})})}),c.asObservable()};var en=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(en||{});var wc=(t,e)=>e?e.some(n=>n.contains(t)):!1,Y0=(t,e)=>!e||rE(t,e)!=null,lE=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})(),cE=t=>lE?()=>setTimeout(()=>t(),100):t;function dE(t,e,n,i,r,o,l,c){n&&t.runOutsideAngular(cE(()=>{let u=y=>{let b=y.target;return y.button===2||wc(b,l)?!1:n==="inside"?wc(b,o)&&Y0(b,c):n==="outside"?!wc(b,o):Y0(b,c)||!wc(b,o)},p=Zt(e,"keydown").pipe(Ke(r),Yr(y=>y.which===en.Escape),ta(y=>y.preventDefault())),f=Zt(e,"mousedown").pipe(Qt(u),Ke(r)),g=Zt(e,"mouseup").pipe(Wl(f),Yr(([y,b])=>b),zg(0),Ke(r));zu([p.pipe(Qt(y=>0)),g.pipe(Qt(y=>1))]).subscribe(y=>t.run(()=>i(y)))}))}var uE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function r_(t){let e=Array.from(t.querySelectorAll(uE)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var pE=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=Zt(e,"focusin").pipe(Ke(n),Qt(o=>o.target));Zt(e,"keydown").pipe(Ke(n),Yr(o=>o.which===en.Tab),Wl(r)).subscribe(([o,l])=>{let[c,u]=r_(e);(l===c||l===e)&&o.shiftKey&&(u.focus(),o.preventDefault()),l===u&&!o.shiftKey&&(c.focus(),o.preventDefault())}),i&&Zt(e,"click").pipe(Ke(n),Wl(r),Qt(o=>o[1])).subscribe(o=>o.focus())})},hE=(()=>{let e=class e{constructor(){this._element=j(Wi).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fE=/\s+/,mE=/  +/gi,gE={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function _E(t,e){let[n,i]=gE[t];return e&&i||n}var vE=/^left/,yE=/^right/,bE=/^start/,wE=/^end/;function CE(t,e){let[n,i]=e.split("-"),r=n.replace(vE,"start").replace(yE,"end"),o=[r];if(i){let l=i;(n==="left"||n==="right")&&(l=l.replace(bE,"top").replace(wE,"bottom")),o.push(`${r}-${l}`)}return t&&(o=o.map(l=>`${t}-${l}`)),o.join(" ")}function Q0({placement:t,baseClass:e},n){let i=Array.isArray(t)?t:t.split(fE),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],o=i.findIndex(p=>p==="auto");o>=0&&r.forEach(function(p){i.find(f=>f.search("^"+p)!==-1)==null&&i.splice(o++,1,p)});let l=i.map(p=>_E(p,n.isRTL()));return{placement:l.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:p}){let f=new RegExp(e+"(-[a-z]+)*","gi"),g=p.elements.popper,y=p.placement,b=g.className;b=b.replace(f,""),b+=` ${CE(e,y)}`,b=b.trim().replace(mE," "),g.className=b}},cp,pp,rp,{enabled:!0,name:"flip",options:{fallbackPlacements:l}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Z0(t){return t}function xE(){let t=j(hE),e=null;return{createPopper(n){if(!e){let r=(n.updatePopperOptions||Z0)(Q0(n,t));e=yp(n.hostElement,n.targetElement,r)}},update(){e&&e.update()},setOptions(n){if(e){let r=(n.updatePopperOptions||Z0)(Q0(n,t));e.setOptions(r)}},destroy(){e&&(e.destroy(),e=null)}}}function TE(t){return e=>(e.modifiers.push(dp,{name:"offset",options:{offset:()=>t}}),e)}var $L=new Date(1882,10,12),UL=new Date(2174,10,25);var qL=1e3*60*60*24;var Sp=1080,SE=24*Sp,DE=12*Sp+793,JL=29*SE+DE,KL=11*Sp+204;var ME=(()=>{let e=class e{constructor(){this._ngbConfig=j(n_),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ji=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}},bp=class{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=j(Wi),this._applicationRef=j(sa),this._injector=j(Li),this._viewContainerRef=j(qg),this._ngZone=j(Hi)}open(e,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(e,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,o=this._ngZone.onStable.pipe(yr(1),Bg(()=>ei(this._ngZone,r,({classList:l})=>l.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(e=!1){return this._windowRef?ei(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:e,runningTransition:"stop"}).pipe(ta(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):vr(void 0)}_getContentRef(e,n){if(e)if(e instanceof Jn){let i=e.createEmbeddedView(n);return this._applicationRef.attachView(i),new Ji([i.rootNodes],i)}else return new Ji([[this._document.createTextNode(`${e}`)]]);else return new Ji([])}},kE=(()=>{let e=class e{constructor(){this._document=j(Wi)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,o=r.style,{overflow:l,paddingRight:c}=o;if(i>0){let u=parseFloat(window.getComputedStyle(r).paddingRight);o.paddingRight=`${u+i}px`}return o.overflow="hidden",()=>{i>0&&(o.paddingRight=c),o.overflow=l}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),EE=(()=>{let e=class e{constructor(){this._nativeElement=j(vt).nativeElement,this._zone=j(Hi)}ngOnInit(){this._zone.onStable.asObservable().pipe(yr(1)).subscribe(()=>{ei(this._zone,this._nativeElement,(i,r)=>{r&&Tp(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ei(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,o){r&2&&(Mt("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),Re("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[ye],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),gs=class{update(e){}close(e){}dismiss(e){}},OE=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],IE=["animation","backdropClass"],wp=class{_applyWindowOptions(e,n){OE.forEach(i=>{Er(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){IE.forEach(i=>{Er(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ke(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ke(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new nt,this._dismissed=new nt,this._hidden=new nt,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,l)=>{this._resolve=o,this._reject=l}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();nE(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():vr(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Bl(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Cp=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(Cp||{}),AE=(()=>{let e=class e{constructor(){this._document=j(Wi),this._elRef=j(vt),this._zone=j(Hi),this._closed$=new nt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new He,this.shown=new nt,this.hidden=new nt}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":i_(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(yr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},o=ei(this._zone,i,()=>i.classList.remove("show"),r),l=ei(this._zone,this._dialogEl.nativeElement,()=>{},r),c=Bl(o,l);return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){let i={animation:this.animation,runningTransition:"continue"},r=ei(this._zone,this._elRef.nativeElement,(l,c)=>{c&&Tp(l),l.classList.add("show")},i),o=ei(this._zone,this._dialogEl.nativeElement,()=>{},i);Bl(r,o).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Zt(i,"keydown").pipe(Ke(this._closed$),Yr(o=>o.which===en.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(Cp.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;Zt(this._dialogEl.nativeElement,"mousedown").pipe(Ke(this._closed$),ta(()=>r=!1),Wu(()=>Zt(i,"mouseup").pipe(Ke(this._closed$),yr(1))),Yr(({target:o})=>i===o)).subscribe(()=>{r=!0}),Zt(i,"click").pipe(Ke(this._closed$)).subscribe(({target:o})=>{i===o&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(Cp.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),o=r_(i)[0];(r||o||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,o;r&&r.focus&&i.contains(r)?o=r:o=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ei(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,o){if(r&1&&rs(gk,7),r&2){let l;kt(l=Et())&&(o._dialogEl=l.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,o){r&2&&(ze("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),Mt("modal d-block"+(o.windowClass?" "+o.windowClass:"")),Re("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[ye],ngContentSelectors:fk,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,o){r&1&&(Ul(),E(0,"div",1,0)(2,"div",2),ql(3),k()()),r&2&&Mt("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),NE=(()=>{let e=class e{constructor(){this._applicationRef=j(sa),this._injector=j(Li),this._environmentInjector=j(Gu),this._document=j(Wi),this._scrollBar=j(kE),this._activeWindowCmptHasChanged=new nt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new He;let i=j(Hi);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];pE(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,o){let l=o.container instanceof HTMLElement?o.container:Er(o.container)?this._document.querySelector(o.container):this._document.body;if(!l)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let c=new gs;i=o.injector||i;let u=i.get(Gu,null)||this._environmentInjector,p=this._getContentRef(i,u,r,c,o),f=o.backdrop!==!1?this._attachBackdrop(l):void 0,g=this._attachWindowComponent(l,p.nodes),y=new wp(g,p,f,o.beforeDismiss);return this._registerModalRef(y),this._registerWindowCmpt(g),y.hidden.pipe(yr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),c.close=b=>{y.close(b)},c.dismiss=b=>{y.dismiss(b)},c.update=b=>{y.update(b)},y.update(o),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),f&&f.instance&&f.changeDetectorRef.detectChanges(),g.changeDetectorRef.detectChanges(),y}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=as(EE,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let o=as(AE,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_getContentRef(i,r,o,l,c){return o?o instanceof Jn?this._createFromTemplateRef(o,l):i_(o)?this._createFromString(o):this._createFromComponent(i,r,o,l,c):new Ji([])}_createFromTemplateRef(i,r){let o={$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}},l=i.createEmbeddedView(o);return this._applicationRef.attachView(l),new Ji([l.rootNodes],l)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new Ji([[r]])}_createFromComponent(i,r,o,l,c){let u=Li.create({providers:[{provide:gs,useValue:l}],parent:i}),p=as(o,{environmentInjector:r,elementInjector:u}),f=p.location.nativeElement;return c.scrollable&&f.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new Ji([[f]],p.hostView,p)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==i&&o.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let o=this._modalRefs.indexOf(i);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),o_=(()=>{let e=class e{constructor(){this._injector=j(Li),this._modalStack=j(NE),this._config=j(ME)}open(i,r={}){let o=Ae(_t(Ae({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var PE=(()=>{let e=class e{constructor(){this._ngbConfig=j(n_),this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),s_=t=>Er(t)&&t!=="",RE=0,Dp=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbNavContent",""]],standalone:!0});let t=e;return t})(),a_=(()=>{let e=class e{constructor(i){this.role=i,this.nav=j(ba)}};e.\u0275fac=function(r){return new(r||e)(Gl("role"))},e.\u0275dir=ke({type:e,selectors:[["","ngbNavItem","",5,"ng-container"]],hostVars:1,hostBindings:function(r,o){r&2&&ze("role",o.role?o.role:o.nav.roles?"presentation":void 0)},standalone:!0});let t=e;return t})(),Cc=(()=>{let e=class e{constructor(){this._nav=j(ba),this._nativeElement=j(vt).nativeElement,this.disabled=!1,this.shown=new He,this.hidden=new He}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){Er(this.domId)||(this.domId=`ngb-nav-${RE++}`)}get active(){return this._nav.activeId===this.id}get id(){return s_(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(Er(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}isNgContainer(){return this._nativeElement.nodeType===Node.COMMENT_NODE}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["","ngbNavItem",""]],contentQueries:function(r,o,l){if(r&1&&Kn(l,Dp,4),r&2){let c;kt(c=Et())&&(o.contentTpls=c)}},hostVars:2,hostBindings:function(r,o){r&2&&Re("nav-item",!0)},inputs:{destroyOnHide:"destroyOnHide",disabled:"disabled",domId:"domId",_id:[te.None,"ngbNavItem","_id"]},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbNavItem"],standalone:!0});let t=e;return t})(),ba=(()=>{let e=class e{constructor(i){this.role=i,this._config=j(PE),this._cd=j(Zr),this._document=j(Wi),this._nativeElement=j(vt).nativeElement,this.destroyRef=j(jl),this._navigatingWithKeyboard=!1,this.activeIdChange=new He,this.animation=this._config.animation,this.destroyOnHide=this._config.destroyOnHide,this.orientation=this._config.orientation,this.roles=this._config.roles,this.keyboard=this._config.keyboard,this.shown=new He,this.hidden=new He,this.navItemChange$=new nt,this.navChange=new He}click(i){i.disabled||this._updateActiveId(i.id)}onFocusout({relatedTarget:i}){this._nativeElement.contains(i)||(this._navigatingWithKeyboard=!1)}onKeyDown(i){if(this.roles!=="tablist"||!this.keyboard)return;let r=i.which,o=this.links.filter(u=>!u.navItem.disabled),{length:l}=o,c=-1;if(o.forEach((u,p)=>{u.nativeElement===this._document.activeElement&&(c=p)}),l){switch(r){case en.ArrowUp:case en.ArrowLeft:c=(c-1+l)%l;break;case en.ArrowRight:case en.ArrowDown:c=(c+1)%l;break;case en.Home:c=0;break;case en.End:c=l-1;break}this.keyboard==="changeWithArrows"&&this.select(o[c].navItem.id),o[c].nativeElement.focus(),this._navigatingWithKeyboard=!0,i.preventDefault()}}select(i){this._updateActiveId(i,!1)}ngAfterContentInit(){if(!Er(this.activeId)){let i=this.items.first?this.items.first.id:null;s_(i)&&(this._updateActiveId(i,!1),this._cd.detectChanges())}this.items.changes.pipe(Xl(this.destroyRef)).subscribe(()=>this._notifyItemChanged(this.activeId))}ngOnChanges({activeId:i}){i&&!i.firstChange&&this._notifyItemChanged(i.currentValue)}_updateActiveId(i,r=!0){if(this.activeId!==i){let o=!1;r&&this.navChange.emit({activeId:this.activeId,nextId:i,preventDefault:()=>{o=!0}}),o||(this.activeId=i,this.activeIdChange.emit(i),this._notifyItemChanged(i))}}_notifyItemChanged(i){this.navItemChange$.next(this._getItemById(i))}_getItemById(i){return this.items&&this.items.find(r=>r.id===i)||null}};e.\u0275fac=function(r){return new(r||e)(Gl("role"))},e.\u0275dir=ke({type:e,selectors:[["","ngbNav",""]],contentQueries:function(r,o,l){if(r&1&&(Kn(l,Cc,4),Kn(l,xc,5)),r&2){let c;kt(c=Et())&&(o.items=c),kt(c=Et())&&(o.links=c)}},hostVars:6,hostBindings:function(r,o){r&1&&z("keydown.arrowLeft",function(c){return o.onKeyDown(c)})("keydown.arrowRight",function(c){return o.onKeyDown(c)})("keydown.arrowDown",function(c){return o.onKeyDown(c)})("keydown.arrowUp",function(c){return o.onKeyDown(c)})("keydown.Home",function(c){return o.onKeyDown(c)})("keydown.End",function(c){return o.onKeyDown(c)})("focusout",function(c){return o.onFocusout(c)}),r&2&&(ze("aria-orientation",o.orientation==="vertical"&&o.roles==="tablist"?"vertical":void 0)("role",o.role?o.role:o.roles?"tablist":void 0),Re("nav",!0)("flex-column",o.orientation==="vertical"))},inputs:{activeId:"activeId",animation:"animation",destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard"},outputs:{activeIdChange:"activeIdChange",shown:"shown",hidden:"hidden",navChange:"navChange"},exportAs:["ngbNav"],standalone:!0,features:[In]});let t=e;return t})(),xc=(()=>{let e=class e{constructor(i){this.role=i,this.navItem=j(Cc),this.nav=j(ba),this.nativeElement=j(vt).nativeElement}get tabindex(){return this.nav.keyboard===!1?this.navItem.disabled?-1:void 0:this.nav._navigatingWithKeyboard||this.navItem.disabled||!this.navItem.active?-1:void 0}};e.\u0275fac=function(r){return new(r||e)(Gl("role"))},e.\u0275dir=ke({type:e,selectors:[["","ngbNavLink",""]],hostVars:14,hostBindings:function(r,o){r&2&&(is("id",o.navItem.domId),ze("role",o.role?o.role:o.nav.roles?"tab":void 0)("tabindex",o.tabindex)("aria-controls",o.navItem.isPanelInDom()?o.navItem.panelDomId:null)("aria-selected",o.navItem.active)("aria-disabled",o.navItem.disabled),Re("nav-link",!0)("nav-item",o.navItem.isNgContainer())("active",o.navItem.active)("disabled",o.navItem.disabled))},standalone:!0});let t=e;return t})(),l_=(()=>{let e=class e extends xc{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ns(e)))(o||e)}})(),e.\u0275dir=ke({type:e,selectors:[["button","ngbNavLink",""]],hostAttrs:["type","button"],hostVars:1,hostBindings:function(r,o){r&1&&z("click",function(){return o.nav.click(o.navItem)}),r&2&&is("disabled",o.navItem.disabled)},standalone:!0,features:[mn]});let t=e;return t})();var FE=({classList:t})=>(t.remove("show"),()=>t.remove("active")),BE=(t,e)=>{e&&Tp(t),t.classList.add("show")},X0=(()=>{let e=class e{constructor(){this.nativeElement=j(vt).nativeElement}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(r,o){r&2&&(is("id",o.item.panelDomId),ze("role",o.role?o.role:o.nav.roles?"tabpanel":void 0)("aria-labelledby",o.item.domId),Re("fade",o.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0});let t=e;return t})(),c_=(()=>{let e=class e{constructor(){this._cd=j(Zr),this._ngZone=j(Hi),this._activePane=null}isPanelTransitioning(i){return this._activePane?.item===i}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(Xl(this.nav.destroyRef),zl(this._activePane?.item||null),Ll(),Hl(1)).subscribe(i=>{let r={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?ei(this._ngZone,this._activePane.nativeElement,FE,r).subscribe(()=>{let o=this._activePane?.item;this._activePane=this._getPaneForItem(i),this._cd.markForCheck(),this._activePane&&(this._activePane.nativeElement.classList.add("active"),ei(this._ngZone,this._activePane.nativeElement,BE,r).subscribe(()=>{i&&(i.shown.emit(),this.nav.shown.emit(i.id))})),o&&(o.hidden.emit(),this.nav.hidden.emit(o.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.nativeElement.classList.add("show"),this._activePane?.nativeElement.classList.add("active")}_getPaneForItem(i){return this._panes&&this._panes.find(r=>r.item===i)||null}_getActivePane(){return this._panes&&this._panes.find(i=>i.item.active)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["","ngbNavOutlet",""]],viewQuery:function(r,o){if(r&1&&rs(X0,5),r&2){let l;kt(l=Et())&&(o._panes=l)}},hostVars:2,hostBindings:function(r,o){r&2&&Re("tab-content",!0)},inputs:{paneRole:"paneRole",nav:[te.None,"ngbNavOutlet","nav"]},standalone:!0,features:[ye],attrs:_k,decls:2,vars:0,consts:[["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){r&1&&Vt(0,bk,1,1,null,null,zi),r&2&&Lt(o.nav.items)},dependencies:[X0,Cr],encapsulation:2,changeDetection:0});let t=e;return t})();var VE=(()=>{let e=class e{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),LE=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0});let t=e;return t})(),HE=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0});let t=e;return t})(),zE=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0});let t=e;return t})(),WE=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0});let t=e;return t})(),GE=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0});let t=e;return t})(),jE=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0});let t=e;return t})(),$E=(()=>{let e=class e{constructor(){this.templateRef=j(Jn)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0});let t=e;return t})(),d_=(()=>{let e=class e{constructor(){this._config=j(VE),this.pageCount=0,this.pages=[],this.disabled=this._config.disabled,this.boundaryLinks=this._config.boundaryLinks,this.directionLinks=this._config.directionLinks,this.ellipses=this._config.ellipses,this.rotate=this._config.rotate,this.maxSize=this._config.maxSize,this.page=1,this.pageSize=this._config.pageSize,this.pageChange=new He(!0),this.size=this._config.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(i){this._updatePages(i)}ngOnChanges(i){this._updatePages(this.page)}isEllipsis(i){return i===-1}_applyEllipses(i,r){this.ellipses&&(i>0&&(i>2?this.pages.unshift(-1):i===2&&this.pages.unshift(2),this.pages.unshift(1)),r<this.pageCount&&(r<this.pageCount-2?this.pages.push(-1):r===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let i=0,r=this.pageCount,o=Math.floor(this.maxSize/2),l=this.maxSize%2===0?o-1:o;return this.page<=o?r=this.maxSize:this.pageCount-this.page<o?i=this.pageCount-this.maxSize:(i=this.page-o-1,r=this.page+l),[i,r]}_applyPagination(){let r=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize,o=r+this.maxSize;return[r,o]}_setPageInRange(i){let r=this.page;this.page=tE(i,this.pageCount,1),this.page!==r&&J0(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(i){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),J0(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let r=1;r<=this.pageCount;r++)this.pages.push(r);if(this._setPageInRange(i),this.maxSize>0&&this.pageCount>this.maxSize){let r=0,o=this.pageCount;this.rotate?[r,o]=this._applyRotation():[r,o]=this._applyPagination(),this.pages=this.pages.slice(r,o),this._applyEllipses(r,o)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngb-pagination"]],contentQueries:function(r,o,l){if(r&1&&(Kn(l,LE,5),Kn(l,HE,5),Kn(l,zE,5),Kn(l,WE,5),Kn(l,GE,5),Kn(l,jE,5),Kn(l,$E,5)),r&2){let c;kt(c=Et())&&(o.tplEllipsis=c.first),kt(c=Et())&&(o.tplFirst=c.first),kt(c=Et())&&(o.tplLast=c.first),kt(c=Et())&&(o.tplNext=c.first),kt(c=Et())&&(o.tplNumber=c.first),kt(c=Et())&&(o.tplPrevious=c.first),kt(c=Et())&&(o.tplPages=c.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[In,ye],decls:20,vars:12,consts:()=>{let i;i=$localize`:@@ngb.pagination.first:`;let r;r=$localize`:@@ngb.pagination.previous:`;let o;o=$localize`:@@ngb.pagination.next:`;let l;l=$localize`:@@ngb.pagination.last:`;let c;c=$localize`:@@ngb.pagination.first-aria:First`;let u;u=$localize`:@@ngb.pagination.previous-aria:Previous`;let p;p=$localize`:@@ngb.pagination.next-aria:Next`;let f;return f=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],i,r,o,l,[1,"page-item",3,"disabled"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],[1,"page-item",3,"active","disabled"],[1,"page-item"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",c,"href","",1,"page-link",3,"click"],["aria-label",u,"href","",1,"page-link",3,"click"],["aria-label",p,"href","",1,"page-link",3,"click"],["aria-label",f,"href","",1,"page-link",3,"click"]]},template:function(r,o){if(r&1&&(J(0,Sk,2,0,"ng-template",null,0,Yn)(2,Dk,2,0,"ng-template",null,1,Yn)(4,Mk,2,0,"ng-template",null,2,Yn)(6,kk,2,0,"ng-template",null,3,Yn)(8,Ek,1,0,"ng-template",null,4,Yn)(10,Ok,1,1,"ng-template",null,5,Yn)(12,Fk,2,0,"ng-template",null,6,Yn),E(14,"ul"),J(15,Vk,3,9,"li",11)(16,Hk,3,8,"li",11)(17,zk,0,0,"ng-template",12)(18,Gk,3,9,"li",11)(19,$k,3,9,"li",11),k()),r&2){let l=Xt(13);D(14),Mt("pagination"+(o.size?" pagination-"+o.size:"")),D(),Ee(15,o.boundaryLinks?15:-1),D(),Ee(16,o.directionLinks?16:-1),D(),I("ngTemplateOutlet",(o.tplPages==null?null:o.tplPages.templateRef)||l)("ngTemplateOutletContext",Kl(8,wk,o.page,o.pages,o.disabled)),D(),Ee(18,o.directionLinks?18:-1),D(),Ee(19,o.boundaryLinks?19:-1)}},dependencies:[Cr],encapsulation:2,changeDetection:0});let t=e;return t})();var UE=(()=>{let e=class e{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(i){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);let r=ya(this.result),o=Array.isArray(this.term)?this.term:[this.term],l=f=>this.accentSensitive?f:K0(f),c=o.map(f=>iE(l(ya(f)))).filter(f=>f),u=this.accentSensitive?r:K0(r),p=c.length?u.split(new RegExp(`(${c.join("|")})`,"gmi")):[r];if(this.accentSensitive)this.parts=p;else{let f=0;this.parts=p.map(g=>r.substring(f,f+=g.length))}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[In,ye],decls:2,vars:0,consts:[[3,"class"]],template:function(r,o){r&1&&Vt(0,Jk,2,1,null,null,zi),r&2&&Lt(o.parts)},styles:[`.ngb-highlight{font-weight:700}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),qE=new qn("live announcer delay",{providedIn:"root",factory:()=>100});function e_(t,e=!1){let n=t.body.querySelector("#ngb-live");return n==null&&e&&(n=t.createElement("div"),n.setAttribute("id","ngb-live"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),n.classList.add("visually-hidden"),t.body.appendChild(n)),n}var JE=(()=>{let e=class e{constructor(){this._document=j(Wi),this._delay=j(qE)}ngOnDestroy(){let i=e_(this._document);i&&i.parentElement.removeChild(i)}say(i){let r=e_(this._document,!0),o=this._delay;if(r!=null){r.textContent="";let l=()=>r.textContent=i;o===null?l():setTimeout(l,o)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),KE=(()=>{let e=class e{constructor(){this.editable=!0,this.focusFirst=!0,this.selectOnExact=!1,this.showHint=!1,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=i=>i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),YE=(()=>{let e=class e{constructor(){this.activeIdx=0,this.focusFirst=!0,this.formatter=ya,this.selectEvent=new He,this.activeChangeEvent=new He}hasActive(){return this.activeIdx>-1&&this.activeIdx<this.results.length}getActive(){return this.results[this.activeIdx]}markActive(i){this.activeIdx=i,this._activeChanged()}next(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()}prev(){this.activeIdx<0?this.activeIdx=this.results.length-1:this.activeIdx===0?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()}resetActive(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()}select(i){this.selectEvent.emit(i)}ngOnInit(){this.resetActive()}_activeChanged(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngb-typeahead-window"]],hostAttrs:["role","listbox"],hostVars:3,hostBindings:function(r,o){r&1&&z("mousedown",function(c){return c.preventDefault()}),r&2&&(is("id",o.id),Mt("dropdown-menu show"+(o.popupClass?" "+o.popupClass:"")))},inputs:{id:"id",focusFirst:"focusFirst",results:"results",term:"term",formatter:"formatter",resultTemplate:"resultTemplate",popupClass:"popupClass"},outputs:{selectEvent:"select",activeChangeEvent:"activeChange"},exportAs:["ngbTypeaheadWindow"],standalone:!0,features:[ye],decls:4,vars:0,consts:[["rt",""],["type","button","role","option",1,"dropdown-item",3,"id","active"],[3,"result","term"],["type","button","role","option",1,"dropdown-item",3,"mouseenter","click","id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){r&1&&(J(0,Yk,1,2,"ng-template",null,0,Yn),Vt(2,Zk,2,9,"button",1,zi)),r&2&&(D(2),Lt(o.results))},dependencies:[UE,Cr],encapsulation:2});let t=e;return t})(),QE=0,u_=(()=>{let e=class e{constructor(){this._nativeElement=j(vt).nativeElement,this._config=j(KE),this._live=j(JE),this._document=j(Wi),this._ngZone=j(Hi),this._changeDetector=j(Zr),this._popupService=new bp(YE),this._positioning=xE(),this._subscription=null,this._closed$=new nt,this._inputValueBackup=null,this._inputValueForSelectOnExact=null,this._valueChanges$=Zt(this._nativeElement,"input").pipe(Qt(i=>i.target.value)),this._resubscribeTypeahead$=new Ng(null),this._windowRef=null,this.autocomplete="off",this.container=this._config.container,this.editable=this._config.editable,this.focusFirst=this._config.focusFirst,this.selectOnExact=this._config.selectOnExact,this.showHint=this._config.showHint,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.selectItem=new He,this.activeDescendant=null,this.popupId=`ngb-typeahead-${QE++}`,this._onTouched=()=>{},this._onChange=i=>{}}ngOnInit(){this._subscribeToUserInput()}ngOnChanges({ngbTypeahead:i}){i&&!i.firstChange&&(this._unsubscribeFromUserInput(),this._subscribeToUserInput())}ngOnDestroy(){this._closePopup(),this._unsubscribeFromUserInput()}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}writeValue(i){this._writeInputValue(this._formatItemForInput(i)),this.showHint&&(this._inputValueBackup=i)}setDisabledState(i){this._nativeElement.disabled=i}dismissPopup(){this.isPopupOpen()&&(this._resubscribeTypeahead$.next(null),this._closePopup(),this.showHint&&this._inputValueBackup!==null&&this._writeInputValue(this._inputValueBackup),this._changeDetector.markForCheck())}isPopupOpen(){return this._windowRef!=null}handleBlur(){this._resubscribeTypeahead$.next(null),this._onTouched()}handleKeyDown(i){if(this.isPopupOpen())switch(i.which){case en.ArrowDown:i.preventDefault(),this._windowRef.instance.next(),this._showHint();break;case en.ArrowUp:i.preventDefault(),this._windowRef.instance.prev(),this._showHint();break;case en.Enter:case en.Tab:{let r=this._windowRef.instance.getActive();Er(r)&&(i.preventDefault(),i.stopPropagation(),this._selectResult(r)),this._closePopup();break}}}_openPopup(){if(!this.isPopupOpen()){this._inputValueBackup=this._nativeElement.value;let{windowRef:i}=this._popupService.open();this._windowRef=i,this._windowRef.setInput("id",this.popupId),this._windowRef.setInput("popupClass",this.popupClass),this._windowRef.instance.selectEvent.subscribe(r=>this._selectResultClosePopup(r)),this._windowRef.instance.activeChangeEvent.subscribe(r=>this.activeDescendant=r),this.container==="body"&&(this._windowRef.location.nativeElement.style.zIndex="1055",this._document.body.appendChild(this._windowRef.location.nativeElement)),this._changeDetector.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._windowRef&&(this._positioning.createPopper({hostElement:this._nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",updatePopperOptions:r=>this.popperOptions(TE([0,2])(r))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),dE(this._ngZone,this._document,"outside",()=>this.dismissPopup(),this._closed$,[this._nativeElement,this._windowRef.location.nativeElement])}}_closePopup(){this._popupService.close().subscribe(()=>{this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._closed$.next(),this._windowRef=null,this.activeDescendant=null})}_selectResult(i){let r=!1;this.selectItem.emit({item:i,preventDefault:()=>{r=!0}}),this._resubscribeTypeahead$.next(null),r||(this.writeValue(i),this._onChange(i))}_selectResultClosePopup(i){this._selectResult(i),this._closePopup()}_showHint(){if(this.showHint&&this._windowRef?.instance.hasActive()&&this._inputValueBackup!=null){let i=this._inputValueBackup.toLowerCase(),r=this._formatItemForInput(this._windowRef.instance.getActive());i===r.substring(0,this._inputValueBackup.length).toLowerCase()?(this._writeInputValue(this._inputValueBackup+r.substring(this._inputValueBackup.length)),this._nativeElement.setSelectionRange.apply(this._nativeElement,[this._inputValueBackup.length,r.length])):this._writeInputValue(r)}}_formatItemForInput(i){return i!=null&&this.inputFormatter?this.inputFormatter(i):ya(i)}_writeInputValue(i){this._nativeElement.value=ya(i)}_subscribeToUserInput(){let i=this._valueChanges$.pipe(ta(r=>{this._inputValueBackup=this.showHint?r:null,this._inputValueForSelectOnExact=this.selectOnExact?r:null,this._onChange(this.editable?r:void 0)}),this.ngbTypeahead?this.ngbTypeahead:()=>vr([]));this._subscription=this._resubscribeTypeahead$.pipe(Wu(()=>i)).subscribe(r=>{!r||r.length===0?this._closePopup():this.selectOnExact&&r.length===1&&this._formatItemForInput(r[0])===this._inputValueForSelectOnExact?(this._selectResult(r[0]),this._closePopup()):(this._openPopup(),this._windowRef.setInput("focusFirst",this.focusFirst),this._windowRef.setInput("results",r),this._windowRef.setInput("term",this._nativeElement.value),this.resultFormatter&&this._windowRef.setInput("formatter",this.resultFormatter),this.resultTemplate&&this._windowRef.setInput("resultTemplate",this.resultTemplate),this._windowRef.instance.resetActive(),this._windowRef.changeDetectorRef.detectChanges(),this._showHint());let o=r?r.length:0;this._live.say(o===0?"No results available":`${o} result${o===1?"":"s"} available`)})}_unsubscribeFromUserInput(){this._subscription&&this._subscription.unsubscribe(),this._subscription=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ke({type:e,selectors:[["input","ngbTypeahead",""]],hostAttrs:["autocapitalize","off","autocorrect","off","role","combobox"],hostVars:7,hostBindings:function(r,o){r&1&&z("blur",function(){return o.handleBlur()})("keydown",function(c){return o.handleKeyDown(c)}),r&2&&(is("autocomplete",o.autocomplete),ze("aria-autocomplete",o.showHint?"both":"list")("aria-activedescendant",o.activeDescendant)("aria-owns",o.isPopupOpen()?o.popupId:null)("aria-expanded",o.isPopupOpen()),Re("open",o.isPopupOpen()))},inputs:{autocomplete:"autocomplete",container:"container",editable:"editable",focusFirst:"focusFirst",inputFormatter:"inputFormatter",ngbTypeahead:"ngbTypeahead",resultFormatter:"resultFormatter",resultTemplate:"resultTemplate",selectOnExact:"selectOnExact",showHint:"showHint",placement:"placement",popperOptions:"popperOptions",popupClass:"popupClass"},outputs:{selectItem:"selectItem"},exportAs:["ngbTypeahead"],standalone:!0,features:[gn([{provide:Sr,useExisting:On(()=>e),multi:!0}]),In]});let t=e;return t})();var p_=t=>typeof t>"u"||t===null,ZE=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),XE=t=>{let e={};return Object.keys(t).forEach(n=>{t[n]&&(e[n]=t[n])}),e},Tc=t=>{let e=XE(t);return Object.entries(e).map(([n,i])=>`${ZE(n)}:${i}`).join(";")},_s=class extends Error{constructor(e){super(e),this.name=this.constructor.name}},Mp=()=>{let t=Date.now().toString(36),e=Math.random().toString(36).substring(2,7);return`${t}${e}`},h_=(t,e,n)=>Math.min(Math.max(t,e),n);function It(t){this.content=t}It.prototype={constructor:It,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),o=i.content.slice();return r==-1?o.push(n||t,e):(o[r+1]=e,n&&(o[r]=n)),new It(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new It(n)},addToStart:function(t,e){return new It([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new It(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),o=i.find(t);return r.splice(o==-1?r.length:o,0,e,n),new It(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=It.from(t),t.size?new It(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=It.from(t),t.size?new It(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=It.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};It.from=function(t){if(t instanceof It)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new It(e)};var kp=It;function b_(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),o=e.child(i);if(r==o){n+=r.nodeSize;continue}if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(let l=0;r.text[l]==o.text[l];l++)n++;return n}if(r.content.size||o.content.size){let l=b_(r.content,o.content,n+1);if(l!=null)return l}n+=r.nodeSize}}function w_(t,e,n,i){for(let r=t.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:n,b:i};let l=t.child(--r),c=e.child(--o),u=l.nodeSize;if(l==c){n-=u,i-=u;continue}if(!l.sameMarkup(c))return{a:n,b:i};if(l.isText&&l.text!=c.text){let p=0,f=Math.min(l.text.length,c.text.length);for(;p<f&&l.text[l.text.length-p-1]==c.text[c.text.length-p-1];)p++,n--,i--;return{a:n,b:i}}if(l.content.size||c.content.size){let p=w_(l.content,c.content,n-1,i-1);if(p)return p}n-=u,i-=u}}var L=class t{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,r=0,o){for(let l=0,c=0;c<n;l++){let u=this.content[l],p=c+u.nodeSize;if(p>e&&i(u,r+c,o||null,l)!==!1&&u.content.size){let f=c+1;u.nodesBetween(Math.max(0,e-f),Math.min(u.content.size,n-f),i,r+f)}c=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,r){let o="",l=!0;return this.nodesBetween(e,n,(c,u)=>{let p=c.isText?c.text.slice(Math.max(e,u)-u,n-u):c.isLeaf?r?typeof r=="function"?r(c):r:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&p||c.isTextblock)&&i&&(l?l=!1:o+=i),o+=p},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,r=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(i)&&(r[r.length-1]=n.withText(n.text+i.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new t(r,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let i=[],r=0;if(n>e)for(let o=0,l=0;l<n;o++){let c=this.content[o],u=l+c.nodeSize;u>e&&((l<e||u>n)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,n-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,n-l-1))),i.push(c),r+=c.nodeSize),l=u}return new t(i,r)}cutByIndex(e,n){return e==n?t.empty:e==0&&n==this.content.length?this:new t(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let r=this.content.slice(),o=this.size+n.nodeSize-i.nodeSize;return r[e]=n,new t(r,o)}addToStart(e){return new t([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new t(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let r=this.content[n];e(r,i,n),i+=r.nodeSize}}findDiffStart(e,n=0){return b_(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return w_(this,e,n,i)}findIndex(e,n=-1){if(e==0)return Sc(0,e);if(e==this.size)return Sc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,r=0;;i++){let o=this.child(i),l=r+o.nodeSize;if(l>=e)return l==e||n>0?Sc(i+1,l):Sc(i,r);r=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return t.empty;let n,i=0;for(let r=0;r<e.length;r++){let o=e[r];i+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(n||(n=e.slice(0,r)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new t(n||e,i)}static from(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};L.empty=new L([],0);var Ep={index:0,offset:0};function Sc(t,e){return Ep.index=t,Ep.offset=e,Ep}function Dc(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!Dc(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!Dc(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}var Oe=(()=>{class t{constructor(n,i){this.type=n,this.attrs=i}addToSet(n){let i,r=!1;for(let o=0;o<n.length;o++){let l=n[o];if(this.eq(l))return n;if(this.type.excludes(l.type))i||(i=n.slice(0,o));else{if(l.type.excludes(this.type))return n;!r&&l.type.rank>this.type.rank&&(i||(i=n.slice(0,o)),i.push(this),r=!0),i&&i.push(l)}}return i||(i=n.slice()),r||i.push(this),i}removeFromSet(n){for(let i=0;i<n.length;i++)if(this.eq(n[i]))return n.slice(0,i).concat(n.slice(i+1));return n}isInSet(n){for(let i=0;i<n.length;i++)if(this.eq(n[i]))return!0;return!1}eq(n){return this==n||this.type==n.type&&Dc(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let i in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let r=n.marks[i.type];if(!r)throw new RangeError(`There is no mark type ${i.type} in this schema`);return r.create(i.attrs)}static sameSet(n,i){if(n==i)return!0;if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].eq(i[r]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return t.none;if(n instanceof t)return[n];let i=n.slice();return i.sort((r,o)=>r.type.rank-o.type.rank),i}}return t.none=[],t})(),go=class extends Error{},W=class t{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=x_(this.content,e+this.openStart,n);return i&&new t(i,this.openStart,this.openEnd)}removeBetween(e,n){return new t(C_(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return t.empty;let i=n.openStart||0,r=n.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new t(L.fromJSON(e,n.content),i,r)}static maxOpen(e,n=!0){let i=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)i++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)r++;return new t(e,i,r)}};W.empty=new W(L.empty,0,0);function C_(t,e,n){let{index:i,offset:r}=t.findIndex(e),o=t.maybeChild(i),{index:l,offset:c}=t.findIndex(n);if(r==e||o.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,o.copy(C_(o.content,e-r-1,n-r-1)))}function x_(t,e,n,i){let{index:r,offset:o}=t.findIndex(e),l=t.maybeChild(r);if(o==e||l.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=x_(l.content,e-o-1,n);return c&&t.replaceChild(r,l.copy(c))}function eO(t,e,n){if(n.openStart>t.depth)throw new go("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new go("Inconsistent open depths");return T_(t,e,n,0)}function T_(t,e,n,i){let r=t.index(i),o=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let l=T_(t,e,n,i+1);return o.copy(o.content.replaceChild(r,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==i&&e.depth==i){let l=t.parent,c=l.content;return mo(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=tO(n,t);return mo(o,D_(t,l,c,e,i))}else return mo(o,Mc(t,e,i))}function S_(t,e){if(!e.type.compatibleContent(t.type))throw new go("Cannot join "+e.type.name+" onto "+t.type.name)}function Np(t,e,n){let i=t.node(n);return S_(i,e.node(n)),i}function fo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function wa(t,e,n,i){let r=(e||t).node(n),o=0,l=e?e.index(n):r.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(fo(t.nodeAfter,i),o++));for(let c=o;c<l;c++)fo(r.child(c),i);e&&e.depth==n&&e.textOffset&&fo(e.nodeBefore,i)}function mo(t,e){return t.type.checkContent(e),t.copy(e)}function D_(t,e,n,i,r){let o=t.depth>r&&Np(t,e,r+1),l=i.depth>r&&Np(n,i,r+1),c=[];return wa(null,t,r,c),o&&l&&e.index(r)==n.index(r)?(S_(o,l),fo(mo(o,D_(t,e,n,i,r+1)),c)):(o&&fo(mo(o,Mc(t,e,r+1)),c),wa(e,n,r,c),l&&fo(mo(l,Mc(n,i,r+1)),c)),wa(i,null,r,c),new L(c)}function Mc(t,e,n){let i=[];if(wa(null,t,n,i),t.depth>n){let r=Np(t,e,n+1);fo(mo(r,Mc(t,e,n+1)),i)}return wa(e,null,n,i),new L(i)}function tO(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(L.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}var kc=class t{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(n);return i?e.child(n).cut(i):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[n*3],r=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)r+=i.child(o).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Oe.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),r=e.maybeChild(n);if(!i){let c=i;i=r,r=c}let o=i.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!r||!o[l].isInSet(r.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!r||!i[o].isInSet(r.marks))&&(i=i[o--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new _o(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],r=0,o=n;for(let l=e;;){let{index:c,offset:u}=l.content.findIndex(o),p=o-u;if(i.push(l,c,r+u),!p||(l=l.child(c),l.isText))break;o=p-1,r+=u+1}return new t(n,i,o)}static resolveCached(e,n){for(let r=0;r<Op.length;r++){let o=Op[r];if(o.pos==n&&o.doc==e)return o}let i=Op[Ip]=t.resolve(e,n);return Ip=(Ip+1)%nO,i}},Op=[],Ip=0,nO=12,_o=class{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},iO=Object.create(null),gi=class t{constructor(e,n,i,r=Oe.none){this.type=e,this.attrs=n,this.marks=r,this.content=i||L.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,r=0){this.content.nodesBetween(e,n,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,r){return this.content.textBetween(e,n,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&Dc(this.attrs,n||e.defaultAttrs||iO)&&Oe.sameSet(this.marks,i||Oe.none)}copy(e=null){return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return W.empty;let r=this.resolve(e),o=this.resolve(n),l=i?0:r.sharedDepth(n),c=r.start(l),p=r.node(l).content.cut(r.pos-c,o.pos-c);return new W(p,r.depth-l,o.depth-l)}replace(e,n,i){return eO(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}}resolve(e){return kc.resolveCached(this,e)}resolveNoCache(e){return kc.resolve(this,e)}rangeHasMark(e,n,i){let r=!1;return n>e&&this.nodesBetween(e,n,o=>(i.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),M_(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=L.empty,r=0,o=i.childCount){let l=this.contentMatchAt(e).matchFragment(i,r,o),c=l&&l.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let u=r;u<o;u++)if(!this.type.allowsMarks(i.child(u).marks))return!1;return!0}canReplaceWith(e,n,i,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(i),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Oe.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Oe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let r=L.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,r,i)}};gi.prototype.text=void 0;var Pp=class t extends gi{constructor(e,n,i,r){if(super(e,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):M_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function M_(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var vo=class t{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new Rp(e,n);if(i.next==null)return t.empty;let r=k_(i);i.next&&i.err("Unexpected trailing text");let o=dO(cO(r));return uO(o,i),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let r=this;for(let o=n;r&&o<i;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let r=[this];function o(l,c){let u=l.matchFragment(e,i);if(u&&(!n||u.validEnd))return L.from(c.map(p=>p.createAndFill()));for(let p=0;p<l.next.length;p++){let{type:f,next:g}=l.next[p];if(!(f.isText||f.hasRequiredAttrs())&&r.indexOf(g)==-1){r.push(g);let y=o(g,c.concat(f));if(y)return y}}return null}return o(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),o=r.match;if(o.matchType(e)){let l=[];for(let c=r;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:c,next:u}=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!r.type||u.validEnd)&&(i.push({match:c.contentMatch,type:c,via:r}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&n(i.next[r].next)}return n(this),e.map((i,r)=>{let o=r+(i.validEnd?"*":" ")+" ";for(let l=0;l<i.next.length;l++)o+=(l?", ":"")+i.next[l].type.name+"->"+e.indexOf(i.next[l].next);return o}).join(`
`)}};vo.empty=new vo(!0);var Rp=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function k_(t){let e=[];do e.push(rO(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function rO(t){let e=[];do e.push(oO(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function oO(t){let e=lO(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=sO(t,e);else break;return e}function f_(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function sO(t,e){let n=f_(t),i=n;return t.eat(",")&&(t.next!="}"?i=f_(t):i=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function aO(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let o in n){let l=n[o];l.groups.indexOf(e)>-1&&r.push(l)}return r.length==0&&t.err("No node type or group '"+e+"' found"),r}function lO(t){if(t.eat("(")){let e=k_(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=aO(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function cO(t){let e=[[]];return r(o(t,0),n()),e;function n(){return e.push([])-1}function i(l,c,u){let p={term:u,to:c};return e[l].push(p),p}function r(l,c){l.forEach(u=>u.to=c)}function o(l,c){if(l.type=="choice")return l.exprs.reduce((u,p)=>u.concat(o(p,c)),[]);if(l.type=="seq")for(let u=0;;u++){let p=o(l.exprs[u],c);if(u==l.exprs.length-1)return p;r(p,c=n())}else if(l.type=="star"){let u=n();return i(c,u),r(o(l.expr,u),u),[i(u)]}else if(l.type=="plus"){let u=n();return r(o(l.expr,c),u),r(o(l.expr,u),u),[i(u)]}else{if(l.type=="opt")return[i(c)].concat(o(l.expr,c));if(l.type=="range"){let u=c;for(let p=0;p<l.min;p++){let f=n();r(o(l.expr,u),f),u=f}if(l.max==-1)r(o(l.expr,u),u);else for(let p=l.min;p<l.max;p++){let f=n();i(u,f),r(o(l.expr,u),f),u=f}return[i(u)]}else{if(l.type=="name")return[i(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function E_(t,e){return e-t}function m_(t,e){let n=[];return i(e),n.sort(E_);function i(r){let o=t[r];if(o.length==1&&!o[0].term)return i(o[0].to);n.push(r);for(let l=0;l<o.length;l++){let{term:c,to:u}=o[l];!c&&n.indexOf(u)==-1&&i(u)}}}function dO(t){let e=Object.create(null);return n(m_(t,0));function n(i){let r=[];i.forEach(l=>{t[l].forEach(({term:c,to:u})=>{if(!c)return;let p;for(let f=0;f<r.length;f++)r[f][0]==c&&(p=r[f][1]);m_(t,u).forEach(f=>{p||r.push([c,p=[]]),p.indexOf(f)==-1&&p.push(f)})})});let o=e[i.join(",")]=new vo(i.indexOf(t.length-1)>-1);for(let l=0;l<r.length;l++){let c=r[l][1].sort(E_);o.next.push({type:r[l][0],next:e[c.join(",")]||n(c)})}return o}}function uO(t,e){for(let n=0,i=[t];n<i.length;n++){let r=i[n],o=!r.validEnd,l=[];for(let c=0;c<r.next.length;c++){let{type:u,next:p}=r.next[c];l.push(u.name),o&&!(u.isText||u.hasRequiredAttrs())&&(o=!1),i.indexOf(p)==-1&&i.push(p)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function O_(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function I_(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(r===void 0){let o=t[i];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=r}return n}function A_(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Fp(t[n]);return e}var Ec=class t{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=A_(i.attrs),this.defaultAttrs=O_(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:I_(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gi(this,this.computeAttrs(e),L.from(n),Oe.setFrom(i))}createChecked(e=null,n,i){return n=L.from(n),this.checkContent(n),new gi(this,this.computeAttrs(e),n,Oe.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),n=L.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let r=this.contentMatch.matchFragment(n),o=r&&r.fillBefore(L.empty,!0);return o?new gi(this,e,n.append(o),Oe.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:Oe.none:e}static compile(e,n){let i=Object.create(null);e.forEach((o,l)=>i[o]=new t(o,n,l));let r=n.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let o in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}},Fp=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}},xa=class t{constructor(e,n,i,r){this.name=e,this.rank=n,this.schema=i,this.spec=r,this.attrs=A_(r.attrs),this.excluded=null;let o=O_(this.attrs);this.instance=o?new Oe(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Oe(this,I_(this.attrs,e))}static compile(e,n){let i=Object.create(null),r=0;return e.forEach((o,l)=>i[o]=new t(o,r++,n,l)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}},Oc=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=kp.from(e.nodes),n.marks=kp.from(e.marks||{}),this.nodes=Ec.compile(this.spec.nodes,this),this.marks=xa.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],l=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=i[l]||(i[l]=vo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?g_(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:g_(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Ec){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,r)}text(e,n){let i=this.nodes.text;return new Pp(i,i.defaultAttrs,e,Oe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return gi.fromJSON(this,e)}markFromJSON(e){return Oe.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function g_(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],o=t.marks[r],l=o;if(o)n.push(o);else for(let c in t.marks){let u=t.marks[c];(r=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(r)>-1)&&n.push(l=u)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}function pO(t){return t.tag!=null}function hO(t){return t.style!=null}var Or=class t{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(i=>{pO(i)?this.tags.push(i):hO(i)&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let r=e.nodes[i.node];return r.contentMatch.matchType(r)})}parse(e,n={}){let i=new Nc(this,n,!1);return i.addAll(e,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new Nc(this,n,!0);return i.addAll(e,n.from,n.to),W.maxOpen(i.finish())}matchTag(e,n,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(gO(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,i,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let l=this.styles[o],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!i.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(l.getAttrs){let u=l.getAttrs(n);if(u===!1)continue;l.attrs=u||void 0}return l}}}static schemaRules(e){let n=[];function i(r){let o=r.priority==null?50:r.priority,l=0;for(;l<n.length;l++){let c=n[l];if((c.priority==null?50:c.priority)<o)break}n.splice(l,0,r)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(l=>{i(l=v_(l)),l.mark||l.ignore||l.clearMark||(l.mark=r)})}for(let r in e.nodes){let o=e.nodes[r].spec.parseDOM;o&&o.forEach(l=>{i(l=v_(l)),l.node||l.ignore||l.mark||(l.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}},N_={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},fO={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},P_={ol:!0,ul:!0},Ic=1,Ac=2,Ca=4;function __(t,e,n){return e!=null?(e?Ic:0)|(e==="full"?Ac:0):t&&t.whitespace=="pre"?Ic|Ac:n&~Ca}var vs=class{constructor(e,n,i,r,o,l,c){this.type=e,this.attrs=n,this.marks=i,this.pendingMarks=r,this.solid=o,this.options=c,this.content=[],this.activeMarks=Oe.none,this.stashMarks=[],this.match=l||(c&Ca?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(L.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ic)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let o=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let n=L.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(L.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,i=this.pendingMarks;n<i.length;n++){let r=i[n];(this.type?this.type.allowsMarkType(r.type):_O(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!N_.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},Nc=class{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0;let r=n.topNode,o,l=__(null,n.preserveWhitespace,0)|(i?Ca:0);r?o=new vs(r.type,r.attrs,Oe.none,Oe.none,!0,n.topMatch||r.type.contentMatch,l):i?o=new vs(null,null,Oe.none,Oe.none,!0,null,l):o=new vs(e.schema.topNodeType,null,Oe.none,Oe.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let i=e.style;if(!i||!i.length)return n();let r=this.readStyles(e.style);if(!r)return;let[o,l]=r,c=this.top;for(let u=0;u<l.length;u++)this.removePendingMark(l[u],c);for(let u=0;u<o.length;u++)this.addPendingMark(o[u]);n();for(let u=0;u<o.length;u++)this.removePendingMark(o[u],c);for(let u=0;u<l.length;u++)this.addPendingMark(l[u])}addTextNode(e){let n=e.nodeValue,i=this.top;if(i.options&Ac||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i.options&Ic)i.options&Ac?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let r=i.content[i.content.length-1],o=e.previousSibling;(!r||o&&o.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let i=e.nodeName.toLowerCase(),r;P_.hasOwnProperty(i)&&this.parser.normalizeLists&&mO(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,n));if(o?o.ignore:fO.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let l,c=this.top,u=this.needsBlock;if(N_.hasOwnProperty(i))c.content.length&&c.content[0].isInline&&this.open&&(this.open--,c=this.top),l=!0,c.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}o&&o.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),l&&this.sync(c),this.needsBlock=u}else this.withStyleRules(e,()=>{this.addElementByRule(e,o,o.consuming===!1?r:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Oe.none,i=Oe.none;for(let r=0,o=e.length;r<o;r++){let l=e.item(r);for(let c=void 0;;){let u=this.parser.matchStyle(l,e.getPropertyValue(l),this,c);if(!u)break;if(u.ignore)return null;if(u.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(p=>{u.clearMark(p)&&(i=p.addToSet(i))}):n=this.parser.schema.marks[u.mark].create(u.attrs).addToSet(n),u.consuming===!1)c=u;else break}}return[n,i]}addElementByRule(e,n,i){let r,o,l;n.node?(o=this.parser.schema.nodes[n.node],o.isLeaf?this.insertNode(o.create(n.attrs))||this.leafFallback(e):r=this.enter(o,n.attrs||null,n.preserveWhitespace)):(l=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(l));let c=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u)}r&&this.sync(c)&&this.open--,l&&this.removePendingMark(l,c)}addAll(e,n,i){let r=n||0;for(let o=n?e.childNodes[n]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}findPlace(e){let n,i;for(let r=this.open;r>=0;r--){let o=this.nodes[r],l=o.findWrapping(e);if(l&&(!n||n.length>l.length)&&(n=l,i=o,!l.length)||o.solid)break}if(!n)return!1;this.sync(i);for(let r=0;r<n.length;r++)this.enterInner(n[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let i=n.activeMarks;for(let r=0;r<e.marks.length;r++)(!n.type||n.type.allowsMarkType(e.marks[r].type))&&(i=e.marks[r].addToSet(i));return n.content.push(e.mark(i)),!0}return!1}enter(e,n,i){let r=this.findPlace(e.create(n));return r&&this.enterInner(e,n,!0,i),r}enterInner(e,n=null,i=!1,r){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let l=__(e,r,o.options);o.options&Ca&&o.content.length==0&&(l|=Ca),this.nodes.push(new vs(e,n,o.activeMarks,o.pendingMarks,i,null,l)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),o=-(i?i.depth+1:0)+(r?0:1),l=(c,u)=>{for(;c>=0;c--){let p=n[c];if(p==""){if(c==n.length-1||c==0)continue;for(;u>=o;u--)if(l(c-1,u))return!0;return!1}else{let f=u>0||u==0&&r?this.nodes[u].type:i&&u>=o?i.node(u-o).type:null;if(!f||f.name!=p&&f.groups.indexOf(p)==-1)return!1;u--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(e){let n=vO(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let i=this.open;i>=0;i--){let r=this.nodes[i];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let l=r.popFromStashMark(e);l&&r.type&&r.type.allowsMarkType(l.type)&&(r.activeMarks=l.addToSet(r.activeMarks))}if(r==n)break}}};function mO(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&P_.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):i=="li"?n=e:i&&(n=null)}}function gO(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function v_(t){let e={};for(let n in t)e[n]=t[n];return e}function _O(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let o=[],l=c=>{o.push(c);for(let u=0;u<c.edgeCount;u++){let{type:p,next:f}=c.edge(u);if(p==e||o.indexOf(f)<0&&l(f))return!0}};if(l(r.contentMatch))return!0}}function vO(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var Ki=class t{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=Ap(n).createDocumentFragment());let r=i,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let c=0,u=0;for(;c<o.length&&u<l.marks.length;){let p=l.marks[u];if(!this.marks[p.type.name]){u++;continue}if(!p.eq(o[c][0])||p.type.spec.spanning===!1)break;c++,u++}for(;c<o.length;)r=o.pop()[1];for(;u<l.marks.length;){let p=l.marks[u++],f=this.serializeMark(p,l.isInline,n);f&&(o.push([p,r]),r.appendChild(f.dom),r=f.contentDOM||f.dom)}}r.appendChild(this.serializeNodeInner(l,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:r}=t.renderSpec(Ap(n),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(i),i=o.dom)}return i}serializeMark(e,n,i={}){let r=this.marks[e.type.name];return r&&t.renderSpec(Ap(i),r(e,n))}static renderSpec(e,n,i=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let r=n[0],o=r.indexOf(" ");o>0&&(i=r.slice(0,o),r=r.slice(o+1));let l,c=i?e.createElementNS(i,r):e.createElement(r),u=n[1],p=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){p=2;for(let f in u)if(u[f]!=null){let g=f.indexOf(" ");g>0?c.setAttributeNS(f.slice(0,g),f.slice(g+1),u[f]):c.setAttribute(f,u[f])}}for(let f=p;f<n.length;f++){let g=n[f];if(g===0){if(f<n.length-1||f>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:y,contentDOM:b}=t.renderSpec(e,g,i);if(c.appendChild(y),b){if(l)throw new RangeError("Multiple content holes");l=b}}}return{dom:c,contentDOM:l}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=y_(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return y_(e.marks)}};function y_(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function Ap(t){return t.document||window.document}var B_=65535,V_=Math.pow(2,16);function yO(t,e){return t+e*V_}function R_(t){return t&B_}function bO(t){return(t-(t&B_))/V_}var L_=1,H_=2,Pc=4,z_=8,Da=class{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&z_)>0}get deletedBefore(){return(this.delInfo&(L_|Pc))>0}get deletedAfter(){return(this.delInfo&(H_|Pc))>0}get deletedAcross(){return(this.delInfo&Pc)>0}},Yi=class t{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}recover(e){let n=0,i=R_(e);if(!this.inverted)for(let r=0;r<i;r++)n+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+n+bO(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let r=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?r:0);if(u>e)break;let p=this.ranges[c+o],f=this.ranges[c+l],g=u+p;if(e<=g){let y=p?e==u?-1:e==g?1:n:n,b=u+r+(y<0?0:f);if(i)return b;let C=e==(n<0?u:g)?null:yO(c/3,e-u),M=e==u?H_:e==g?L_:Pc;return(n<0?e!=u:e!=g)&&(M|=z_),new Da(b,M,C)}r+=f-p}return i?e+r:new Da(e+r,0,null)}touches(e,n){let i=0,r=R_(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let u=this.ranges[c]-(this.inverted?i:0);if(u>e)break;let p=this.ranges[c+o],f=u+p;if(e<=f&&c==r*3)return!0;i+=this.ranges[c+l]-p}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let l=this.ranges[r],c=l-(this.inverted?o:0),u=l+(this.inverted?0:o),p=this.ranges[r+n],f=this.ranges[r+i];e(c,c+p,u,u+f),o+=f-p}}invert(){return new t(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}};Yi.empty=new Yi([]);var Ma=class t{constructor(e=[],n,i=0,r=e.length){this.maps=e,this.mirror=n,this.from=i,this.to=r}slice(e=0,n=this.maps.length){return new t(this.maps,this.mirror,e,n)}copy(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,i=this.maps.length;n<e.maps.length;n++){let r=e.getMirror(n);this.appendMap(e.maps[n],r!=null&&r<n?i+r:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this.maps.length+e.maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e.maps[n].invert(),r!=null&&r>n?i-r-1:void 0)}}invert(){let e=new t;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let r=0;for(let o=this.from;o<this.to;o++){let l=this.maps[o],c=l.mapResult(e,n);if(c.recover!=null){let u=this.getMirror(o);if(u!=null&&u>o&&u<this.to){o=u,e=this.maps[u].recover(c.recover);continue}}r|=c.delInfo,e=c.pos}return i?e:new Da(e,r,null)}},Bp=Object.create(null),ht=class{getMap(){return Yi.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Bp[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in Bp)throw new RangeError("Duplicate use of step JSON ID "+e);return Bp[e]=n,n.prototype.jsonID=e,n}},wt=class t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new t(e,null)}static fail(e){return new t(null,e)}static fromReplace(e,n,i,r){try{return t.ok(e.replace(n,i,r))}catch(o){if(o instanceof go)return t.fail(o.message);throw o}}};function Wp(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(Wp(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return L.fromArray(i)}var ka=class t extends ht{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new W(Wp(n.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),r),n.openStart,n.openEnd);return wt.fromReplace(e,this.from,this.to,o)}invert(){return new yo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};ht.jsonID("addMark",ka);var yo=class t extends ht{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new W(Wp(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return wt.fromReplace(e,this.from,this.to,i)}invert(){return new ka(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};ht.jsonID("removeMark",yo);var Ea=class t extends ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return wt.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return wt.fromReplace(e,this.pos,this.pos+1,new W(L.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(i))return new t(this.pos,n.marks[r]);return new t(this.pos,this.mark)}}return new Oa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};ht.jsonID("addNodeMark",Ea);var Oa=class t extends ht{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return wt.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return wt.fromReplace(e,this.pos,this.pos+1,new W(L.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ea(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};ht.jsonID("removeNodeMark",Oa);var yn=class t extends ht{constructor(e,n,i,r=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=r}apply(e){return this.structure&&Hp(e,this.from,this.to)?wt.fail("Structure replace would overwrite content"):wt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Yi([this.from,this.to-this.from,this.slice.size])}invert(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new t(n.pos,Math.max(n.pos,i.pos),this.slice)}merge(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?W.empty:new W(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?W.empty:new W(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,W.fromJSON(e,n.slice),!!n.structure)}};ht.jsonID("replace",yn);var ft=class t extends ht{constructor(e,n,i,r,o,l,c=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=l,this.structure=c}apply(e){if(this.structure&&(Hp(e,this.from,this.gapFrom)||Hp(e,this.gapTo,this.to)))return wt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return wt.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?wt.fromReplace(e,this.from,this.to,i):wt.fail("Content does not fit in gap")}getMap(){return new Yi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||o>i.pos?null:new t(n.pos,i.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,W.fromJSON(e,n.slice),n.insert,!!n.structure)}};ht.jsonID("replaceAround",ft);function Hp(t,e,n){let i=t.resolve(e),r=n-e,o=i.depth;for(;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0){let l=i.node(o).maybeChild(i.indexAfter(o));for(;r>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,r--}}return!1}function wO(t,e,n,i){let r=[],o=[],l,c;t.doc.nodesBetween(e,n,(u,p,f)=>{if(!u.isInline)return;let g=u.marks;if(!i.isInSet(g)&&f.type.allowsMarkType(i.type)){let y=Math.max(p,e),b=Math.min(p+u.nodeSize,n),C=i.addToSet(g);for(let M=0;M<g.length;M++)g[M].isInSet(C)||(l&&l.to==y&&l.mark.eq(g[M])?l.to=b:r.push(l=new yo(y,b,g[M])));c&&c.to==y?c.to=b:o.push(c=new ka(y,b,i))}}),r.forEach(u=>t.step(u)),o.forEach(u=>t.step(u))}function CO(t,e,n,i){let r=[],o=0;t.doc.nodesBetween(e,n,(l,c)=>{if(!l.isInline)return;o++;let u=null;if(i instanceof xa){let p=l.marks,f;for(;f=i.isInSet(p);)(u||(u=[])).push(f),p=f.removeFromSet(p)}else i?i.isInSet(l.marks)&&(u=[i]):u=l.marks;if(u&&u.length){let p=Math.min(c+l.nodeSize,n);for(let f=0;f<u.length;f++){let g=u[f],y;for(let b=0;b<r.length;b++){let C=r[b];C.step==o-1&&g.eq(r[b].style)&&(y=C)}y?(y.to=p,y.step=o):r.push({style:g,from:Math.max(c,e),to:p,step:o})}}}),r.forEach(l=>t.step(new yo(l.from,l.to,l.style)))}function W_(t,e,n,i=n.contentMatch,r=!0){let o=t.doc.nodeAt(e),l=[],c=e+1;for(let u=0;u<o.childCount;u++){let p=o.child(u),f=c+p.nodeSize,g=i.matchType(p.type);if(!g)l.push(new yn(c,f,W.empty));else{i=g;for(let y=0;y<p.marks.length;y++)n.allowsMarkType(p.marks[y].type)||t.step(new yo(c,f,p.marks[y]));if(r&&p.isText&&n.whitespace!="pre"){let y,b=/\r?\n|\r/g,C;for(;y=b.exec(p.text);)C||(C=new W(L.from(n.schema.text(" ",n.allowedMarks(p.marks))),0,0)),l.push(new yn(c+y.index,c+y.index+y[0].length,C))}}c=f}if(!i.validEnd){let u=i.fillBefore(L.empty,!0);t.replace(c,c,new W(u,0,0))}for(let u=l.length-1;u>=0;u--)t.step(l[u])}function xO(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function bo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let r=t.$from.node(i),o=t.$from.index(i),l=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(o,l,n))return i;if(i==0||r.type.spec.isolating||!xO(r,o,l))break}return null}function TO(t,e,n){let{$from:i,$to:r,depth:o}=e,l=i.before(o+1),c=r.after(o+1),u=l,p=c,f=L.empty,g=0;for(let C=o,M=!1;C>n;C--)M||i.index(C)>0?(M=!0,f=L.from(i.node(C).copy(f)),g++):u--;let y=L.empty,b=0;for(let C=o,M=!1;C>n;C--)M||r.after(C+1)<r.end(C)?(M=!0,y=L.from(r.node(C).copy(y)),b++):p++;t.step(new ft(u,p,l,c,new W(f.append(y),g,b),f.size-g,!0))}function bs(t,e,n=null,i=t){let r=SO(t,e),o=r&&DO(i,e);return o?r.map(F_).concat({type:e,attrs:n}).concat(o.map(F_)):null}function F_(t){return{type:t,attrs:null}}function SO(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.contentMatchAt(i).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(i,r,l)?o:null}function DO(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.child(i),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let u=(l.length?l[l.length-1]:e).contentMatch;for(let p=i;u&&p<r;p++)u=u.matchType(n.child(p).type);return!u||!u.validEnd?null:l}function MO(t,e,n){let i=L.empty;for(let l=n.length-1;l>=0;l--){if(i.size){let c=n[l].type.contentMatch.matchFragment(i);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=L.from(n[l].type.create(n[l].attrs,i))}let r=e.start,o=e.end;t.step(new ft(r,o,r,o,new W(i,0,0),n.length,!0))}function kO(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,c)=>{if(l.isTextblock&&!l.hasMarkup(i,r)&&IO(t.doc,t.mapping.slice(o).map(c),i)){let u=null;if(i.schema.linebreakReplacement){let y=i.whitespace=="pre",b=!!i.contentMatch.matchType(i.schema.linebreakReplacement);y&&!b?u=!1:!y&&b&&(u=!0)}u===!1&&OO(t,l,c,o),W_(t,t.mapping.slice(o).map(c,1),i,void 0,u===null);let p=t.mapping.slice(o),f=p.map(c,1),g=p.map(c+l.nodeSize,1);return t.step(new ft(f,g,f+1,g-1,new W(L.from(i.create(r,null,l.marks)),0,0),1,!0)),u===!0&&EO(t,l,c,o),!1}})}function EO(t,e,n,i){e.forEach((r,o)=>{if(r.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(r.text);){let u=t.mapping.slice(i).map(n+1+o+l.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function OO(t,e,n,i){e.forEach((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let l=t.mapping.slice(i).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function IO(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}function AO(t,e,n,i,r){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(i,null,r||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ft(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new W(L.from(l),0,0),1,!0))}function Ir(t,e,n=1,i){let r=t.resolve(e),o=r.depth-n,l=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!l.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let p=r.depth-1,f=n-2;p>o;p--,f--){let g=r.node(p),y=r.index(p);if(g.type.spec.isolating)return!1;let b=g.content.cutByIndex(y,g.childCount),C=i&&i[f+1];C&&(b=b.replaceChild(0,C.type.create(C.attrs)));let M=i&&i[f]||g;if(!g.canReplace(y+1,g.childCount)||!M.type.validContent(b))return!1}let c=r.indexAfter(o),u=i&&i[0];return r.node(o).canReplaceWith(c,c,u?u.type:r.node(o+1).type)}function NO(t,e,n=1,i){let r=t.doc.resolve(e),o=L.empty,l=L.empty;for(let c=r.depth,u=r.depth-n,p=n-1;c>u;c--,p--){o=L.from(r.node(c).copy(o));let f=i&&i[p];l=L.from(f?f.type.create(f.attrs,l):r.node(c).copy(l))}t.step(new yn(e,e,new W(o.append(l),n,n),!0))}function wo(t,e){let n=t.resolve(e),i=n.index();return PO(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function PO(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function RO(t,e,n){let i=new yn(e-n,e+n,W.empty,!0);t.step(i)}function FO(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let o=i.index(r);if(i.node(r).canReplaceWith(o,o,n))return i.before(r+1);if(o>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let o=i.indexAfter(r);if(i.node(r).canReplaceWith(o,o,n))return i.after(r+1);if(o<i.node(r).childCount)return null}return null}function G_(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let o=0;o<n.openStart;o++)r=r.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=i.depth;l>=0;l--){let c=l==i.depth?0:i.pos<=(i.start(l+1)+i.end(l+1))/2?-1:1,u=i.index(l)+(c>0?1:0),p=i.node(l),f=!1;if(o==1)f=p.canReplace(u,u,r);else{let g=p.contentMatchAt(u).findWrapping(r.firstChild.type);f=g&&p.canReplaceWith(u,u,g[0])}if(f)return c==0?i.pos:c<0?i.before(l+1):i.after(l+1)}return null}function Vc(t,e,n=e,i=W.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),o=t.resolve(n);return j_(r,o,i)?new yn(e,n,i):new zp(r,o,i).fit()}function j_(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}var zp=class{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=L.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=L.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let o=this.placed,l=i.depth,c=r.depth;for(;l&&c&&o.childCount==1;)o=o.firstChild.content,l--,c--;let u=new W(o,l,c);return e>-1?new ft(i.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||i.pos!=this.$to.pos?new yn(i.pos,r.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let o=n.firstChild;if(n.childCount>1&&(r=0),o.type.spec.isolating&&r<=i){e=i;break}n=o.content}for(let n=1;n<=2;n++)for(let i=n==1?e:this.unplaced.openStart;i>=0;i--){let r,o=null;i?(o=Vp(this.unplaced.content,i-1).firstChild,r=o.content):r=this.unplaced.content;let l=r.firstChild;for(let c=this.depth;c>=0;c--){let{type:u,match:p}=this.frontier[c],f,g=null;if(n==1&&(l?p.matchType(l.type)||(g=p.fillBefore(L.from(l),!1)):o&&u.compatibleContent(o.type)))return{sliceDepth:i,frontierDepth:c,parent:o,inject:g};if(n==2&&l&&(f=p.findWrapping(l.type)))return{sliceDepth:i,frontierDepth:c,parent:o,wrap:f};if(o&&p.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=Vp(e,n);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new W(e,n+1,Math.max(i,r.size+n>=e.size-i?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=Vp(e,n);if(r.childCount<=1&&n>0){let o=e.size-n<=n+r.size;this.unplaced=new W(Ta(e,n-1,1),n-1,o?n-1:i)}else this.unplaced=new W(Ta(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:r,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let M=0;M<o.length;M++)this.openFrontierNode(o[M]);let l=this.unplaced,c=i?i.content:l.content,u=l.openStart-e,p=0,f=[],{match:g,type:y}=this.frontier[n];if(r){for(let M=0;M<r.childCount;M++)f.push(r.child(M));g=g.matchFragment(r)}let b=c.size+e-(l.content.size-l.openEnd);for(;p<c.childCount;){let M=c.child(p),A=g.matchType(M.type);if(!A)break;p++,(p>1||u==0||M.content.size)&&(g=A,f.push($_(M.mark(y.allowedMarks(M.marks)),p==1?u:0,p==c.childCount?b:-1)))}let C=p==c.childCount;C||(b=-1),this.placed=Sa(this.placed,n,L.from(f)),this.frontier[n].match=g,C&&b<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let M=0,A=c;M<b;M++){let V=A.lastChild;this.frontier.push({type:V.type,match:V.contentMatchAt(V.childCount)}),A=V.content}this.unplaced=C?e==0?W.empty:new W(Ta(l.content,e-1,1),e-1,b<0?l.openEnd:e-1):new W(Ta(l.content,e,p),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Lp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:r}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=Lp(e,n,r,i,o);if(l){for(let c=n-1;c>=0;c--){let{match:u,type:p}=this.frontier[c],f=Lp(e,c,p,u,!0);if(!f||f.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Sa(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let r=e.node(i),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,n=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Sa(this.placed,this.depth,L.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(L.empty,!0);n.childCount&&(this.placed=Sa(this.placed,this.frontier.length,n))}};function Ta(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ta(t.firstChild.content,e-1,n)))}function Sa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Sa(t.lastChild.content,e-1,n)))}function Vp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function $_(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,$_(i.firstChild,e-1,i.childCount==1?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(L.empty,!0)))),t.copy(i)}function Lp(t,e,n,i,r){let o=t.node(e),l=r?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let c=i.fillBefore(o.content,!0,l);return c&&!BO(n,o.content,l)?c:null}function BO(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}function VO(t){return t.spec.defining||t.spec.definingForContent}function LO(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),o=t.doc.resolve(n);if(j_(r,o,i))return t.step(new yn(e,n,i));let l=q_(r,t.doc.resolve(n));l[l.length-1]==0&&l.pop();let c=-(r.depth+1);l.unshift(c);for(let y=r.depth,b=r.pos-1;y>0;y--,b--){let C=r.node(y).type.spec;if(C.defining||C.definingAsContext||C.isolating)break;l.indexOf(y)>-1?c=y:r.before(y)==b&&l.splice(1,0,-y)}let u=l.indexOf(c),p=[],f=i.openStart;for(let y=i.content,b=0;;b++){let C=y.firstChild;if(p.push(C),b==i.openStart)break;y=C.content}for(let y=f-1;y>=0;y--){let b=p[y],C=VO(b.type);if(C&&!b.sameMarkup(r.node(Math.abs(c)-1)))f=y;else if(C||!b.type.isTextblock)break}for(let y=i.openStart;y>=0;y--){let b=(y+f+1)%(i.openStart+1),C=p[b];if(C)for(let M=0;M<l.length;M++){let A=l[(M+u)%l.length],V=!0;A<0&&(V=!1,A=-A);let se=r.node(A-1),ue=r.index(A-1);if(se.canReplaceWith(ue,ue,C.type,C.marks))return t.replace(r.before(A),V?o.after(A):n,new W(U_(i.content,0,i.openStart,b),b,i.openEnd))}}let g=t.steps.length;for(let y=l.length-1;y>=0&&(t.replace(e,n,i),!(t.steps.length>g));y--){let b=l[y];b<0||(e=r.before(b),n=o.after(b))}}function U_(t,e,n,i,r){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(U_(o.content,e+1,n,i,o)))}if(e>i){let o=r.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(L.empty,!0))}return t}function HO(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=FO(t.doc,e,i.type);r!=null&&(e=n=r)}t.replaceRange(e,n,new W(L.from(i),0,0))}function zO(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),o=q_(i,r);for(let l=0;l<o.length;l++){let c=o[l],u=l==o.length-1;if(u&&c==0||i.node(c).type.contentMatch.validEnd)return t.delete(i.start(c),r.end(c));if(c>0&&(u||i.node(c-1).canReplace(i.index(c-1),r.indexAfter(c-1))))return t.delete(i.before(c),r.after(c))}for(let l=1;l<=i.depth&&l<=r.depth;l++)if(e-i.start(l)==i.depth-l&&n>i.end(l)&&r.end(l)-n!=r.depth-l)return t.delete(i.before(l),n);t.delete(e,n)}function q_(t,e){let n=[],i=Math.min(t.depth,e.depth);for(let r=i;r>=0;r--){let o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}var Rc=class t extends ht{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return wt.fail("No node at attribute step's position");let i=Object.create(null);for(let o in n.attrs)i[o]=n.attrs[o];i[this.attr]=this.value;let r=n.type.create(i,null,n.marks);return wt.fromReplace(e,this.pos,this.pos+1,new W(L.from(r),0,n.isLeaf?0:1))}getMap(){return Yi.empty}invert(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}};ht.jsonID("attr",Rc);var Fc=class t extends ht{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,e.content,e.marks);return wt.ok(i)}getMap(){return Yi.empty}invert(e){return new t(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}};ht.jsonID("docAttr",Fc);var ys=class extends Error{};ys=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ys.prototype=Object.create(Error.prototype);ys.prototype.constructor=ys;ys.prototype.name="TransformError";var Bc=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ma}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ys(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=W.empty){let r=Vc(this.doc,e,n,i);return r&&this.step(r),this}replaceWith(e,n,i){return this.replace(e,n,new W(L.from(i),0,0))}delete(e,n){return this.replace(e,n,W.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return LO(this,e,n,i),this}replaceRangeWith(e,n,i){return HO(this,e,n,i),this}deleteRange(e,n){return zO(this,e,n),this}lift(e,n){return TO(this,e,n),this}join(e,n=1){return RO(this,e,n),this}wrap(e,n){return MO(this,e,n),this}setBlockType(e,n=e,i,r=null){return kO(this,e,n,i,r),this}setNodeMarkup(e,n,i=null,r){return AO(this,e,n,i,r),this}setNodeAttribute(e,n,i){return this.step(new Rc(e,n,i)),this}setDocAttribute(e,n){return this.step(new Fc(e,n)),this}addNodeMark(e,n){return this.step(new Ea(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Oe)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(n=n.isInSet(i.marks),!n)return this}return this.step(new Oa(e,n)),this}split(e,n=1,i){return NO(this,e,n,i),this}addMark(e,n,i){return wO(this,e,n,i),this}removeMark(e,n,i){return CO(this,e,n,i),this}clearIncompatible(e,n,i){return W_(this,e,n,i),this}};var Gp=Object.create(null),me=class{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new $p(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=W.empty){let i=n.content.lastChild,r=null;for(let c=0;c<n.openEnd;c++)r=i,i=i.lastChild;let o=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:u,$to:p}=l[c],f=e.mapping.slice(o);e.replaceRange(f.map(u.pos),f.map(p.pos),c?W.empty:n),c==0&&Y_(e,o,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:l,$to:c}=r[o],u=e.mapping.slice(i),p=u.map(l.pos),f=u.map(c.pos);o?e.deleteRange(p,f):(e.replaceRangeWith(p,f,n),Y_(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let r=e.parent.inlineContent?new Ne(e):ws(e.node(0),e.parent,e.pos,e.index(),n,i);if(r)return r;for(let o=e.depth-1;o>=0;o--){let l=n<0?ws(e.node(0),e.node(o),e.before(o+1),e.index(o),n,i):ws(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,i);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new bn(e.node(0))}static atStart(e){return ws(e,e,0,0,1)||new bn(e)}static atEnd(e){return ws(e,e,e.content.size,e.childCount,-1)||new bn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Gp[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in Gp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ne.between(this.$anchor,this.$head).getBookmark()}};me.prototype.visible=!0;var $p=class{constructor(e,n){this.$from=e,this.$to=n}},J_=!1;function K_(t){!J_&&!t.parent.inlineContent&&(J_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var Ne=class t extends me{constructor(e,n=e){K_(e),K_(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return me.near(i);let r=e.resolve(n.map(this.anchor));return new t(r.parent.inlineContent?r:i,i)}replace(e,n=W.empty){if(super.replace(e,n),n==W.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Hc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let r=e.resolve(n);return new this(r,i==n?r:e.resolve(i))}static between(e,n,i){let r=e.pos-n.pos;if((!i||r)&&(i=r>=0?1:-1),!n.parent.inlineContent){let o=me.findFrom(n,i,!0)||me.findFrom(n,-i,!0);if(o)n=o.$head;else return me.near(n,i)}return e.parent.inlineContent||(r==0?e=n:(e=(me.findFrom(e,-i,!0)||me.findFrom(e,i,!0)).$anchor,e.pos<n.pos!=r<0&&(e=n))),new t(e,n)}};me.jsonID("text",Ne);var Hc=class t{constructor(e,n){this.anchor=e,this.head=n}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(e){return Ne.between(e.resolve(this.anchor),e.resolve(this.head))}},ie=class t extends me{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:r}=n.mapResult(this.anchor),o=e.resolve(r);return i?me.near(o):new t(o)}content(){return new W(L.from(this.node),0,0)}eq(e){return e instanceof t&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Up(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}static create(e,n){return new t(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};ie.prototype.visible=!1;me.jsonID("node",ie);var Up=class t{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new Hc(i,i):new t(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&ie.isSelectable(i)?new ie(n):me.near(n)}},bn=class t extends me{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=W.empty){if(n==W.empty){e.delete(0,e.doc.content.size);let i=me.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new t(e)}map(e){return new t(e)}eq(e){return e instanceof t}getBookmark(){return WO}};me.jsonID("all",bn);var WO={map(){return this},resolve(t){return new bn(t)}};function ws(t,e,n,i,r,o=!1){if(e.inlineContent)return Ne.create(t,n);for(let l=i-(r>0?0:1);r>0?l<e.childCount:l>=0;l+=r){let c=e.child(l);if(c.isAtom){if(!o&&ie.isSelectable(c))return ie.create(t,n-(r<0?c.nodeSize:0))}else{let u=ws(t,c,n+r,r<0?c.childCount:0,r,o);if(u)return u}n+=c.nodeSize*r}return null}function Y_(t,e,n){let i=t.steps.length-1;if(i<e)return;let r=t.steps[i];if(!(r instanceof yn||r instanceof ft))return;let o=t.mapping.maps[i],l;o.forEach((c,u,p,f)=>{l==null&&(l=f)}),t.setSelection(me.near(t.doc.resolve(l),n))}var Q_=1,Lc=2,Z_=4,qp=class extends Bc{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Q_)&~Lc,this.storedMarks=null,this}get selectionSet(){return(this.updated&Q_)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Lc,this}ensureMarks(e){return Oe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Lc)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Lc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Oe.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let r=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=n),i=i??n,!e)return this.deleteRange(n,i);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=i==n?l.marks():l.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,r.text(e,o)),this.selection.empty||this.setSelection(me.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Z_,this}get scrolledIntoView(){return(this.updated&Z_)>0}};function X_(t,e){return!e||!t?t:t.bind(e)}var Co=class{constructor(e,n,i){this.name=e,this.init=X_(n.init,i),this.apply=X_(n.apply,i)}},GO=[new Co("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Co("selection",{init(t,e){return t.selection||me.atStart(e.doc)},apply(t){return t.selection}}),new Co("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new Co("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})],Ia=class{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=GO.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Co(i.key,i.spec.state,i))})}},zc=class t{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),r=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let u=r?r[l].n:0,p=r?r[l].state:this,f=u<n.length&&c.spec.appendTransaction.call(c,u?n.slice(u):n,p,i);if(f&&i.filterTransaction(f,l)){if(f.setMeta("appendedTransaction",e),!r){r=[];for(let g=0;g<this.config.plugins.length;g++)r.push(g<l?{state:i,n:n.length}:{state:this,n:0})}n.push(f),i=i.applyInner(f),o=!0}r&&(r[l]={state:i,n:n.length})}}if(!o)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new t(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let o=i[r];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new qp(this)}static create(e){let n=new Ia(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new t(n);for(let r=0;r<n.fields.length;r++)i[n.fields[r].name]=n.fields[r].init(e,i);return i}reconfigure(e){let n=new Ia(this.schema,e.plugins),i=n.fields,r=new t(n);for(let o=0;o<i.length;o++){let l=i[o].name;r[l]=this.hasOwnProperty(l)?this[l]:i[o].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],o=r.spec.state;o&&o.toJSON&&(n[i]=o.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Ia(e.schema,e.plugins),o=new t(r);return r.fields.forEach(l=>{if(l.name=="doc")o.doc=gi.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=me.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let c in i){let u=i[c],p=u.spec.state;if(u.key==l.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){o[l.name]=p.fromJSON.call(u,e,n[c],o);return}}o[l.name]=l.init(e,o)}}),o}};function e1(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=e1(r,e,{})),n[i]=r}return n}var At=class{constructor(e){this.spec=e,this.props={},e.props&&e1(e.props,this,this.props),this.key=e.key?e.key.key:t1("plugin")}getState(e){return e[this.key]}},jp=Object.create(null);function t1(t){return t in jp?t+"$"+ ++jp[t]:(jp[t]=0,t+"$")}var wn=class{constructor(e="key"){this.key=t1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var Ct=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ra=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e},Zp=null,Zi=function(t,e,n){let i=Zp||(Zp=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},jO=function(){Zp=null},Eo=function(t,e,n,i){return n&&(n1(t,e,n,i,-1)||n1(t,e,n,i,1))},$O=/^(img|br|input|textarea|hr)$/i;function n1(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:_i(t))){let o=t.parentNode;if(!o||o.nodeType!=1||La(t)||$O.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ct(t)+(r<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.contentEditable=="false")return!1;e=r<0?_i(t):0}else return!1}}function _i(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function UO(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=_i(t)}else if(t.parentNode&&!La(t))e=Ct(t),t=t.parentNode;else return null}}function qO(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!La(t))e=Ct(t)+1,t=t.parentNode;else return null}}function JO(t,e,n){for(let i=e==0,r=e==_i(t);i||r;){if(t==n)return!0;let o=Ct(t);if(t=t.parentNode,!t)return!1;i=i&&o==0,r=r&&o==_i(t)}}function La(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Zc=function(t){return t.focusNode&&Eo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function xo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function KO(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function YO(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:i.offset}}catch{}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:i.startOffset}}}var vi=typeof navigator<"u"?navigator:null,i1=typeof document<"u"?document:null,Br=vi&&vi.userAgent||"",Xp=/Edge\/(\d+)/.exec(Br),R1=/MSIE \d/.exec(Br),eh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Br),tn=!!(R1||eh||Xp),Rr=R1?document.documentMode:eh?+eh[1]:Xp?+Xp[1]:0,ni=!tn&&/gecko\/(\d+)/i.test(Br);ni&&+(/Firefox\/(\d+)/.exec(Br)||[0,0])[1];var th=!tn&&/Chrome\/(\d+)/.exec(Br),Wt=!!th,QO=th?+th[1]:0,jt=!tn&&!!vi&&/Apple Computer/.test(vi.vendor),Ds=jt&&(/Mobile\/\w+/.test(Br)||!!vi&&vi.maxTouchPoints>2),Rn=Ds||(vi?/Mac/.test(vi.platform):!1),ZO=vi?/Win/.test(vi.platform):!1,ti=/Android \d/.test(Br),Ha=!!i1&&"webkitFontSmoothing"in i1.documentElement.style,XO=Ha?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function eI(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Qi(t,e){return typeof t=="number"?t:t[e]}function tI(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function r1(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;l=Ra(l)){if(l.nodeType!=1)continue;let c=l,u=c==o.body,p=u?eI(o):tI(c),f=0,g=0;if(e.top<p.top+Qi(i,"top")?g=-(p.top-e.top+Qi(r,"top")):e.bottom>p.bottom-Qi(i,"bottom")&&(g=e.bottom-e.top>p.bottom-p.top?e.top+Qi(r,"top")-p.top:e.bottom-p.bottom+Qi(r,"bottom")),e.left<p.left+Qi(i,"left")?f=-(p.left-e.left+Qi(r,"left")):e.right>p.right-Qi(i,"right")&&(f=e.right-p.right+Qi(r,"right")),f||g)if(u)o.defaultView.scrollBy(f,g);else{let y=c.scrollLeft,b=c.scrollTop;g&&(c.scrollTop+=g),f&&(c.scrollLeft+=f);let C=c.scrollLeft-y,M=c.scrollTop-b;e={left:e.left-C,top:e.top-M,right:e.right-C,bottom:e.bottom-M}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(l).position))break}}function nI(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),i,r;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=t.root.elementFromPoint(o,l);if(!c||c==t.dom||!t.dom.contains(c))continue;let u=c.getBoundingClientRect();if(u.top>=n-20){i=c,r=u.top;break}}return{refDOM:i,refTop:r,stack:F1(t.dom)}}function F1(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=Ra(i));return e}function iI({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;B1(n,i==0?0:i-e)}function B1(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:o}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=o&&(i.scrollLeft=o)}}var Cs=null;function rI(t){if(t.setActive)return t.setActive();if(Cs)return t.focus(Cs);let e=F1(t);t.focus(Cs==null?{get preventScroll(){return Cs={preventScroll:!0},!0}}:void 0),Cs||(Cs=!1,B1(e,0))}function V1(t,e){let n,i=2e8,r,o=0,l=e.top,c=e.top,u,p;for(let f=t.firstChild,g=0;f;f=f.nextSibling,g++){let y;if(f.nodeType==1)y=f.getClientRects();else if(f.nodeType==3)y=Zi(f).getClientRects();else continue;for(let b=0;b<y.length;b++){let C=y[b];if(C.top<=l&&C.bottom>=c){l=Math.max(C.bottom,l),c=Math.min(C.top,c);let M=C.left>e.left?C.left-e.left:C.right<e.left?e.left-C.right:0;if(M<i){n=f,i=M,r=M&&n.nodeType==3?{left:C.right<e.left?C.right:C.left,top:e.top}:e,f.nodeType==1&&M&&(o=g+(e.left>=(C.left+C.right)/2?1:0));continue}}else C.top>e.top&&!u&&C.left<=e.left&&C.right>=e.left&&(u=f,p={left:Math.max(C.left,Math.min(C.right,e.left)),top:C.top});!n&&(e.left>=C.right&&e.top>=C.top||e.left>=C.left&&e.top>=C.bottom)&&(o=g+1)}}return!n&&u&&(n=u,r=p,i=0),n&&n.nodeType==3?oI(n,r):!n||i&&n.nodeType==1?{node:t,offset:o}:V1(n,r)}function oI(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let o=Ar(i,1);if(o.top!=o.bottom&&_h(e,o))return{node:t,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function _h(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function sI(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function aI(t,e,n){let{node:i,offset:r}=V1(e,n),o=-1;if(i.nodeType==1&&!i.firstChild){let l=i.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(i,r,o)}function lI(t,e,n,i){let r=-1;for(let o=e,l=!1;o!=t.dom;){let c=t.docView.nearestDesc(o,!0);if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)){let u=c.dom.getBoundingClientRect();if(c.node.isBlock&&c.parent&&(!l&&u.left>i.left||u.top>i.top?r=c.posBefore:(!l&&u.right<i.left||u.bottom<i.top)&&(r=c.posAfter),l=!0),!c.contentDOM&&r<0&&!c.node.isText)return(c.node.isBlock?i.top<(u.top+u.bottom)/2:i.left<(u.left+u.right)/2)?c.posBefore:c.posAfter}o=c.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}function L1(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let l=t.childNodes[o];if(l.nodeType==1){let c=l.getClientRects();for(let u=0;u<c.length;u++){let p=c[u];if(_h(e,p))return L1(l,e,p)}}if((o=(o+1)%i)==r)break}return t}function cI(t,e){let n=t.dom.ownerDocument,i,r=0,o=YO(n,e.left,e.top);o&&({node:i,offset:r}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let p=t.dom.getBoundingClientRect();if(!_h(e,p)||(l=L1(t.dom,e,p),!l))return null}if(jt)for(let p=l;i&&p;p=Ra(p))p.draggable&&(i=void 0);if(l=sI(l,e),i){if(ni&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let f=i.childNodes[r],g;f.nodeName=="IMG"&&(g=f.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&r++}let p;Ha&&r&&i.nodeType==1&&(p=i.childNodes[r-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&r--,i==t.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(c=lI(t,i,r,e))}c==null&&(c=aI(t,l,e));let u=t.docView.nearestDesc(l,!0);return{pos:c,inside:u?u.posAtStart-u.border:-1}}function o1(t){return t.top<t.bottom||t.left<t.right}function Ar(t,e){let n=t.getClientRects();if(n.length){let i=n[e<0?0:n.length-1];if(o1(i))return i}return Array.prototype.find.call(n,o1)||t.getBoundingClientRect()}var dI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function H1(t,e,n){let{node:i,offset:r,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=Ha||ni;if(i.nodeType==3)if(l&&(dI.test(i.nodeValue)||(n<0?!r:r==i.nodeValue.length))){let u=Ar(Zi(i,r,r),n);if(ni&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let p=Ar(Zi(i,r-1,r-1),-1);if(p.top==u.top){let f=Ar(Zi(i,r,r+1),-1);if(f.top!=u.top)return Aa(f,f.left<p.left)}}return u}else{let u=r,p=r,f=n<0?1:-1;return n<0&&!r?(p++,f=-1):n>=0&&r==i.nodeValue.length?(u--,f=1):n<0?u--:p++,Aa(Ar(Zi(i,u,p),f),f<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&r&&(n<0||r==_i(i))){let u=i.childNodes[r-1];if(u.nodeType==1)return Jp(u.getBoundingClientRect(),!1)}if(o==null&&r<_i(i)){let u=i.childNodes[r];if(u.nodeType==1)return Jp(u.getBoundingClientRect(),!0)}return Jp(i.getBoundingClientRect(),n>=0)}if(o==null&&r&&(n<0||r==_i(i))){let u=i.childNodes[r-1],p=u.nodeType==3?Zi(u,_i(u)-(l?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(p)return Aa(Ar(p,1),!1)}if(o==null&&r<_i(i)){let u=i.childNodes[r];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let p=u?u.nodeType==3?Zi(u,0,l?0:1):u.nodeType==1?u:null:null;if(p)return Aa(Ar(p,-1),!0)}return Aa(Ar(i.nodeType==3?Zi(i):i,-n),n>=0)}function Aa(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Jp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function z1(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}function uI(t,e,n){let i=e.selection,r=n=="up"?i.$from:i.$to;return z1(t,e,()=>{let{node:o}=t.docView.domFromPos(r.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let l=H1(t,r.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let u;if(c.nodeType==1)u=c.getClientRects();else if(c.nodeType==3)u=Zi(c,0,c.nodeValue.length).getClientRects();else continue;for(let p=0;p<u.length;p++){let f=u[p];if(f.bottom>f.top+1&&(n=="up"?l.top-f.top>(f.bottom-l.top)*2:f.bottom-l.bottom>(l.bottom-f.top)*2))return!1}}return!0})}var pI=/[\u0590-\u08ac]/;function hI(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,l=r==i.parent.content.size,c=t.domSelection();return!pI.test(i.parent.textContent)||!c.modify?n=="left"||n=="backward"?o:l:z1(t,e,()=>{let{focusNode:u,focusOffset:p,anchorNode:f,anchorOffset:g}=t.domSelectionRange(),y=c.caretBidiLevel;c.modify("move",n,"character");let b=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:C,focusOffset:M}=t.domSelectionRange(),A=C&&!b.contains(C.nodeType==1?C:C.parentNode)||u==C&&p==M;try{c.collapse(f,g),u&&(u!=f||p!=g)&&c.extend&&c.extend(u,p)}catch{}return y!=null&&(c.caretBidiLevel=y),A})}var s1=null,a1=null,l1=!1;function fI(t,e,n){return s1==e&&a1==n?l1:(s1=e,a1=n,l1=n=="up"||n=="down"?uI(t,e,n):hI(t,e,n))}var Fn=0,c1=1,To=2,yi=3,Oo=class{constructor(e,n,i,r){this.parent=e,this.children=n,this.dom=i,this.contentDOM=r,this.dirty=Fn,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let r=this.children[n];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=n>Ct(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!1;break}if(o.previousSibling)break}if(r==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!0;break}if(o.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,r=e;r;r=r.parentNode){let o=this.getDesc(r),l;if(o&&(!n||o.node))if(i&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))i=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let r=this.children[n],o=i+r.size;if(i==e&&o!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-i-r.border);i=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let o=0;i<this.children.length;i++){let l=this.children[i],c=o+l.size;if(c>e||l instanceof jc){r=e-o;break}o=c}if(r)return this.children[i].domFromPos(r-this.children[i].border,n);for(let o;i&&!(o=this.children[i-1]).size&&o instanceof Wc&&o.side>=0;i--);if(n<=0){let o,l=!0;for(;o=i?this.children[i-1]:null,!(!o||o.dom.parentNode==this.contentDOM);i--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Ct(o.dom)+1:0}}else{let o,l=!0;for(;o=i<this.children.length?this.children[i]:null,!(!o||o.dom.parentNode==this.contentDOM);i++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Ct(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let l=i,c=0;;c++){let u=this.children[c],p=l+u.size;if(r==-1&&e<=p){let f=l+u.border;if(e>=f&&n<=p-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,f);e=l;for(let g=c;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){r=Ct(y.dom)+1;break}e-=y.size}r==-1&&(r=0)}if(r>-1&&(p>n||c==this.children.length-1)){n=p;for(let f=c+1;f<this.children.length;f++){let g=this.children[f];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=Ct(g.dom);break}n+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=p}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,r=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let y=0,b=0;y<this.children.length;y++){let C=this.children[y],M=b+C.size;if(o>b&&l<M)return C.setSelection(e-b-C.border,n-b-C.border,i,r);b=M}let c=this.domFromPos(e,e?-1:1),u=n==e?c:this.domFromPos(n,n?-1:1),p=i.getSelection(),f=!1;if((ni||jt)&&e==n){let{node:y,offset:b}=c;if(y.nodeType==3){if(f=!!(b&&y.nodeValue[b-1]==`
`),f&&b==y.nodeValue.length)for(let C=y,M;C;C=C.parentNode){if(M=C.nextSibling){M.nodeName=="BR"&&(c=u={node:M.parentNode,offset:Ct(M)+1});break}let A=C.pmViewDesc;if(A&&A.node&&A.node.isBlock)break}}else{let C=y.childNodes[b-1];f=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(ni&&p.focusNode&&p.focusNode!=u.node&&p.focusNode.nodeType==1){let y=p.focusNode.childNodes[p.focusOffset];y&&y.contentEditable=="false"&&(r=!0)}if(!(r||f&&jt)&&Eo(c.node,c.offset,p.anchorNode,p.anchorOffset)&&Eo(u.node,u.offset,p.focusNode,p.focusOffset))return;let g=!1;if((p.extend||e==n)&&!f){p.collapse(c.node,c.offset);try{e!=n&&p.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(e>n){let b=c;c=u,u=b}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(c.node,c.offset),p.removeAllRanges(),p.addRange(y)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,r=0;r<this.children.length;r++){let o=this.children[r],l=i+o.size;if(i==l?e<=l&&n>=i:e<l&&n>i){let c=i+o.border,u=l-o.border;if(e>=c&&n<=u){this.dirty=e==i||n==l?To:c1,e==c&&n==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=yi:o.markDirty(e-c,n-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?To:yi}i=l}this.dirty=To}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=e==1?To:c1;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}},Wc=class extends Oo{constructor(e,n,i,r){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(i,()=>{if(!o)return r;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Fn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},nh=class extends Oo{constructor(e,n,i,r){super(e,[],n,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},Ms=class t extends Oo{constructor(e,n,i,r){super(e,[],i,r),this.mark=n}static create(e,n,i,r){let o=r.nodeViews[n.type.name],l=o&&o(n,r,i);return(!l||!l.dom)&&(l=Ki.renderSpec(document,n.type.spec.toDOM(n,i))),new t(e,n,l.dom,l.contentDOM||l.dom)}parseRule(){return this.dirty&yi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=yi&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Fn){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Fn}}slice(e,n,i){let r=t.create(this.parent,this.mark,!0,i),o=this.children,l=this.size;n<l&&(o=ah(o,n,l,i)),e>0&&(o=ah(o,0,e,i));for(let c=0;c<o.length;c++)o[c].parent=r;return r.children=o,r}},Fr=class t extends Oo{constructor(e,n,i,r,o,l,c,u,p){super(e,[],o,l),this.node=n,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=c}static create(e,n,i,r,o,l){let c=o.nodeViews[n.type.name],u,p=c&&c(n,o,()=>{if(!u)return l;if(u.parent)return u.parent.posBeforeChild(u)},i,r),f=p&&p.dom,g=p&&p.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:g}=Ki.renderSpec(document,n.type.spec.toDOM(n)));!g&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let y=f;return f=j1(f,i,n),p?u=new ih(e,n,i,r,f,g||null,y,p,o,l+1):n.isText?new Gc(e,n,i,r,f,y,o):new t(e,n,i,r,f,g||null,y,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>L.empty)}return e}matchesNode(e,n,i){return this.dirty==Fn&&e.eq(this.node)&&oh(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,r=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,c=o&&o.pos<0,u=new sh(this,l&&l.node,e);vI(this.node,this.innerDeco,(p,f,g)=>{p.spec.marks?u.syncToMarks(p.spec.marks,i,e):p.type.side>=0&&!g&&u.syncToMarks(f==this.node.childCount?Oe.none:this.node.child(f).marks,i,e),u.placeWidget(p,e,r)},(p,f,g,y)=>{u.syncToMarks(p.marks,i,e);let b;u.findNodeMatch(p,f,g,y)||c&&e.state.selection.from>r&&e.state.selection.to<r+p.nodeSize&&(b=u.findIndexWithChild(o.node))>-1&&u.updateNodeAt(p,f,g,b,e)||u.updateNextNode(p,f,g,e,y,r)||u.addNode(p,f,g,e,r),r+=p.nodeSize}),u.syncToMarks([],i,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==To)&&(l&&this.protectLocalComposition(e,l),W1(this.contentDOM,this.children,e),Ds&&yI(this.dom))}localCompositionInfo(e,n){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof Ne)||i<n||r>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,c=bI(this.node.content,l,i-n,r-n);return c<0?null:{node:o,pos:c,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:r}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new nh(this,o,n,r);e.input.compositionNodes.push(l),this.children=ah(this.children,i,i+r.length,e,l)}update(e,n,i,r){return this.dirty==yi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,i,r),!0)}updateInner(e,n,i,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Fn}updateOuterDeco(e){if(oh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=G1(this.dom,this.nodeDOM,rh(this.outerDeco,this.node,n),rh(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function d1(t,e,n,i,r){j1(i,e,t);let o=new Fr(void 0,t,e,n,i,i,i,r,0);return o.contentDOM&&o.updateChildren(r,0),o}var Gc=class t extends Fr{constructor(e,n,i,r,o,l,c){super(e,n,i,r,o,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,r){return this.dirty==yi||this.dirty!=Fn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Fn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=Fn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,i){let r=this.node.cut(e,n),o=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,o,o,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=yi)}get domAtom(){return!1}isText(e){return this.node.text==e}},jc=class extends Oo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Fn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},ih=class extends Fr{constructor(e,n,i,r,o,l,c,u,p,f){super(e,n,i,r,o,l,c,p,f),this.spec=u}update(e,n,i,r){if(this.dirty==yi)return!1;if(this.spec.update){let o=this.spec.update(e,n,i);return o&&this.updateInner(e,n,i,r),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i):super.setSelection(e,n,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};function W1(t,e,n){let i=t.firstChild,r=!1;for(let o=0;o<e.length;o++){let l=e[o],c=l.dom;if(c.parentNode==t){for(;c!=i;)i=u1(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(c,i);if(l instanceof Ms){let u=i?i.previousSibling:t.lastChild;W1(l.contentDOM,l.children,n),i=u?u.nextSibling:t.firstChild}}for(;i;)i=u1(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}var Na=function(t){t&&(this.nodeName=t)};Na.prototype=Object.create(null);var So=[new Na];function rh(t,e,n){if(t.length==0)return So;let i=n?So[0]:new Na,r=[i];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&r.push(i=new Na(l.nodeName));for(let c in l){let u=l[c];u!=null&&(n&&r.length==1&&r.push(i=new Na(e.isInline?"span":"div")),c=="class"?i.class=(i.class?i.class+" ":"")+u:c=="style"?i.style=(i.style?i.style+";":"")+u:c!="nodeName"&&(i[c]=u))}}}return r}function G1(t,e,n,i){if(n==So&&i==So)return e;let r=e;for(let o=0;o<i.length;o++){let l=i[o],c=n[o];if(o){let u;c&&c.nodeName==l.nodeName&&r!=t&&(u=r.parentNode)&&u.nodeName.toLowerCase()==l.nodeName||(u=document.createElement(l.nodeName),u.pmIsDeco=!0,u.appendChild(r),c=So[0]),r=u}mI(r,c||So[0],l)}return r}function mI(t,e,n){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&t.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.remove(i[o]);for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.add(r[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)t.style.removeProperty(r[1])}n.style&&(t.style.cssText+=n.style)}}function j1(t,e,n){return G1(t,t,So,rh(e,n,t.nodeType!=1))}function oh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function u1(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}var sh=class{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=gI(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i){let r=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;r<l&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=Fn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let p=this.top.children[u];if(p.matchesMark(e[o])&&!this.isLocked(p.dom)){c=u;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let u=Ms.create(this.top,e[o],n,i);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,i,r){let o=-1,l;if(r>=this.preMatch.index&&(l=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,i))o=this.top.children.indexOf(l,this.index);else for(let c=this.index,u=Math.min(this.top.children.length,c+5);c<u;c++){let p=this.top.children[c];if(p.matchesNode(e,n,i)&&!this.preMatch.matched.has(p)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,i,r,o){let l=this.top.children[r];return l.dirty==yi&&l.dom==l.contentDOM&&(l.dirty=To),l.update(e,n,i,o)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=n}}updateNextNode(e,n,i,r,o,l){for(let c=this.index;c<this.top.children.length;c++){let u=this.top.children[c];if(u instanceof Fr){let p=this.preMatch.matched.get(u);if(p!=null&&p!=o)return!1;let f=u.dom,g,y=this.isLocked(f)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=yi&&oh(n,u.outerDeco));if(!y&&u.update(e,n,i,r))return this.destroyBetween(this.index,c),u.dom!=f&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(u,e,n,i,r,l)))return this.top.children[this.index]=g,g.contentDOM&&(g.dirty=To,g.updateChildren(r,l+1),g.dirty=Fn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,i,r,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let c=Fr.create(this.top,n,i,r,o,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let u of c.children)u.parent=c}return e.destroy(),c}addNode(e,n,i,r,o){let l=Fr.create(this.top,e,n,i,r,o);l.contentDOM&&l.updateChildren(r,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new Wc(this.top,e,n,i);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Ms;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Gc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((jt||Wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new jc(this.top,[],i,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};function gI(t,e){let n=e,i=n.children.length,r=t.childCount,o=new Map,l=[];e:for(;r>0;){let c;for(;;)if(i){let p=n.children[i-1];if(p instanceof Ms)n=p,i=p.children.length;else{c=p,i--;break}}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let u=c.node;if(u){if(u!=t.child(r-1))break;--r,o.set(c,r),l.push(c)}}return{index:r,matched:o,matches:l.reverse()}}function _I(t,e){return t.type.side-e.type.side}function vI(t,e,n,i){let r=e.locals(t),o=0;if(r.length==0){for(let p=0;p<t.childCount;p++){let f=t.child(p);i(f,r,e.forChild(o,f),p),o+=f.nodeSize}return}let l=0,c=[],u=null;for(let p=0;;){let f,g;for(;l<r.length&&r[l].to==o;){let A=r[l++];A.widget&&(f?(g||(g=[f])).push(A):f=A)}if(f)if(g){g.sort(_I);for(let A=0;A<g.length;A++)n(g[A],p,!!u)}else n(f,p,!!u);let y,b;if(u)b=-1,y=u,u=null;else if(p<t.childCount)b=p,y=t.child(p++);else break;for(let A=0;A<c.length;A++)c[A].to<=o&&c.splice(A--,1);for(;l<r.length&&r[l].from<=o&&r[l].to>o;)c.push(r[l++]);let C=o+y.nodeSize;if(y.isText){let A=C;l<r.length&&r[l].from<A&&(A=r[l].from);for(let V=0;V<c.length;V++)c[V].to<A&&(A=c[V].to);A<C&&(u=y.cut(A-o),y=y.cut(0,A-o),C=A,b=-1)}else for(;l<r.length&&r[l].to<C;)l++;let M=y.isInline&&!y.isLeaf?c.filter(A=>!A.inline):c.slice();i(y,M,e.forChild(o,y),b),o=C}}function yI(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function bI(t,e,n,i){for(let r=0,o=0;r<t.childCount&&o<=i;){let l=t.child(r++),c=o;if(o+=l.nodeSize,!l.isText)continue;let u=l.text;for(;r<t.childCount;){let p=t.child(r++);if(o+=p.nodeSize,!p.isText)break;u+=p.text}if(o>=n){if(o>=i&&u.slice(i-e.length-c,i-c)==e)return i-e.length;let p=c<i?u.lastIndexOf(e,i-c-1):-1;if(p>=0&&p+e.length+c>=n)return c+p;if(n==i&&u.length>=i+e.length-c&&u.slice(i-c,i-c+e.length)==e)return i}}return-1}function ah(t,e,n,i,r){let o=[];for(let l=0,c=0;l<t.length;l++){let u=t[l],p=c,f=c+=u.size;p>=n||f<=e?o.push(u):(p<e&&o.push(u.slice(0,e-p,i)),r&&(o.push(r),r=void 0),f>n&&o.push(u.slice(n-p,u.size,i)))}return o}function vh(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),o=r&&r.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c=i.resolve(l),u,p;if(Zc(n)){for(u=c;r&&!r.node;)r=r.parent;let f=r.node;if(r&&f.isAtom&&ie.isSelectable(f)&&r.parent&&!(f.isInline&&JO(n.focusNode,n.focusOffset,r.dom))){let g=r.posBefore;p=new ie(l==g?c:i.resolve(g))}}else{let f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(f<0)return null;u=i.resolve(f)}if(!p){let f=e=="pointer"||t.state.selection.head<c.pos&&!o?1:-1;p=yh(t,u,c,f)}return p}function $1(t){return t.editable?t.hasFocus():q1(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xi(t,e=!1){let n=t.state.selection;if(U1(t,n),!!$1(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Wt){let i=t.domSelectionRange(),r=t.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&Eo(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)CI(t);else{let{anchor:i,head:r}=n,o,l;p1&&!(n instanceof Ne)&&(n.$from.parent.inlineContent||(o=h1(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=h1(t,n.to))),t.docView.setSelection(i,r,t.root,e),p1&&(o&&f1(o),l&&f1(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&wI(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var p1=jt||Wt&&QO<63;function h1(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(jt&&r&&r.contentEditable=="false")return Kp(r);if((!r||r.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(r)return Kp(r);if(o)return Kp(o)}}function Kp(t){return t.contentEditable="true",jt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function f1(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function wI(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!$1(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function CI(t){let e=t.domSelection(),n=document.createRange(),i=t.cursorWrapper.dom,r=i.nodeName=="IMG";r?n.setEnd(i.parentNode,Ct(i)+1):n.setEnd(i,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!r&&!t.state.selection.visible&&tn&&Rr<=11&&(i.disabled=!0,i.disabled=!1)}function U1(t,e){if(e instanceof ie){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(m1(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else m1(t)}function m1(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function yh(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||Ne.between(e,n,i)}function g1(t){return t.editable&&!t.hasFocus()?!1:q1(t)}function q1(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xI(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Eo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function lh(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),o=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return o&&me.findFrom(o,e)}function Nr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function _1(t,e,n){let i=t.state.selection;if(i instanceof Ne)if(n.indexOf("s")>-1){let{$head:r}=i,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(r.pos+o.nodeSize*(e<0?-1:1));return Nr(t,new Ne(i.$anchor,l))}else if(i.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let r=lh(t.state,e);return r&&r instanceof ie?Nr(t,r):!1}else if(!(Rn&&n.indexOf("m")>-1)){let r=i.$head,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,l;if(!o||o.isText)return!1;let c=e<0?r.pos-o.nodeSize:r.pos;return o.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?ie.isSelectable(o)?Nr(t,new ie(e<0?t.state.doc.resolve(r.pos-o.nodeSize):r)):Ha?Nr(t,new Ne(t.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(i instanceof ie&&i.node.isInline)return Nr(t,new Ne(e>0?i.$to:i.$from));{let r=lh(t.state,e);return r?Nr(t,r):!1}}}function $c(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Pa(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function xs(t,e){return e<0?TI(t):SI(t)}function TI(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,o,l=!1;for(ni&&n.nodeType==1&&i<$c(n)&&Pa(n.childNodes[i],-1)&&(l=!0);;)if(i>0){if(n.nodeType!=1)break;{let c=n.childNodes[i-1];if(Pa(c,-1))r=n,o=--i;else if(c.nodeType==3)n=c,i=n.nodeValue.length;else break}}else{if(J1(n))break;{let c=n.previousSibling;for(;c&&Pa(c,-1);)r=n.parentNode,o=Ct(c),c=c.previousSibling;if(c)n=c,i=$c(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}l?ch(t,n,i):r&&ch(t,r,o)}function SI(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r=$c(n),o,l;for(;;)if(i<r){if(n.nodeType!=1)break;let c=n.childNodes[i];if(Pa(c,1))o=n,l=++i;else break}else{if(J1(n))break;{let c=n.nextSibling;for(;c&&Pa(c,1);)o=c.parentNode,l=Ct(c)+1,c=c.nextSibling;if(c)n=c,i=0,r=$c(n);else{if(n=n.parentNode,n==t.dom)break;i=r=0}}}o&&ch(t,o,l)}function J1(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function DI(t,e){for(;t&&e==t.childNodes.length&&!La(t);)e=Ct(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function MI(t,e){for(;t&&!e&&!La(t);)e=Ct(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ch(t,e,n){if(e.nodeType!=3){let o,l;(l=DI(e,n))?(e=l,n=0):(o=MI(e,n))&&(e=o,n=o.nodeValue.length)}let i=t.domSelection();if(Zc(i)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),i.removeAllRanges(),i.addRange(o)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout(()=>{t.state==r&&Xi(t)},50)}function v1(t,e){let n=t.state.doc.resolve(e);if(!(Wt||ZO)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>r.top&&l<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>r.top&&l<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function y1(t,e,n){let i=t.state.selection;if(i instanceof Ne&&!i.empty||n.indexOf("s")>-1||Rn&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=lh(t.state,e);if(l&&l instanceof ie)return Nr(t,l)}if(!r.parent.inlineContent){let l=e<0?r:o,c=i instanceof bn?me.near(l,e):me.findFrom(l,e);return c?Nr(t,c):!1}return!1}function b1(t,e){if(!(t.state.selection instanceof Ne))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function w1(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function kI(t){if(!jt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;w1(t,i,"true"),setTimeout(()=>w1(t,i,"false"),20)}return!1}function EI(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function OI(t,e){let n=e.keyCode,i=EI(e);if(n==8||Rn&&n==72&&i=="c")return b1(t,-1)||xs(t,-1);if(n==46&&!e.shiftKey||Rn&&n==68&&i=="c")return b1(t,1)||xs(t,1);if(n==13||n==27)return!0;if(n==37||Rn&&n==66&&i=="c"){let r=n==37?v1(t,t.state.selection.from)=="ltr"?-1:1:-1;return _1(t,r,i)||xs(t,r)}else if(n==39||Rn&&n==70&&i=="c"){let r=n==39?v1(t,t.state.selection.from)=="ltr"?1:-1:1;return _1(t,r,i)||xs(t,r)}else{if(n==38||Rn&&n==80&&i=="c")return y1(t,-1,i)||xs(t,-1);if(n==40||Rn&&n==78&&i=="c")return kI(t)||y1(t,1,i)||xs(t,1);if(i==(Rn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function K1(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:i,openStart:r,openEnd:o}=e;for(;r>1&&o>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,o--;let b=i.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),i=b.content}let l=t.someProp("clipboardSerializer")||Ki.fromSchema(t.state.schema),c=tv(),u=c.createElement("div");u.appendChild(l.serializeFragment(i,{document:c}));let p=u.firstChild,f,g=0;for(;p&&p.nodeType==1&&(f=ev[p.nodeName.toLowerCase()]);){for(let b=f.length-1;b>=0;b--){let C=c.createElement(f[b]);for(;u.firstChild;)C.appendChild(u.firstChild);u.appendChild(C),g++}p=u.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${r} ${o}${g?` -${g}`:""} ${JSON.stringify(n)}`);let y=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:y,slice:e}}function Y1(t,e,n,i,r){let o=r.parent.type.spec.code,l,c;if(!n&&!e)return null;let u=e&&(i||o||!n);if(u){if(t.someProp("transformPastedText",y=>{e=y(e,o||i,t)}),o)return e?new W(L.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):W.empty;let g=t.someProp("clipboardTextParser",y=>y(e,r,i,t));if(g)c=g;else{let y=r.marks(),{schema:b}=t.state,C=Ki.fromSchema(b);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(M=>{let A=l.appendChild(document.createElement("p"));M&&A.appendChild(C.serializeNode(b.text(M,y)))})}}else t.someProp("transformPastedHTML",g=>{n=g(n,t)}),l=NI(n),Ha&&PI(l);let p=l&&l.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let g=+f[3];g>0;g--){let y=l.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;l=y}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||Or.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(u||f),context:r,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!II.test(y.parentNode.nodeName)?{ignore:!0}:null}})),f)c=RI(C1(c,+f[1],+f[2]),f[4]);else if(c=W.maxOpen(AI(c.content,r),!0),c.openStart||c.openEnd){let g=0,y=0;for(let b=c.content.firstChild;g<c.openStart&&!b.type.spec.isolating;g++,b=b.firstChild);for(let b=c.content.lastChild;y<c.openEnd&&!b.type.spec.isolating;y++,b=b.lastChild);c=C1(c,g,y)}return t.someProp("transformPasted",g=>{c=g(c,t)}),c}var II=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AI(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(c=>{if(!l)return;let u=r.findWrapping(c.type),p;if(!u)return l=null;if(p=l.length&&o.length&&Z1(u,o,c,l[l.length-1],0))l[l.length-1]=p;else{l.length&&(l[l.length-1]=X1(l[l.length-1],o.length));let f=Q1(c,u);l.push(f),r=r.matchType(f.type),o=u}}),l)return L.from(l)}return t}function Q1(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,L.from(t));return t}function Z1(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let o=Z1(t,e,n,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(L.from(Q1(n,t,r+1))))}}function X1(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,X1(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(L.empty,!0);return t.copy(n.append(i))}function dh(t,e,n,i,r,o){let l=e<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(o=0),r<i-1&&(c=dh(c,e,n,i,r+1,o)),r>=n&&(c=e<0?l.contentMatchAt(0).fillBefore(c,o<=r).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(L.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(c))}function C1(t,e,n){return e<t.openStart&&(t=new W(dh(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new W(dh(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var ev={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},x1=null;function tv(){return x1||(x1=document.implementation.createHTMLDocument("title"))}function NI(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=tv().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t),r;if((r=i&&ev[i[1].toLowerCase()])&&(t=r.map(o=>"<"+o+">").join("")+t+r.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=t,r)for(let o=0;o<r.length;o++)n=n.querySelector(r[o])||n;return n}function PI(t){let e=t.querySelectorAll(Wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];i.childNodes.length==1&&i.textContent=="\xA0"&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}function RI(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return t}let{content:r,openStart:o,openEnd:l}=t;for(let c=i.length-2;c>=0;c-=2){let u=n.nodes[i[c]];if(!u||u.hasRequiredAttrs())break;r=L.from(u.create(i[c+1],r)),o++,l++}return new W(r,o,l)}var $t={},Ut={},FI={touchstart:!0,touchmove:!0},uh=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function BI(t){for(let e in $t){let n=$t[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{LI(t,i)&&!bh(t,i)&&(t.editable||!(i.type in Ut))&&n(t,i)},FI[e]?{passive:!0}:void 0)}jt&&t.dom.addEventListener("input",()=>null),ph(t)}function Pr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function VI(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ph(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>bh(t,i))})}function bh(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return i?i(t,e)||e.defaultPrevented:!1})}function LI(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function HI(t,e){!bh(t,e)&&$t[e.type]&&(t.editable||!(e.type in Ut))&&$t[e.type](t,e)}Ut.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!iv(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ti&&Wt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ds&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",r=>r(t,xo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",i=>i(t,n))||OI(t,n)?n.preventDefault():Pr(t,"key")};Ut.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ut.keypress=(t,e)=>{let n=e;if(iv(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Rn&&n.metaKey)return;if(t.someProp("handleKeyPress",r=>r(t,n))){n.preventDefault();return}let i=t.state.selection;if(!(i instanceof Ne)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(n.charCode);!/[\r\n]/.test(r)&&!t.someProp("handleTextInput",o=>o(t,i.$from.pos,i.$to.pos,r))&&t.dispatch(t.state.tr.insertText(r).scrollIntoView()),n.preventDefault()}};function Xc(t){return{left:t.clientX,top:t.clientY}}function zI(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function wh(t,e,n,i,r){if(i==-1)return!1;let o=t.state.doc.resolve(i);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,c=>l>o.depth?c(t,n,o.nodeAfter,o.before(l),r,!0):c(t,n,o.node(l),o.before(l),r,!1)))return!0;return!1}function Ss(t,e,n){t.focused||t.focus();let i=t.state.tr.setSelection(e);n=="pointer"&&i.setMeta("pointer",!0),t.dispatch(i)}function WI(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return i&&i.isAtom&&ie.isSelectable(i)?(Ss(t,new ie(n),"pointer"),!0):!1}function GI(t,e){if(e==-1)return!1;let n=t.state.selection,i,r;n instanceof ie&&(i=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let c=l>o.depth?o.nodeAfter:o.node(l);if(ie.isSelectable(c)){i&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?r=o.before(n.$from.depth):r=o.before(l);break}}return r!=null?(Ss(t,ie.create(t.state.doc,r),"pointer"),!0):!1}function jI(t,e,n,i,r){return wh(t,"handleClickOn",e,n,i)||t.someProp("handleClick",o=>o(t,e,i))||(r?GI(t,n):WI(t,n))}function $I(t,e,n,i){return wh(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",r=>r(t,e,i))}function UI(t,e,n,i){return wh(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",r=>r(t,e,i))||qI(t,n,i)}function qI(t,e,n){if(n.button!=0)return!1;let i=t.state.doc;if(e==-1)return i.inlineContent?(Ss(t,Ne.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(e);for(let o=r.depth+1;o>0;o--){let l=o>r.depth?r.nodeAfter:r.node(o),c=r.before(o);if(l.inlineContent)Ss(t,Ne.create(i,c+1,c+1+l.content.size),"pointer");else if(ie.isSelectable(l))Ss(t,ie.create(i,c),"pointer");else continue;return!0}}function Ch(t){return Uc(t)}var nv=Rn?"metaKey":"ctrlKey";$t.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=Ch(t),r=Date.now(),o="singleClick";r-t.input.lastClick.time<500&&zI(n,t.input.lastClick)&&!n[nv]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o};let l=t.posAtCoords(Xc(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new hh(t,l,n,!!i)):(o=="doubleClick"?$I:UI)(t,l.pos,l.inside,n)?n.preventDefault():Pr(t,"pointer"))};var hh=class{constructor(e,n,i,r){this.view=e,this.pos=n,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[nv],this.allowDefault=i.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let f=e.state.doc.resolve(n.pos);o=f.parent,l=f.depth?f.before():0}let c=r?null:i.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:p}=e.state;(i.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||p instanceof ie&&p.from<=l&&p.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ni&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Xc(e))),this.updateAllowDefault(e),this.allowDefault||!n?Pr(this.view,"pointer"):jI(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||jt&&this.mightDrag&&!this.mightDrag.node.isAtom||Wt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ss(this.view,me.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Pr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Pr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};$t.touchstart=t=>{t.input.lastTouch=Date.now(),Ch(t),Pr(t,"pointer")};$t.touchmove=t=>{t.input.lastTouch=Date.now(),Pr(t,"pointer")};$t.contextmenu=t=>Ch(t);function iv(t,e){return t.composing?!0:jt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}var JI=ti?5e3:-1;Ut.compositionstart=Ut.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Uc(t,!0),t.markCursor=null;else if(Uc(t),ni&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let r=i.focusNode,o=i.focusOffset;r&&r.nodeType==1&&o!=0;){let l=o<0?r.lastChild:r.childNodes[o-1];if(!l)break;if(l.nodeType==3){t.domSelection().collapse(l,l.nodeValue.length);break}else r=l,o=-1}}t.input.composing=!0}rv(t,JI)};Ut.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,rv(t,20))};function rv(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Uc(t),e))}function ov(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=YI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function KI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=UO(e.focusNode,e.focusOffset),i=qO(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let r=i.pmViewDesc;if(!r||!r.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return i}}return n||i}function YI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Uc(t,e=!1){if(!(ti&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ov(t),e||t.docView&&t.docView.dirty){let n=vh(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function QI(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}var Fa=tn&&Rr<15||Ds&&XO<604;$t.copy=Ut.cut=(t,e)=>{let n=e,i=t.state.selection,r=n.type=="cut";if(i.empty)return;let o=Fa?null:n.clipboardData,l=i.content(),{dom:c,text:u}=K1(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",u)):QI(t,c),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function XI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Ba(t,i.value,null,r,e):Ba(t,i.textContent,i.innerHTML,r,e)},50)}function Ba(t,e,n,i,r){let o=Y1(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,r,o||W.empty)))return!0;if(!o)return!1;let l=ZI(o),c=l?t.state.tr.replaceSelectionWith(l,i):t.state.tr.replaceSelection(o);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sv(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ut.paste=(t,e)=>{let n=e;if(t.composing&&!ti)return;let i=Fa?null:n.clipboardData,r=t.input.shiftKey&&t.input.lastKeyCode!=45;i&&Ba(t,sv(i),i.getData("text/html"),r,n)?n.preventDefault():XI(t,n)};var qc=class{constructor(e,n,i){this.slice=e,this.move=n,this.node=i}},av=Rn?"altKey":"ctrlKey";$t.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=t.state.selection,o=r.empty?null:t.posAtCoords(Xc(n)),l;if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof ie?r.to-1:r.to))){if(i&&i.mightDrag)l=ie.create(t.state.doc,i.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=t.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=t.docView&&(l=ie.create(t.state.doc,g.posBefore))}}let c=(l||t.state.selection).content(),{dom:u,text:p,slice:f}=K1(t,c);n.dataTransfer.clearData(),n.dataTransfer.setData(Fa?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Fa||n.dataTransfer.setData("text/plain",p),t.dragging=new qc(f,!n[av],l)};$t.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ut.dragover=Ut.dragenter=(t,e)=>e.preventDefault();Ut.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(Xc(n));if(!r)return;let o=t.state.doc.resolve(r.pos),l=i&&i.slice;l?t.someProp("transformPasted",C=>{l=C(l,t)}):l=Y1(t,sv(n.dataTransfer),Fa?null:n.dataTransfer.getData("text/html"),!1,o);let c=!!(i&&!n[av]);if(t.someProp("handleDrop",C=>C(t,n,l||W.empty,c))){n.preventDefault();return}if(!l)return;n.preventDefault();let u=l?G_(t.state.doc,o.pos,l):o.pos;u==null&&(u=o.pos);let p=t.state.tr;if(c){let{node:C}=i;C?C.replace(p):p.deleteSelection()}let f=p.mapping.map(u),g=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,y=p.doc;if(g?p.replaceRangeWith(f,f,l.content.firstChild):p.replaceRange(f,f,l),p.doc.eq(y))return;let b=p.doc.resolve(f);if(g&&ie.isSelectable(l.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(l.content.firstChild))p.setSelection(new ie(b));else{let C=p.mapping.map(u);p.mapping.maps[p.mapping.maps.length-1].forEach((M,A,V,se)=>C=se),p.setSelection(yh(t,b,p.doc.resolve(C)))}t.focus(),t.dispatch(p.setMeta("uiEvent","drop"))};$t.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xi(t)},20))};$t.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};$t.beforeinput=(t,e)=>{if(Wt&&ti&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,xo(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in Ut)$t[t]=Ut[t];function Va(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}var Jc=class t{constructor(e,n){this.toDOM=e,this.spec=n||Mo,this.side=this.spec.side||0}map(e,n,i,r){let{pos:o,deleted:l}=e.mapResult(n.from+r,this.side<0?-1:1);return l?null:new bi(o-i,o-i,this)}valid(){return!0}eq(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Va(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},Do=class t{constructor(e,n){this.attrs=e,this.spec=n||Mo}map(e,n,i,r){let o=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-i,l=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-i;return o>=l?null:new bi(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof t&&Va(this.attrs,e.attrs)&&Va(this.spec,e.spec)}static is(e){return e.type instanceof t}destroy(){}},fh=class t{constructor(e,n){this.attrs=e,this.spec=n||Mo}map(e,n,i,r){let o=e.mapResult(n.from+r,1);if(o.deleted)return null;let l=e.mapResult(n.to+r,-1);return l.deleted||l.pos<=o.pos?null:new bi(o.pos-i,l.pos-i,this)}valid(e,n){let{index:i,offset:r}=e.content.findIndex(n.from),o;return r==n.from&&!(o=e.child(i)).isText&&r+o.nodeSize==n.to}eq(e){return this==e||e instanceof t&&Va(this.attrs,e.attrs)&&Va(this.spec,e.spec)}destroy(){}},bi=class t{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new t(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new t(e,e,new Jc(n,i))}static inline(e,n,i,r){return new t(e,n,new Do(i,r))}static node(e,n,i,r){return new t(e,n,new fh(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Do}get widget(){return this.type instanceof Jc}},Ts=[],Mo={},Gt=class t{constructor(e,n){this.local=e.length?e:Ts,this.children=n.length?n:Ts}static create(e,n){return n.length?Yc(n,e,0,Mo):Nt}find(e,n,i){let r=[];return this.findInner(e??0,n??1e9,r,0,i),r}findInner(e,n,i,r,o){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=n&&c.to>=e&&(!o||o(c.spec))&&i.push(c.copy(c.from+r,c.to+r))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,n-c,i,r+c,o)}}map(e,n,i){return this==Nt||e.maps.length==0?this:this.mapInner(e,n,0,0,i||Mo)}mapInner(e,n,i,r,o){let l;for(let c=0;c<this.local.length;c++){let u=this.local[c].map(e,i,r);u&&u.type.valid(n,u)?(l||(l=[])).push(u):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?eA(this.children,l||[],e,n,i,r,o):l?new t(l.sort(ko),Ts):Nt}add(e,n){return n.length?this==Nt?t.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let r,o=0;e.forEach((c,u)=>{let p=u+i,f;if(f=cv(n,c,p)){for(r||(r=this.children.slice());o<r.length&&r[o]<u;)o+=3;r[o]==u?r[o+2]=r[o+2].addInner(c,f,p+1):r.splice(o,0,u,u+c.nodeSize,Yc(f,c,p+1,Mo)),o+=3}});let l=lv(o?dv(n):n,-i);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new t(l.length?this.local.concat(l).sort(ko):this.local,r||this.children)}remove(e){return e.length==0||this==Nt?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,r=this.local;for(let o=0;o<i.length;o+=3){let l,c=i[o]+n,u=i[o+1]+n;for(let f=0,g;f<e.length;f++)(g=e[f])&&g.from>c&&g.to<u&&(e[f]=null,(l||(l=[])).push(g));if(!l)continue;i==this.children&&(i=this.children.slice());let p=i[o+2].removeInner(l,c+1);p!=Nt?i[o+2]=p:(i.splice(o,3),o-=3)}if(r.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let c=0;c<r.length;c++)r[c].eq(l,n)&&(r==this.local&&(r=this.local.slice()),r.splice(c--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new t(r,i):Nt}forChild(e,n){if(this==Nt)return this;if(n.isLeaf)return t.empty;let i,r;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(i=this.children[c+2]);break}let o=e+1,l=o+n.content.size;for(let c=0;c<this.local.length;c++){let u=this.local[c];if(u.from<l&&u.to>o&&u.type instanceof Do){let p=Math.max(o,u.from)-o,f=Math.min(l,u.to)-o;p<f&&(r||(r=[])).push(u.copy(p,f))}}if(r){let c=new t(r.sort(ko),Ts);return i?new Kc([c,i]):c}return i||Nt}eq(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return xh(this.localsInner(e))}localsInner(e){if(this==Nt)return Ts;if(e.inlineContent||!this.local.some(Do.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Do||n.push(this.local[i]);return n}};Gt.empty=new Gt([],[]);Gt.removeOverlap=xh;var Nt=Gt.empty,Kc=class t{constructor(e){this.members=e}map(e,n){let i=this.members.map(r=>r.map(e,n,Mo));return t.from(i)}forChild(e,n){if(n.isLeaf)return Gt.empty;let i=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,n);o!=Nt&&(o instanceof t?i=i.concat(o.members):i.push(o))}return t.from(i)}eq(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(!n)n=o;else{i&&(n=n.slice(),i=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?xh(i?n:n.sort(ko)):Ts}static from(e){switch(e.length){case 0:return Nt;case 1:return e[0];default:return new t(e.every(n=>n instanceof Gt)?e:e.reduce((n,i)=>n.concat(i instanceof Gt?i:i.members),[]))}}};function eA(t,e,n,i,r,o,l){let c=t.slice();for(let p=0,f=o;p<n.maps.length;p++){let g=0;n.maps[p].forEach((y,b,C,M)=>{let A=M-C-(b-y);for(let V=0;V<c.length;V+=3){let se=c[V+1];if(se<0||y>se+f-g)continue;let ue=c[V]+f-g;b>=ue?c[V+1]=y<=ue?-2:-1:y>=f&&A&&(c[V]+=A,c[V+1]+=A)}g+=A}),f=n.maps[p].map(f,-1)}let u=!1;for(let p=0;p<c.length;p+=3)if(c[p+1]<0){if(c[p+1]==-2){u=!0,c[p+1]=-1;continue}let f=n.map(t[p]+o),g=f-r;if(g<0||g>=i.content.size){u=!0;continue}let y=n.map(t[p+1]+o,-1),b=y-r,{index:C,offset:M}=i.content.findIndex(g),A=i.maybeChild(C);if(A&&M==g&&M+A.nodeSize==b){let V=c[p+2].mapInner(n,A,f+1,t[p]+o+1,l);V!=Nt?(c[p]=g,c[p+1]=b,c[p+2]=V):(c[p+1]=-2,u=!0)}else u=!0}if(u){let p=tA(c,t,e,n,r,o,l),f=Yc(p,i,0,l);e=f.local;for(let g=0;g<c.length;g+=3)c[g+1]<0&&(c.splice(g,3),g-=3);for(let g=0,y=0;g<f.children.length;g+=3){let b=f.children[g];for(;y<c.length&&c[y]<b;)y+=3;c.splice(y,0,f.children[g],f.children[g+1],f.children[g+2])}}return new Gt(e.sort(ko),c)}function lv(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new bi(r.from+e,r.to+e,r.type))}return n}function tA(t,e,n,i,r,o,l){function c(u,p){for(let f=0;f<u.local.length;f++){let g=u.local[f].map(i,r,p);g?n.push(g):l.onRemove&&l.onRemove(u.local[f].spec)}for(let f=0;f<u.children.length;f+=3)c(u.children[f+2],u.children[f]+p+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&c(t[u+2],e[u]+o+1);return n}function cv(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<i&&((r||(r=[])).push(l),t[o]=null);return r}function dv(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Yc(t,e,n,i){let r=[],o=!1;e.forEach((c,u)=>{let p=cv(t,c,u+n);if(p){o=!0;let f=Yc(p,c,n+u+1,i);f!=Nt&&r.push(u,u+c.nodeSize,f)}});let l=lv(o?dv(t):t,-n).sort(ko);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(i.onRemove&&i.onRemove(l[c].spec),l.splice(c--,1));return l.length||r.length?new Gt(l,r):Nt}function ko(t,e){return t.from-e.from||t.to-e.to}function xh(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let o=e[r];if(o.from==i.from){o.to!=i.to&&(e==t&&(e=t.slice()),e[r]=o.copy(o.from,i.to),T1(e,r+1,o.copy(i.to,o.to)));continue}else{o.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,o.from),T1(e,r,i.copy(o.from,i.to)));break}}}return e}function T1(t,e,n){for(;e<t.length&&ko(n,t[e])>0;)e++;t.splice(e,0,n)}function Yp(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=Nt&&e.push(i)}),t.cursorWrapper&&e.push(Gt.create(t.state.doc,[t.cursorWrapper.deco])),Kc.from(e)}var nA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iA=tn&&Rr<=11,mh=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},gh=class{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new mh,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);tn&&Rr<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),iA&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(g1(this.view)){if(this.suppressingSelectionUpdates)return Xi(this.view);if(tn&&Rr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Eo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,i;for(let o=e.focusNode;o;o=Ra(o))n.add(o);for(let o=e.anchorNode;o;o=Ra(o))if(n.has(o)){i=o;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&g1(e)&&!this.ignoreSelectionChange(i),o=-1,l=-1,c=!1,u=[];if(e.editable)for(let f=0;f<n.length;f++){let g=this.registerMutation(n[f],u);g&&(o=o<0?g.from:Math.min(g.from,o),l=l<0?g.to:Math.max(g.to,l),g.typeOver&&(c=!0))}if(ni&&u.length){let f=u.filter(g=>g.nodeName=="BR");if(f.length==2){let[g,y]=f;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of f){let b=y.parentNode;b&&b.nodeName=="LI"&&(!g||sA(e,g)!=b)&&y.remove()}}}let p=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Zc(i)&&(p=vh(e))&&p.eq(me.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xi(e),this.currentSelection.set(i),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,l),rA(e)),this.handleDOMChange(o,l,c,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Xi(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++)n.push(e.addedNodes[f]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,o=e.nextSibling;if(tn&&Rr<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:g,nextSibling:y}=e.addedNodes[f];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(r=g),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y)}let l=r&&r.parentNode==e.target?Ct(r)+1:0,c=i.localPosFromDOM(e.target,l,-1),u=o&&o.parentNode==e.target?Ct(o):e.target.childNodes.length,p=i.localPosFromDOM(e.target,u,1);return{from:c,to:p}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}},S1=new WeakMap,D1=!1;function rA(t){if(!S1.has(t)&&(S1.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ni,D1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),D1=!0}}function M1(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Eo(l.node,l.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}function oA(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return M1(t,r)}let n;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?M1(t,n):null}function sA(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let i=t.docView.nearestDesc(n,!0);if(i&&i.node.isBlock)return n}return null}function aA(t,e,n){let{node:i,fromOffset:r,toOffset:o,from:l,to:c}=t.docView.parseRange(e,n),u=t.domSelectionRange(),p,f=u.anchorNode;if(f&&t.dom.contains(f.nodeType==1?f:f.parentNode)&&(p=[{node:f,offset:u.anchorOffset}],Zc(u)||p.push({node:u.focusNode,offset:u.focusOffset})),Wt&&t.input.lastKeyCode===8)for(let A=o;A>r;A--){let V=i.childNodes[A-1],se=V.pmViewDesc;if(V.nodeName=="BR"&&!se){o=A;break}if(!se||se.size)break}let g=t.state.doc,y=t.someProp("domParser")||Or.fromSchema(t.state.schema),b=g.resolve(l),C=null,M=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:r,to:o,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:lA,context:b});if(p&&p[0].pos!=null){let A=p[0].pos,V=p[1]&&p[1].pos;V==null&&(V=A),C={anchor:A+l,head:V+l}}return{doc:M,sel:C,from:l,to:c}}function lA(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(jt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||jt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}var cA=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function dA(t,e,n,i,r){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let Y=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,De=vh(t,Y);if(De&&!t.state.selection.eq(De)){if(Wt&&ti&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",Tt=>Tt(t,xo(13,"Enter"))))return;let je=t.state.tr.setSelection(De);Y=="pointer"?je.setMeta("pointer",!0):Y=="key"&&je.scrollIntoView(),o&&je.setMeta("composition",o),t.dispatch(je)}return}let l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);let u=t.state.selection,p=aA(t,e,n),f=t.state.doc,g=f.slice(p.from,p.to),y,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(y=t.state.selection.to,b="end"):(y=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let C=hA(g.content,p.doc.content,p.from,y,b);if((Ds&&t.input.lastIOSEnter>Date.now()-225||ti)&&r.some(Y=>Y.nodeType==1&&!cA.test(Y.nodeName))&&(!C||C.endA>=C.endB)&&t.someProp("handleKeyDown",Y=>Y(t,xo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!C)if(i&&u instanceof Ne&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))C={start:u.from,endA:u.to,endB:u.to};else{if(p.sel){let Y=k1(t,t.state.doc,p.sel);if(Y&&!Y.eq(t.state.selection)){let De=t.state.tr.setSelection(Y);o&&De.setMeta("composition",o),t.dispatch(De)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&C.start==C.endB&&t.state.selection instanceof Ne&&(C.start>t.state.selection.from&&C.start<=t.state.selection.from+2&&t.state.selection.from>=p.from?C.start=t.state.selection.from:C.endA<t.state.selection.to&&C.endA>=t.state.selection.to-2&&t.state.selection.to<=p.to&&(C.endB+=t.state.selection.to-C.endA,C.endA=t.state.selection.to)),tn&&Rr<=11&&C.endB==C.start+1&&C.endA==C.start&&C.start>p.from&&p.doc.textBetween(C.start-p.from-1,C.start-p.from+1)==" \xA0"&&(C.start--,C.endA--,C.endB--);let M=p.doc.resolveNoCache(C.start-p.from),A=p.doc.resolveNoCache(C.endB-p.from),V=f.resolve(C.start),se=M.sameParent(A)&&M.parent.inlineContent&&V.end()>=C.endA,ue;if((Ds&&t.input.lastIOSEnter>Date.now()-225&&(!se||r.some(Y=>Y.nodeName=="DIV"||Y.nodeName=="P"))||!se&&M.pos<p.doc.content.size&&!M.sameParent(A)&&(ue=me.findFrom(p.doc.resolve(M.pos+1),1,!0))&&ue.head==A.pos)&&t.someProp("handleKeyDown",Y=>Y(t,xo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>C.start&&pA(f,C.start,C.endA,M,A)&&t.someProp("handleKeyDown",Y=>Y(t,xo(8,"Backspace")))){ti&&Wt&&t.domObserver.suppressSelectionUpdates();return}Wt&&ti&&C.endB==C.start&&(t.input.lastAndroidDelete=Date.now()),ti&&!se&&M.start()!=A.start()&&A.parentOffset==0&&M.depth==A.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==C.endA&&(C.endB-=2,A=p.doc.resolveNoCache(C.endB-p.from),setTimeout(()=>{t.someProp("handleKeyDown",function(Y){return Y(t,xo(13,"Enter"))})},20));let Q=C.start,ae=C.endA,ne,Se,Ve;if(se){if(M.pos==A.pos)tn&&Rr<=11&&M.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xi(t),20)),ne=t.state.tr.delete(Q,ae),Se=f.resolve(C.start).marksAcross(f.resolve(C.endA));else if(C.endA==C.endB&&(Ve=uA(M.parent.content.cut(M.parentOffset,A.parentOffset),V.parent.content.cut(V.parentOffset,C.endA-V.start()))))ne=t.state.tr,Ve.type=="add"?ne.addMark(Q,ae,Ve.mark):ne.removeMark(Q,ae,Ve.mark);else if(M.parent.child(M.index()).isText&&M.index()==A.index()-(A.textOffset?0:1)){let Y=M.parent.textBetween(M.parentOffset,A.parentOffset);if(t.someProp("handleTextInput",De=>De(t,Q,ae,Y)))return;ne=t.state.tr.insertText(Y,Q,ae)}}if(ne||(ne=t.state.tr.replace(Q,ae,p.doc.slice(C.start-p.from,C.endB-p.from))),p.sel){let Y=k1(t,ne.doc,p.sel);Y&&!(Wt&&ti&&t.composing&&Y.empty&&(C.start!=C.endB||t.input.lastAndroidDelete<Date.now()-100)&&(Y.head==Q||Y.head==ne.mapping.map(ae)-1)||tn&&Y.empty&&Y.head==Q)&&ne.setSelection(Y)}Se&&ne.ensureMarks(Se),o&&ne.setMeta("composition",o),t.dispatch(ne.scrollIntoView())}function k1(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:yh(t,e.resolve(n.anchor),e.resolve(n.head))}function uA(t,e){let n=t.firstChild.marks,i=e.firstChild.marks,r=n,o=i,l,c,u;for(let f=0;f<i.length;f++)r=i[f].removeFromSet(r);for(let f=0;f<n.length;f++)o=n[f].removeFromSet(o);if(r.length==1&&o.length==0)c=r[0],l="add",u=f=>f.mark(c.addToSet(f.marks));else if(r.length==0&&o.length==1)c=o[0],l="remove",u=f=>f.mark(c.removeFromSet(f.marks));else return null;let p=[];for(let f=0;f<e.childCount;f++)p.push(u(e.child(f)));if(L.from(p).eq(t))return{mark:c,type:l}}function pA(t,e,n,i,r){if(n-e<=r.pos-i.pos||Qp(i,!0,!1)<r.pos)return!1;let o=t.resolve(e);if(!i.parent.isTextblock){let c=o.nodeAfter;return c!=null&&n==e+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(Qp(o,!0,!0));return!l.parent.isTextblock||l.pos>n||Qp(l,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(l.parent.content)}function Qp(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let o=t.node(i).maybeChild(t.indexAfter(i));for(;o&&!o.isLeaf;)o=o.firstChild,r++}return r}function hA(t,e,n,i,r){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(r=="end"){let u=Math.max(0,o-Math.min(l,c));i-=l+u-o}if(l<o&&t.size<e.size){let u=i<=o&&i>=l?o-i:0;o-=u,o&&o<e.size&&E1(e.textBetween(o-1,o+1))&&(o+=u?1:-1),c=o+(c-l),l=o}else if(c<o){let u=i<=o&&i>=c?o-i:0;o-=u,o&&o<t.size&&E1(t.textBetween(o-1,o+1))&&(o+=u?1:-1),l=o+(l-c),c=o}return{start:o,endA:l,endB:c}}function E1(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}var Qc=class{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new uh,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(P1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=A1(this),I1(this),this.nodeViews=N1(this),this.docView=d1(this.state.doc,O1(this),Yp(this),this.dom,this),this.domObserver=new gh(this,(i,r,o,l)=>dA(this,i,r,o,l)),this.domObserver.start(),BI(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ph(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(P1),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var i;let r=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(ov(this),l=!0),this.state=e;let c=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=N1(this);mA(b,this.nodeViews)&&(this.nodeViews=b,o=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&ph(this),this.editable=A1(this),I1(this);let u=Yp(this),p=O1(this),f=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",g=o||!this.docView.matchesNode(e.doc,p,u);(g||!e.selection.eq(r.selection))&&(l=!0);let y=f=="preserve"&&l&&this.dom.style.overflowAnchor==null&&nI(this);if(l){this.domObserver.stop();let b=g&&(tn||Wt)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&fA(r.selection,e.selection);if(g){let C=Wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=KI(this)),(o||!this.docView.update(e.doc,p,u,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=d1(e.doc,p,u,this.dom,this)),C&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xI(this))?Xi(this,b):(U1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():y&&iI(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ie){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&r1(this,n.getBoundingClientRect(),e)}else r1(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}}updateDraggedNode(e,n){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let o=i.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==i.node&&(r=o)}this.dragging=new qc(e.slice,e.move,r<0?void 0:ie.create(this.state.doc,r))}someProp(e,n){let i=this._props&&this._props[e],r;if(i!=null&&(r=n?n(i):i))return r;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(r=n?n(c):c))return r}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let c=o[l].props[e];if(c!=null&&(r=n?n(c):c))return r}}hasFocus(){if(tn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&rI(this.dom),Xi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return cI(this,e)}coordsAtPos(e,n=1){return H1(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let r=this.docView.posFromDOM(e,n,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return fI(this,n||this.state,e)}pasteHTML(e,n){return Ba(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ba(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(VI(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Yp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,jO())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return HI(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return jt&&this.root.nodeType===11&&KO(this.dom.ownerDocument)==this.dom&&oA(this,e)||e}domSelection(){return this.root.getSelection()}};function O1(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let i in n)i=="class"?e.class+=" "+n[i]:i=="style"?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(n[i]))}),e.translate||(e.translate="no"),[bi.node(0,t.state.doc.content.size,e)]}function I1(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:bi.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function A1(t){return!t.someProp("editable",e=>e(t.state)===!1)}function fA(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function N1(t){let e=Object.create(null);function n(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function mA(t,e){let n=0,i=0;for(let r in t){if(t[r]!=e[r])return!0;n++}for(let r in e)i++;return n!=i}function P1(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gA=["ol",0],_A=["ul",0],vA=["li",0],uv={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM(t){return t.attrs.order==1?gA:["ol",{start:t.attrs.order},0]}},pv={parseDOM:[{tag:"ul"}],toDOM(){return _A}},hv={parseDOM:[{tag:"li"}],toDOM(){return vA},defining:!0};function fv(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,l=r.blockRange(o),c=!1,u=l;if(!l)return!1;if(l.depth>=2&&r.node(l.depth-1).type.compatibleContent(t)&&l.startIndex==0){if(r.index(l.depth-1)==0)return!1;let f=n.doc.resolve(l.start-2);u=new _o(f,f,l.depth),l.endIndex<l.parent.childCount&&(l=new _o(r,n.doc.resolve(o.end(l.depth)),l.depth)),c=!0}let p=bs(u,t,e,l);return p?(i&&i(yA(n.tr,l,p,c,t).scrollIntoView()),!0):!1}}function yA(t,e,n,i,r){let o=L.empty;for(let f=n.length-1;f>=0;f--)o=L.from(n[f].type.create(n[f].attrs,o));t.step(new ft(e.start-(i?2:0),e.end,e.start,e.end,new W(o,0,0),n.length,!0));let l=0;for(let f=0;f<n.length;f++)n[f].type==r&&(l=f+1);let c=n.length-l,u=e.start+n.length-(i?2:0),p=e.parent;for(let f=e.startIndex,g=e.endIndex,y=!0;f<g;f++,y=!1)!y&&Ir(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=p.child(f).nodeSize;return t}function mv(t,e){return function(n,i){let{$from:r,$to:o,node:l}=n.selection;if(l&&l.isBlock||r.depth<2||!r.sameParent(o))return!1;let c=r.node(-1);if(c.type!=t)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){let g=L.empty,y=r.index(-1)?1:r.index(-2)?2:3;for(let V=r.depth-y;V>=r.depth-3;V--)g=L.from(r.node(V).copy(g));let b=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;g=g.append(L.from(t.createAndFill()));let C=r.before(r.depth-(y-1)),M=n.tr.replace(C,r.after(-b),new W(g,4-y,0)),A=-1;M.doc.nodesBetween(C,M.doc.content.size,(V,se)=>{if(A>-1)return!1;V.isTextblock&&V.content.size==0&&(A=se+1)}),A>-1&&M.setSelection(me.near(M.doc.resolve(A))),i(M.scrollIntoView())}return!0}let u=o.pos==r.end()?c.contentMatchAt(0).defaultType:null,p=n.tr.delete(r.pos,o.pos),f=u?[e?{type:t,attrs:e}:null,{type:u}]:void 0;return Ir(p.doc,r.pos,2,f)?(i&&i(p.split(r.pos,2,f).scrollIntoView()),!0):!1}}function Th(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,l=>l.childCount>0&&l.firstChild.type==t);return o?n?i.node(o.depth-1).type==t?bA(e,n,t,o):wA(e,n,o):!0:!1}}function bA(t,e,n,i){let r=t.tr,o=i.end,l=i.$to.end(i.depth);o<l&&(r.step(new ft(o-1,l,o,l,new W(L.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new _o(r.doc.resolve(i.$from.pos),r.doc.resolve(l),i.depth));let c=bo(i);if(c==null)return!1;r.lift(i,c);let u=r.mapping.map(o,-1)-1;return wo(r.doc,u)&&r.join(u),e(r.scrollIntoView()),!0}function wA(t,e,n){let i=t.tr,r=n.parent;for(let b=n.end,C=n.endIndex-1,M=n.startIndex;C>M;C--)b-=r.child(C).nodeSize,i.delete(b-1,b+1);let o=i.doc.resolve(n.start),l=o.nodeAfter;if(i.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,u=n.endIndex==r.childCount,p=o.node(-1),f=o.index(-1);if(!p.canReplace(f+(c?0:1),f+1,l.content.append(u?L.empty:L.from(r))))return!1;let g=o.pos,y=g+l.nodeSize;return i.step(new ft(g-(c?1:0),y+(u?1:0),g+1,y-1,new W((c?L.empty:L.from(r.copy(L.empty))).append(u?L.empty:L.from(r.copy(L.empty))),c?0:1,u?0:1),c?0:1)),e(i.scrollIntoView()),!0}function Sh(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,p=>p.childCount>0&&p.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let c=o.parent,u=c.child(l-1);if(u.type!=t)return!1;if(n){let p=u.lastChild&&u.lastChild.type==c.type,f=L.from(p?t.create():null),g=new W(L.from(t.create(null,L.from(c.type.create(null,f)))),p?3:1,0),y=o.start,b=o.end;n(e.tr.step(new ft(y-(p?3:1),b,y,b,g,1,!0)).scrollIntoView())}return!0}}var xA={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title"),target:t.getAttribute("target")}}}],toDOM(t){let{href:e,title:n,target:i}=t.attrs;return["a",{href:e,title:n,target:i},0]}},TA={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},SA={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong",0]}},DA={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},MA={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},kA={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},EA={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:t=>({color:t})}],toDOM(t){let{color:e}=t.attrs;return["span",{style:`color:${e};`},0]}},OA={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:t=>({backgroundColor:t})}],toDOM(t){let{backgroundColor:e}=t.attrs;return["span",{style:`background-color:${e};`},0]}},IA={attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM(){return["sup",0]}},AA={attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM(){return["sub",0]}},NA={link:xA,em:TA,strong:SA,code:DA,u:MA,s:kA,text_color:EA,text_background_color:OA,sup:IA,sub:AA},PA={content:"block+"},RA={group:"inline"},FA={content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{align:n,indent:parseInt(i,10)||null}}}],toDOM(t){let{align:e,indent:n}=t.attrs,i={textAlign:e!=="left"?e:null,marginLeft:n!==null?`${n*40}px`:null};return["p",{style:Tc(i)||null,"data-indent":n??null},0]}},BA={content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(t){let e=t.getAttribute("data-indent")||null;return{indent:parseInt(e,10)||null}}}],toDOM(t){let{indent:e}=t.attrs,n={marginLeft:e!==null?`${e*40}px`:null};return["blockquote",{style:Tc(n)||null,"data-indent":e??null},0]}},VA={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},LA={attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{level:1,align:n,indent:parseInt(i,10)||null}}},{tag:"h2",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{level:2,align:n,indent:parseInt(i,10)||null}}},{tag:"h3",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{level:3,align:n,indent:parseInt(i,10)||null}}},{tag:"h4",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{level:4,align:n,indent:parseInt(i,10)||null}}},{tag:"h5",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{level:5,align:n,indent:parseInt(i,10)||null}}},{tag:"h6",getAttrs(t){let{textAlign:e}=t.style,n=t.getAttribute("align")||e||null,i=t.getAttribute("data-indent")||null;return{level:6,align:n,indent:parseInt(i,10)||null}}}],toDOM(t){let{level:e,align:n,indent:i}=t.attrs,r={textAlign:n!=="left"?n:null,marginLeft:i!==null?`${i*40}px`:null},l={style:Tc(r)||null,"data-indent":i??null};return[`h${e}`,l,0]}},HA={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},zA={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},WA={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt"),width:t.getAttribute("width")}}}],toDOM(t){let{src:e,alt:n,title:i,width:r}=t.attrs;return["img",{src:e,alt:n,title:i,width:r}]}},GA=_t(Ae({},hv),{content:"paragraph block*"}),jA=_t(Ae({},uv),{content:"list_item+",group:"block"}),$A=_t(Ae({},pv),{content:"list_item+",group:"block"}),UA={doc:PA,text:RA,paragraph:FA,blockquote:BA,horizontal_rule:VA,heading:LA,hard_break:zA,code_block:HA,image:WA,list_item:GA,ordered_list:jA,bullet_list:$A},za=new Oc({marks:NA,nodes:UA});var _v=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function qA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var JA=(t,e,n)=>{let i=qA(t,n);if(!i)return!1;let r=vv(i);if(!r){let l=i.blockRange(),c=l&&bo(l);return c==null?!1:(e&&e(t.tr.lift(l,c).scrollIntoView()),!0)}let o=r.nodeBefore;if(!o.type.spec.isolating&&wv(t,r,e))return!0;if(i.parent.content.size==0&&(ks(o,"end")||ie.isSelectable(o))){let l=Vc(t.doc,i.before(),i.after(),W.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(ks(o,"end")?me.findFrom(c.doc.resolve(c.mapping.map(r.pos,-1)),-1):ie.create(c.doc,r.pos-o.nodeSize)),e(c.scrollIntoView())}return!0}}return o.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1};function ks(t,e,n=!1){for(let i=t;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}var KA=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;o=vv(i)}let l=o&&o.nodeBefore;return!l||!ie.isSelectable(l)?!1:(e&&e(t.tr.setSelection(ie.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function vv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function YA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var QA=(t,e,n)=>{let i=YA(t,n);if(!i)return!1;let r=yv(i);if(!r)return!1;let o=r.nodeAfter;if(wv(t,r,e))return!0;if(i.parent.content.size==0&&(ks(o,"start")||ie.isSelectable(o))){let l=Vc(t.doc,i.before(),i.after(),W.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(ks(o,"start")?me.findFrom(c.doc.resolve(c.mapping.map(r.pos)),1):ie.create(c.doc,c.mapping.map(r.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},ZA=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;o=yv(i)}let l=o&&o.nodeAfter;return!l||!ie.isSelectable(l)?!1:(e&&e(t.tr.setSelection(ie.create(t.doc,o.pos)).scrollIntoView()),!0)};function yv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var bv=(t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),o=r&&bo(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},Mh=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function kh(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Eh=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),o=n.indexAfter(-1),l=kh(r.contentMatchAt(o));if(!l||!r.canReplaceWith(o,o,l))return!1;if(e){let c=n.after(),u=t.tr.replaceWith(c,c,l.createAndFill());u.setSelection(me.near(u.doc.resolve(c),1)),e(u.scrollIntoView())}return!0},Oh=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof bn||i.parent.inlineContent||r.parent.inlineContent)return!1;let o=kh(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,c=t.tr.insert(l,o.createAndFill());c.setSelection(Ne.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},Ih=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ir(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let i=n.blockRange(),r=i&&bo(i);return r==null?!1:(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};function XA(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof ie&&e.selection.node.isBlock)return!i.parentOffset||!Ir(e.doc,i.pos)?!1:(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let o=r.parentOffset==r.parent.content.size,l=e.tr;(e.selection instanceof Ne||e.selection instanceof bn)&&l.deleteSelection();let c=i.depth==0?null:kh(i.node(-1).contentMatchAt(i.indexAfter(-1))),u=t&&t(r.parent,o),p=u?[u]:o&&c?[{type:c}]:void 0,f=Ir(l.doc,l.mapping.map(i.pos),1,p);if(!p&&!f&&Ir(l.doc,l.mapping.map(i.pos),1,c?[{type:c}]:void 0)&&(c&&(p=[{type:c}]),f=!0),f&&(l.split(l.mapping.map(i.pos),1,p),!o&&!i.parentOffset&&i.parent.type!=c)){let g=l.mapping.map(i.before()),y=l.doc.resolve(g);c&&i.node(-1).canReplaceWith(y.index(),y.index()+1,c)&&l.setNodeMarkup(l.mapping.map(i.before()),c)}n(l.scrollIntoView())}return!0}}var Ah=XA();var e2=(t,e)=>(e&&e(t.tr.setSelection(new bn(t.doc))),!0);function t2(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,o=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||wo(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function wv(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,o,l;if(i.type.spec.isolating||r.type.spec.isolating)return!1;if(t2(t,e,n))return!0;let c=e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(r.type))&&l.matchType(o[0]||r.type).validEnd){if(n){let g=e.pos+r.nodeSize,y=L.empty;for(let M=o.length-1;M>=0;M--)y=L.from(o[M].create(null,y));y=L.from(i.copy(y));let b=t.tr.step(new ft(e.pos-1,g,e.pos,g,new W(y,1,0),o.length,!0)),C=g+2*o.length;wo(b.doc,C)&&b.join(C),n(b.scrollIntoView())}return!0}let u=me.findFrom(e,1),p=u&&u.$from.blockRange(u.$to),f=p&&bo(p);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(p,f).scrollIntoView()),!0;if(c&&ks(r,"start",!0)&&ks(i,"end")){let g=i,y=[];for(;y.push(g),!g.isTextblock;)g=g.lastChild;let b=r,C=1;for(;!b.isTextblock;b=b.firstChild)C++;if(g.canReplace(g.childCount,g.childCount,b.content)){if(n){let M=L.empty;for(let V=y.length-1;V>=0;V--)M=L.from(y[V].copy(M));let A=t.tr.step(new ft(e.pos-y.length,e.pos+r.nodeSize,e.pos+C,e.pos+r.nodeSize-C,new W(M,y.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function Cv(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(n&&n(e.tr.setSelection(Ne.create(e.doc,t<0?r.start(o):r.end(o)))),!0):!1}}var n2=Cv(-1),i2=Cv(1);function xv(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,l=r.blockRange(o),c=l&&bs(l,t,e);return c?(i&&i(n.tr.wrap(l,c).scrollIntoView()),!0):!1}}function ed(t,e=null){return function(n,i){let r=!1;for(let o=0;o<n.selection.ranges.length&&!r;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];n.doc.nodesBetween(l,c,(u,p)=>{if(r)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)r=!0;else{let f=n.doc.resolve(p),g=f.index();r=f.parent.canReplaceWith(g,g+1,t)}})}if(!r)return!1;if(i){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:u}}=n.selection.ranges[l];o.setBlockType(c,u,t,e)}i(o.scrollIntoView())}return!0}}function r2(t,e,n){for(let i=0;i<e.length;i++){let{$from:r,$to:o}=e[i],l=r.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(r.pos,o.pos,c=>{if(l)return!1;l=c.inlineContent&&c.type.allowsMarkType(n)}),l)return!0}return!1}function Io(t,e=null){return function(n,i){let{empty:r,$cursor:o,ranges:l}=n.selection;if(r&&!o||!r2(n.doc,l,t))return!1;if(i)if(o)t.isInSet(n.storedMarks||o.marks())?i(n.tr.removeStoredMark(t)):i(n.tr.addStoredMark(t.create(e)));else{let c=!1,u=n.tr;for(let p=0;!c&&p<l.length;p++){let{$from:f,$to:g}=l[p];c=n.doc.rangeHasMark(f.pos,g.pos,t)}for(let p=0;p<l.length;p++){let{$from:f,$to:g}=l[p];if(c)u.removeMark(f.pos,g.pos,t);else{let y=f.pos,b=g.pos,C=f.nodeAfter,M=g.nodeBefore,A=C&&C.isText?/^\s*/.exec(C.text)[0].length:0,V=M&&M.isText?/\s*$/.exec(M.text)[0].length:0;y+A<b&&(y+=A,b-=V),u.addMark(y,b,t.create(e))}}i(u.scrollIntoView())}return!0}}function Es(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}var Dh=Es(_v,JA,KA),gv=Es(_v,QA,ZA),er={Enter:Es(Mh,Oh,Ih,Ah),"Mod-Enter":Eh,Backspace:Dh,"Mod-Backspace":Dh,"Shift-Backspace":Dh,Delete:gv,"Mod-Delete":gv,"Mod-a":e2},Tv={"Ctrl-h":er.Backspace,"Alt-Backspace":er["Mod-Backspace"],"Ctrl-d":er.Delete,"Ctrl-Alt-Backspace":er["Mod-Delete"],"Alt-Delete":er["Mod-Delete"],"Alt-d":er["Mod-Delete"],"Ctrl-a":n2,"Ctrl-e":i2};for(let t in er)Tv[t]=er[t];var o2=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Sv=o2?Tv:er;var Bn=class{constructor(e,n,i={}){this.match=e,this.match=e,this.handler=typeof n=="string"?s2(n):n,this.undoable=i.undoable!==!1,this.inCode=i.inCode||!1}};function s2(t){return function(e,n,i,r){let o=t;if(n[1]){let l=n[0].lastIndexOf(n[1]);o+=n[0].slice(l+n[1].length),i+=l;let c=i-r;c>0&&(o=n[0].slice(l-c,l)+o,i=r)}return e.tr.insertText(o,i,r)}}var a2=500;function Mv({rules:t}){let e=new At({state:{init(){return null},apply(n,i){let r=n.getMeta(this);return r||(n.selectionSet||n.docChanged?null:i)}},props:{handleTextInput(n,i,r,o){return Dv(n,i,r,o,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:i}=n.state.selection;i&&Dv(n,i.pos,i.pos,"",t,e)})}}},isInputRules:!0});return e}function Dv(t,e,n,i,r,o){if(t.composing)return!1;let l=t.state,c=l.doc.resolve(e),u=c.parent.textBetween(Math.max(0,c.parentOffset-a2),c.parentOffset,null,"\uFFFC")+i;for(let p=0;p<r.length;p++){let f=r[p];if(c.parent.type.spec.code){if(!f.inCode)continue}else if(f.inCode==="only")continue;let g=f.match.exec(u),y=g&&f.handler(l,g,e-(g[0].length-i.length),n);if(y)return f.undoable&&y.setMeta(o,{transform:y,from:e,to:n,text:i}),t.dispatch(y),!0}return!1}var kv=new Bn(/--$/,"\u2014"),Ev=new Bn(/\.\.\.$/,"\u2026"),l2=new Bn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),c2=new Bn(/"$/,"\u201D"),d2=new Bn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),u2=new Bn(/'$/,"\u2019"),Ov=[l2,c2,d2,u2];function td(t,e,n=null,i){return new Bn(t,(r,o,l,c)=>{let u=n instanceof Function?n(o):n,p=r.tr.delete(l,c),f=p.doc.resolve(l),g=f.blockRange(),y=g&&bs(g,e,u);if(!y)return null;p.wrap(g,y);let b=p.doc.resolve(l-1).nodeBefore;return b&&b.type==e&&wo(p.doc,l-1)&&(!i||i(o,b))&&p.join(l-1),p})}function Nh(t,e,n=null){return new Bn(t,(i,r,o,l)=>{let c=i.doc.resolve(o),u=n instanceof Function?n(r):n;return c.node(-1).canReplaceWith(c.index(-1),c.indexAfter(-1),e)?i.tr.delete(o,l).setBlockType(o,o,e,u):null})}var nd=(t,e)=>{let{from:n,$from:i,to:r,empty:o}=t.selection;return o?!!e.isInSet(t.storedMarks||i.marks()):t.doc.rangeHasMark(n,r,e)},p2=(t,e)=>{for(let n=e.depth;n>0;n-=1)if(e.node(n).type===t)return e.node(n).type;return null},Ph=(t,e,n={})=>{let{selection:i}=t,{$from:r,to:o}=i,l=p2(e,r);return!Object.entries(n).length||!l?!!l:o<=r.end()&&r.parent.hasMarkup(e,n)},Iv=t=>{let e=[],{selection:n,storedMarks:i}=t,{from:r,to:o,empty:l,$from:c}=n;return l?e=i||c.marks():t.doc.nodesBetween(r,o,u=>{e=[...e,...u.marks]}),e},Rh=t=>{let e=[],{selection:{from:n,to:i}}=t;return t.doc.nodesBetween(n,i,r=>{e.push(r)}),e},Fh=(t,e,n)=>{for(let i of e){let{$from:r,$to:o}=i,l=r.depth===0?t.type.allowsMarkType(n):!1;if(t.nodesBetween(r.pos,o.pos,c=>l?!1:(l=c.inlineContent&&c.type.allowsMarkType(n),!0)),l)return!0}return!1},Bh=(t,e,n)=>new Bn(t,(i,r,o,l)=>{let{tr:c}=i,u=o,p=l,[f,,g]=r,y=f.search(/\S/);if(g){let b=o+f.indexOf(g),C=b+g.length;C<l&&c.delete(C,l),b>o&&c.delete(o+y,b),p=o+g.length+y}return c.addMark(u,p,e.create(n)),c.removeStoredMark(e),c}),Av=(t,e)=>{let{$from:n}=t.selection;for(let i=n.depth;i>=0;i-=1){let r=n.index(i);if(n.node(i).canReplaceWith(r,r,e))return!0}return!1};var Nv=()=>(t,e)=>{let{doc:n,selection:i,tr:r,schema:o}=t,{$head:{pos:l},from:c,to:u}=i,p=o.marks.link;if(c===u){let f=n.resolve(l),g=l-f.textOffset,y=g+f.parent.child(f.index()).nodeSize;r.removeMark(g,y,p)}else r.removeMark(c,u,p);return r.docChanged?(e?.(r),!0):!1},Vh=(t,e={})=>(n,i)=>{let{tr:r,selection:o}=n,{empty:l,ranges:c,$from:u,$to:p}=o;if(l&&o instanceof Ne){let{$cursor:f}=o;if(!f||!Fh(n.doc,c,t)||(r.addStoredMark(t.create(e)),!r.storedMarksSet))return!1;i?.(r)}else{if(r.addMark(u.pos,p.pos,t.create(e)),!r.docChanged)return!1;i?.(r.scrollIntoView())}return!0},Pv=t=>(e,n)=>{let{tr:i,selection:r,storedMarks:o,doc:l}=e,{empty:c,ranges:u}=r;if(c&&r instanceof Ne){let{$cursor:p}=r;if(!p||!Fh(e.doc,u,t))return!1;if(t.isInSet(o||p.marks()))return i.removeStoredMark(t),n?.(i),!0}else{for(let p of u){let{$from:f,$to:g}=p;l.rangeHasMark(f.pos,g.pos,t)&&i.removeMark(f.pos,g.pos,t)}if(!i.docChanged)return!1;n?.(i.scrollIntoView())}return!1};var id=200,xt=function(){};xt.prototype.append=function(e){return e.length?(e=xt.from(e),!this.length&&e||e.length<id&&this.leafAppend(e)||this.length<id&&e.leafPrepend(this)||this.appendInner(e)):this};xt.prototype.prepend=function(e){return e.length?xt.from(e).append(this):this};xt.prototype.appendInner=function(e){return new h2(this,e)};xt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?xt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};xt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};xt.prototype.forEach=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)};xt.prototype.map=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(o,l){return r.push(e(o,l))},n,i),r};xt.from=function(e){return e instanceof xt?e:e&&e.length?new Rv(e):xt.empty};var Rv=function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,l,c){for(var u=o;u<l;u++)if(r(this.values[u],c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,l,c){for(var u=o-1;u>=l;u--)if(r(this.values[u],c+u)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=id)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=id)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(xt);xt.empty=new Rv([]);var h2=function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,o,l){var c=this.left.length;if(r<c&&this.left.forEachInner(i,r,Math.min(o,c),l)===!1||o>c&&this.right.forEachInner(i,Math.max(r-c,0),Math.min(this.length,o)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,o,l){var c=this.left.length;if(r>c&&this.right.forEachInvertedInner(i,r-c,Math.max(o,c)-c,l+c)===!1||o<c&&this.left.forEachInvertedInner(i,Math.min(r,c),o,l)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(i,r):i>=o?this.right.slice(i-o,r-o):this.left.slice(i,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(xt),Lh=xt;var f2=500,No=class t{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,o;n&&(r=this.remapping(i,this.items.length),o=r.maps.length);let l=e.tr,c,u,p=[],f=[];return this.items.forEach((g,y)=>{if(!g.step){r||(r=this.remapping(i,y+1),o=r.maps.length),o--,f.push(g);return}if(r){f.push(new wi(g.map));let b=g.step.map(r.slice(o)),C;b&&l.maybeStep(b).doc&&(C=l.mapping.maps[l.mapping.maps.length-1],p.push(new wi(C,void 0,void 0,p.length+f.length))),o--,C&&r.appendMap(C,o)}else l.maybeStep(g.step);if(g.selection)return c=r?g.selection.map(r.slice(o)):g.selection,u=new t(this.items.slice(0,i).append(f.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:l,selection:c}}addTransform(e,n,i,r){let o=[],l=this.eventCount,c=this.items,u=!r&&c.length?c.get(c.length-1):null;for(let f=0;f<e.steps.length;f++){let g=e.steps[f].invert(e.docs[f]),y=new wi(e.mapping.maps[f],g,n),b;(b=u&&u.merge(y))&&(y=b,f?o.pop():c=c.slice(0,c.length-1)),o.push(y),n&&(l++,n=void 0),r||(u=y)}let p=l-i.depth;return p>g2&&(c=m2(c,p),l-=p),new t(c.append(o),l)}remapping(e,n){let i=new Ma;return this.items.forEach((r,o)=>{let l=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,l)},e,n),i}addMaps(e){return this.eventCount==0?this:new t(this.items.append(e.map(n=>new wi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(y=>{y.selection&&c--},r);let u=n;this.items.forEach(y=>{let b=o.getMirror(--u);if(b==null)return;l=Math.min(l,b);let C=o.maps[b];if(y.step){let M=e.steps[b].invert(e.docs[b]),A=y.selection&&y.selection.map(o.slice(u+1,b));A&&c++,i.push(new wi(C,M,A))}else i.push(new wi(C))},r);let p=[];for(let y=n;y<l;y++)p.push(new wi(o.maps[y]));let f=this.items.slice(0,r).append(p).append(i),g=new t(f,c);return g.emptyItemCount()>f2&&(g=g.compress(this.items.length-i.length)),g}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,r=[],o=0;return this.items.forEach((l,c)=>{if(c>=e)r.push(l),l.selection&&o++;else if(l.step){let u=l.step.map(n.slice(i)),p=u&&u.getMap();if(i--,p&&n.appendMap(p,i),u){let f=l.selection&&l.selection.map(n.slice(i));f&&o++;let g=new wi(p.invert(),u,f),y,b=r.length-1;(y=r.length&&r[b].merge(g))?r[b]=y:r.push(g)}}else l.map&&i--},this.items.length,0),new t(Lh.from(r.reverse()),o)}};No.empty=new No(Lh.empty,0);function m2(t,e){let n;return t.forEach((i,r)=>{if(i.selection&&e--==0)return n=r,!1}),t.slice(n)}var wi=class t{constructor(e,n,i,r){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}},Ci=class{constructor(e,n,i,r,o){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=r,this.prevComposition=o}},g2=20;function _2(t,e,n,i){let r=n.getMeta(Ao),o;if(r)return r.historyState;n.getMeta(b2)&&(t=new Ci(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(Ao))return l.getMeta(Ao).redo?new Ci(t.done.addTransform(n,void 0,i,rd(e)),t.undone,Fv(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ci(t.done,t.undone.addTransform(n,void 0,i,rd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),u=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-i.newGroupDelay||!v2(n,t.prevRanges)),p=l?Hh(t.prevRanges,n.mapping):Fv(n.mapping.maps[n.steps.length-1]);return new Ci(t.done.addTransform(n,u?e.selection.getBookmark():void 0,i,rd(e)),No.empty,p,n.time,c??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Ci(t.done.rebased(n,o),t.undone.rebased(n,o),Hh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ci(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Hh(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function v2(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,r)=>{for(let o=0;o<e.length;o+=2)i<=e[o+1]&&r>=e[o]&&(n=!0)}),n}function Fv(t){let e=[];return t.forEach((n,i,r,o)=>e.push(r,o)),e}function Hh(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),o=e.map(t[i+1],-1);r<=o&&n.push(r,o)}return n}function y2(t,e,n){let i=rd(e),r=Ao.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,i);if(!o)return null;let l=o.selection.resolve(o.transform.doc),c=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),r,i),u=new Ci(n?c:o.remaining,n?o.remaining:c,null,0,-1);return o.transform.setSelection(l).setMeta(Ao,{redo:n,historyState:u})}var zh=!1,Bv=null;function rd(t){let e=t.plugins;if(Bv!=e){zh=!1,Bv=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){zh=!0;break}}return zh}var Ao=new wn("history"),b2=new wn("closeHistory");function Vv(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new At({key:Ao,state:{init(){return new Ci(No.empty,No.empty,null,0,-1)},apply(e,n,i){return _2(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,r=i=="historyUndo"?sd:i=="historyRedo"?Wa:null;return r?(n.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function od(t,e){return(n,i)=>{let r=Ao.getState(n);if(!r||(t?r.undone:r.done).eventCount==0)return!1;if(i){let o=y2(r,n,t);o&&i(e?o.scrollIntoView():o)}return!0}}var sd=od(!1,!0),Wa=od(!0,!0),FH=od(!1,!1),BH=od(!0,!1);var tr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ld={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},w2=typeof navigator<"u"&&/Mac/.test(navigator.platform),C2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Xe=0;Xe<10;Xe++)tr[48+Xe]=tr[96+Xe]=String(Xe);var Xe;for(Xe=1;Xe<=24;Xe++)tr[Xe+111]="F"+Xe;var Xe;for(Xe=65;Xe<=90;Xe++)tr[Xe]=String.fromCharCode(Xe+32),ld[Xe]=String.fromCharCode(Xe);var Xe;for(ad in tr)ld.hasOwnProperty(ad)||(ld[ad]=tr[ad]);var ad;function Lv(t){var e=w2&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||C2&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ld:tr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var x2=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function T2(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let i,r,o,l;for(let c=0;c<e.length-1;c++){let u=e[c];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))x2?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function S2(t){let e=Object.create(null);for(let n in t)e[T2(n)]=t[n];return e}function Wh(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Ga(t){return new At({props:{handleKeyDown:D2(t)}})}function D2(t){let e=S2(t);return function(n,i){let r=Lv(i),o,l=e[Wh(r,i)];if(l&&l(n.state,n.dispatch,n))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let c=e[Wh(r,i,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(o=tr[i.keyCode])&&o!=r){let c=e[Wh(o,i)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var M2=["imgEl"],k2=t=>({"NgxEditor__Resizer--Active":t});function E2(t,e){if(t&1){let n=Te();E(0,"span",4)(1,"span",5),z("mousedown",function(r){re(n);let o=R();return oe(o.startResizing(r,"left"))}),k(),E(2,"span",6),z("mousedown",function(r){re(n);let o=R();return oe(o.startResizing(r,"right"))}),k(),E(3,"span",7),z("mousedown",function(r){re(n);let o=R();return oe(o.startResizing(r,"left"))}),k(),E(4,"span",8),z("mousedown",function(r){re(n);let o=R();return oe(o.startResizing(r,"right"))}),k()()}}var O2=["ngxEditor"],I2=["*"];function A2(t,e){if(t&1&&(E(0,"div",12),$(1),we(2,"async"),k()),t&2){let n=R(2);D(),it(" ",Ce(2,1,(n.href.errors==null?null:n.href.errors.pattern)&&n.getLabel("enterValidUrl"))," ")}}function N2(t,e){if(t&1&&(E(0,"div",12),$(1),k()),t&2){let n=R(2);D(),it(" ",(n.text.errors==null?null:n.text.errors.required)&&"This is required"," ")}}function P2(t,e){if(t&1&&(E(0,"div",4)(1,"div",5)(2,"label"),q(3,"input",13),$(4),we(5,"async"),k()()()),t&2){let n=R(2);D(4),it(" ",Ce(5,1,n.getLabel("openInNewTab"))," ")}}function R2(t,e){if(t&1){let n=Te();E(0,"div",2)(1,"form",3),z("ngSubmit",function(r){re(n);let o=R();return oe(o.insertLink(r))}),E(2,"div",4)(3,"div",5)(4,"label",6),$(5),we(6,"async"),k(),q(7,"input",7),J(8,A2,3,3,"div",8),k()(),E(9,"div",4)(10,"div",5)(11,"label",6),$(12),we(13,"async"),k(),q(14,"input",9),J(15,N2,2,1,"div",8),k()(),J(16,P2,6,3,"div",10),E(17,"button",11),$(18),we(19,"async"),k()()()}if(t&2){let n=R();D(),I("formGroup",n.form),D(3),I("htmlFor",n.getId("link-popup-url")),D(),We(Ce(6,12,n.getLabel("url"))),D(2),I("id",n.getId("link-popup-url")),D(),I("ngIf",n.href.touched&&n.href.invalid),D(3),I("htmlFor",n.getId("link-popup-label")),D(),We(Ce(13,14,n.getLabel("text"))),D(2),I("id",n.getId("link-popup-label")),D(),I("ngIf",n.text.touched&&n.text.invalid),D(),I("ngIf",n.options.showOpenInNewTab),D(),I("disabled",!n.form.valid),D(),We(Ce(19,16,n.getLabel("insert")))}}var F2=(t,e)=>({"NgxEditor__Dropdown--Active":t,"NgxEditor--Disabled":e});function B2(t,e){if(t&1){let n=Te();E(0,"button",4),we(1,"async"),z("mousedown",function(r){let o=re(n).$implicit,l=R(2);return oe(l.onDropdownItemMouseClick(r,o))})("keydown.enter",function(r){let o=re(n).$implicit,l=R(2);return oe(l.onDropdownItemKeydown(r,o))})("keydown.space",function(r){let o=re(n).$implicit,l=R(2);return oe(l.onDropdownItemKeydown(r,o))}),$(2),we(3,"async"),k()}if(t&2){let n=e.$implicit,i=R(2);I("ngClass",fi(8,F2,n===i.activeItem,i.disabledItems.includes(n)))("ariaLabel",Ce(1,4,i.getName(n))),ze("aria-selected",n===i.activeItem),D(2),it(" ",Ce(3,6,i.getName(n))," ")}}function V2(t,e){if(t&1&&(E(0,"div",2),J(1,B2,4,11,"button",3),k()),t&2){let n=R();D(),I("ngForOf",n.items)("ngForTrackBy",n.trackByIndex)}}function L2(t,e){if(t&1&&(E(0,"div",12),$(1),we(2,"async"),k()),t&2){let n=R(2);D(),it(" ",Ce(2,1,(n.src.errors==null?null:n.src.errors.pattern)&&n.getLabel("enterValidUrl"))," ")}}function H2(t,e){if(t&1){let n=Te();E(0,"div",2)(1,"form",3),z("ngSubmit",function(r){re(n);let o=R();return oe(o.insertLink(r))}),E(2,"div",4)(3,"div",5)(4,"label",6),$(5),we(6,"async"),k(),q(7,"input",7),J(8,L2,3,3,"div",8),k()(),E(9,"div",4)(10,"div",5)(11,"label",6),$(12),we(13,"async"),k(),q(14,"input",9),k()(),E(15,"div",4)(16,"div",5)(17,"label",6),$(18),we(19,"async"),k(),q(20,"input",10),k()(),E(21,"button",11),$(22),we(23,"async"),k()()()}if(t&2){let n=R();D(),I("formGroup",n.form),D(3),I("htmlFor",n.getId("image-popup-url")),D(),We(Ce(6,13,n.getLabel("url"))),D(2),I("id",n.getId("image-popup-url")),D(),I("ngIf",n.src.touched&&n.src.invalid),D(3),I("htmlFor",n.getId("image-popup-label")),D(),We(Ce(13,15,n.getLabel("altText"))),D(2),I("id",n.getId("image-popup-label")),D(3),I("htmlFor",n.getId("image-popup-title")),D(),We(Ce(19,17,n.getLabel("title"))),D(2),I("id",n.getId("image-popup-title")),D(),I("disabled",!n.form.valid||!n.form.dirty),D(),We(Ce(23,19,n.getLabel("insert")))}}var z2=(t,e)=>({backgroundColor:t,color:e}),W2=t=>({"NgxEditor__Color--Active":t});function G2(t,e){if(t&1){let n=Te();E(0,"button",7),z("mousedown",function(r){let o=re(n).$implicit,l=R(3);return oe(l.onColorSelectMouseClick(r,o))})("keydown.enter",function(){let r=re(n).$implicit,o=R(3);return oe(o.onColorSelectKeydown(r))})("keydown.space",function(){let r=re(n).$implicit,o=R(3);return oe(o.onColorSelectKeydown(r))}),k()}if(t&2){let n=e.$implicit,i=R(3);I("ngStyle",fi(3,z2,n,i.getContrastYIQ(n)))("title",n)("ngClass",Ot(6,W2,i.activeColors.includes(n)))}}function j2(t,e){if(t&1&&(E(0,"div",5),J(1,G2,1,8,"button",6),k()),t&2){let n=e.$implicit,i=R(2);D(),I("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}function $2(t,e){if(t&1){let n=Te();E(0,"div",2),J(1,j2,2,2,"div",3),E(2,"button",4),z("mousedown",function(r){re(n);let o=R();return oe(o.onRemoveMouseClick(r))})("keydown.enter",function(){re(n);let r=R();return oe(r.onRemoveKeydown())})("keydown.space",function(){re(n);let r=R();return oe(r.onRemoveKeydown())}),$(3),we(4,"async"),k()()}if(t&2){let n=R();D(),I("ngForOf",n.presets)("ngForTrackBy",n.trackByIndex),D(),I("disabled",!n.isActive),D(),it(" ",Ce(4,4,n.getLabel("remove"))," ")}}var U2=(t,e)=>({"NgxEditor--Disabled":t,"NgxEditor__MenuBar--Reverse":e});function q2(t,e){if(t&1&&q(0,"ngx-toggle-command",7),t&2){let n=R().$implicit,i=R(2);Mt(i.iconContainerClass),I("toolbarItem",n)}}function J2(t,e){if(t&1&&q(0,"ngx-insert-command",7),t&2){let n=R().$implicit,i=R(2);Mt(i.iconContainerClass),I("toolbarItem",n)}}function K2(t,e){if(t&1&&(br(0),q(1,"ngx-link",8),wr()),t&2){let n=R().$implicit,i=R(2);D(),Mt(i.iconContainerClass),I("options",i.getLinkOptions(n))}}function Y2(t,e){if(t&1&&q(0,"ngx-image"),t&2){let n=R(3);Mt(n.iconContainerClass)}}function Q2(t,e){if(t&1&&q(0,"ngx-dropdown",10),t&2){let n=e.$implicit,i=R(4);Mt(i.dropdownContainerClass),I("group",n.key)("items",n.value)}}function Z2(t,e){if(t&1&&(br(0),J(1,Q2,1,4,"ngx-dropdown",9),we(2,"keyvalue"),wr()),t&2){let n=R().$implicit,i=R(2);D(),I("ngForOf",Ce(2,2,i.getDropdownItems(n)))("ngForTrackBy",i.trackByIndex)}}function X2(t,e){if(t&1&&q(0,"ngx-color-picker",11),t&2){let n=R(3);Mt(n.iconContainerClass),I("presets",n.presets)}}function eN(t,e){if(t&1&&q(0,"ngx-color-picker",12),t&2){let n=R(3);Mt(n.iconContainerClass),I("presets",n.presets)}}function tN(t,e){if(t&1&&q(0,"div"),t&2){let n=R(3);Mt(n.seperatorClass)}}function nN(t,e){if(t&1&&(br(0),J(1,q2,1,3,"ngx-toggle-command",3)(2,J2,1,3,"ngx-insert-command",3)(3,K2,2,3,"ng-container",2)(4,Y2,1,2,"ngx-image",4)(5,Z2,3,4,"ng-container",2)(6,X2,1,3,"ngx-color-picker",5)(7,eN,1,3,"ngx-color-picker",6)(8,tN,1,2,"div",4),wr()),t&2){let n=e.$implicit,i=e.last,r=R().last,o=R();D(),I("ngIf",o.toggleCommands.includes(n)),D(),I("ngIf",o.insertCommands.includes(n)),D(),I("ngIf",o.isLinkItem(n)),D(),I("ngIf",n==="image"),D(),I("ngIf",o.isDropDown(n)),D(),I("ngIf",n==="text_color"),D(),I("ngIf",n==="background_color"),D(),I("ngIf",i&&!r)}}function iN(t,e){if(t&1&&(br(0),J(1,nN,9,8,"ng-container",1),wr()),t&2){let n=e.$implicit,i=R();D(),I("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}function rN(t,e){if(t&1&&(br(0),Kg(1,13),wr()),t&2){let n=R();D(),I("ngTemplateOutlet",n.customMenuRef)}}var oN=(t=!0)=>new At({key:new wn("editable"),state:{init(){return t},apply(e,n){return e.getMeta("UPDATE_EDITABLE")??n}},props:{editable(e){return this.getState(e)},attributes(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}}),sN="NgxEditor__Placeholder",aN=t=>new At({key:new wn("placeholder"),state:{init(){return t??""},apply(e,n){return e.getMeta("UPDATE_PLACEHOLDER")??n}},props:{decorations(e){let{doc:n}=e,{textContent:i,childCount:r}=n,o=this.getState(e);if(!o||r>1)return Gt.empty;let l=[],c=(u,p)=>{if(u.type.isBlock&&u.childCount===0&&i.length===0){let f=p,g=p+u.nodeSize,y=bi.node(f,g,{class:sN,"data-placeholder":o,"data-align":u.attrs.align??null});l.push(y)}return!1};return n.descendants(c),Gt.create(n,l)}}}),lN=(t={})=>new At({key:new wn("attributes"),props:{attributes:t}}),cN=t=>new At({key:new wn("focus"),props:{handleDOMEvents:{focus:()=>(t(),!1)}}}),dN=t=>new At({key:new wn("blur"),props:{handleDOMEvents:{blur:()=>(t(),!1)}}}),uN=(()=>{let e=class e{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new He}startResizing(i,r){i.preventDefault(),this.resizeImage(i,r)}resizeImage(i,r){let o=i.pageX,l=this.imgEl.nativeElement.clientWidth,c=r==="left",{width:u}=window.getComputedStyle(this.view.dom),p=parseInt(u,10),f=y=>{let C=y.pageX-o,M=c?l-C:l+C;M>p||M<20||(this.outerWidth=`${M}px`)},g=y=>{y.preventDefault(),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g),this.imageResize.emit()};document.addEventListener("mousemove",f),document.addEventListener("mouseup",g)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngx-image-view"]],viewQuery:function(r,o){if(r&1&&rs(M2,7),r&2){let l;kt(l=Et())&&(o.imgEl=l.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[["imgEl",""],[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(r,o){r&1&&(E(0,"span",1),J(1,E2,5,0,"span",2),q(2,"img",3,0),k()),r&2&&($u("width",o.outerWidth),I("ngClass",Ot(7,k2,o.selected)),D(),I("ngIf",o.selected),D(),I("src",o.src,Qr)("alt",o.alt)("title",o.title))},dependencies:[Ht,Xr],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]});let t=e;return t})(),Gh=class{constructor(e,n,i,r){this.updating=!1,this.handleResize=()=>{if(this.updating)return;let{state:o,dispatch:l}=this.view,{tr:c}=o,u=c.setNodeMarkup(this.getPos(),void 0,_t(Ae({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),p=u.doc.resolve(this.getPos()),f=new ie(p);u.setSelection(f),l(u)},this.applicationRef=r.get(sa),this.imageComponentRef=as(uN,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(e.attrs),this.imageComponentRef.instance.view=n,this.dom=this.imageComponentRef.location.nativeElement,this.view=n,this.node=e,this.getPos=i,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(e,n){return JSON.stringify(e)===JSON.stringify(n)}setNodeAttributes(e){this.imageComponentRef.instance.src=e.src,this.imageComponentRef.instance.alt=e.alt,this.imageComponentRef.instance.title=e.title,this.imageComponentRef.instance.outerWidth=e.width}update(e){return e.type!==this.node.type?!1:(this.node=e,this.computeChanges(this.node.attrs,e.attrs)&&(this.updating=!0,this.setNodeAttributes(e.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}},pN=t=>new At({key:new wn("image-resize"),props:{nodeViews:{image:(e,n,i)=>new Gh(e,n,i,t)}}}),hN=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,Kv=t=>{let e=[];return t.forEach(n=>{if(n.isText){let i=n.text,r=0,o=hN.exec(i);if(o){let l=o.index,c=l+o[0].length,{link:u}=n.type.schema.marks;l>0&&e.push(n.cut(r,l));let p=i.slice(l,c);e.push(n.cut(l,c).mark(u.create({href:p}).addToSet(n.marks))),r=c}r<i.length&&e.push(n.cut(r))}else e.push(n.copy(Kv(n.content)))}),L.fromArray(e)},fN=()=>new At({key:new wn("linkify"),props:{transformPasted:t=>new W(Kv(t.content),t.openStart,t.openEnd)}}),Yv=t=>typeof t=="string",mN=()=>window.trustedTypes,Qv=t=>mN()?.isHTML(t)??!1,Zv=t=>Yv(t)||Qv(t),Xv={type:"doc",content:[{type:"paragraph"}]},gN=(t,e)=>{let n=e??za,i=n.nodeFromJSON(t),r=Ki.fromSchema(n).serializeFragment(i.content),o=document.createElement("div");return o.appendChild(r),o.innerHTML},_N=(t,e,n)=>{let i=e??za,r=document.createElement("div");return r.innerHTML=t,Or.fromSchema(i).parse(r,n).toJSON()},Hv=(t,e,n)=>{if(!t)return e.nodeFromJSON(Xv);if(!Zv(t))return e.nodeFromJSON(t);let i=_N(t,e,n);return e.nodeFromJSON(i)},ey=(()=>{let e=class e{constructor(i,r,o){this.renderer=i,this.injector=r,this.elementRef=o,this.placeholder="Type Here...",this.focusOut=new He,this.focusIn=new He,this.unsubscribe=new nt,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(i){!this.outputFormat&&Zv(i)&&(this.outputFormat="html"),this.editor.setContent(i??Xv)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.setMeta("UPDATE_EDITABLE",!i),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",i)}handleChange(i){if(this.outputFormat==="html"){let r=gN(i,this.editor.schema);this.onChange(r);return}this.onChange(i)}setMeta(i,r){let{dispatch:o,state:{tr:l}}=this.editor.view;o(l.setMeta(i,r))}setPlaceholder(i){this.setMeta("UPDATE_PLACEHOLDER",i)}registerPlugins(){this.editor.registerPlugin(oN()),this.editor.registerPlugin(aN(this.placeholder)),this.editor.registerPlugin(lN({class:"NgxEditor__Content"})),this.editor.registerPlugin(cN(()=>{this.focusIn.emit()})),this.editor.registerPlugin(dN(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin(pN(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(fN())}ngOnInit(){if(!this.editor)throw new _s("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe(Ke(this.unsubscribe)).subscribe(i=>{this.handleChange(i)})}ngOnChanges(i){i.placeholder&&!i.placeholder.isFirstChange()&&this.setPlaceholder(i.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};e.\u0275fac=function(r){return new(r||e)(K(ra),K(Li),K(vt))},e.\u0275cmp=le({type:e,selectors:[["ngx-editor"]],viewQuery:function(r,o){if(r&1&&rs(O2,7),r&2){let l;kt(l=Et())&&(o.ngxEditor=l.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[gn([{provide:Sr,useExisting:On(()=>e),multi:!0}]),In],ngContentSelectors:I2,decls:3,vars:0,consts:[["ngxEditor",""],[1,"NgxEditor"]],template:function(r,o){r&1&&(Ul(),E(0,"div",1,0),ql(2),k())},styles:[`:root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}
`],encapsulation:2});let t=e;return t})(),Vr=(()=>{let e=class e{constructor(){this.customMenuRefChange=new nt}setCustomMenuRef(i){this.customMenuRefChange.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xi=class{constructor(e){this.name=e}apply(){return(e,n)=>{let{schema:i}=e,r=i.marks[this.name];return r?Vh(r)(e,n):!1}}toggle(){return(e,n)=>{let{schema:i}=e,r=i.marks[this.name];return r?Io(r)(e,n):!1}}isActive(e){let{schema:n}=e,i=n.marks[this.name];return i?nd(e,i):!1}canExecute(e){return this.toggle()(e)}},jh=class{toggle(){return(e,n)=>{let{schema:i}=e,r=i.nodes.blockquote;return r?this.isActive(e)?bv(e,n):xv(r)(e,n):!1}}isActive(e){let{schema:n}=e,i=n.nodes.blockquote;return i?Ph(e,i):!1}canExecute(e){return this.toggle()(e)}},$h=class{insert(){return(e,n)=>{let{schema:i,tr:r}=e,o=i.nodes.horizontal_rule;return o?(n(r.replaceSelectionWith(o.create()).scrollIntoView()),!0):!1}}canExecute(e){return Av(e,e.schema.nodes.horizontal_rule)}},Is=class{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,n)=>{let{schema:i}=e,r=this.getType(i);return r?this.isActive(e)?Th(i.nodes.list_item)(e,n):fv(r)(e,n):!1}}isActive(e){let{schema:n}=e,i=this.getType(n);return i?Ph(e,i):!1}canExecute(e){return this.toggle()(e)}},nr=class{constructor(e){this.level=e}apply(){return(e,n)=>{let{schema:i}=e,r=i.nodes.heading;return r?ed(r)(e,n):!1}}toggle(){return(e,n)=>{let{schema:i,selection:r,doc:o}=e,l=i.nodes.heading;if(!l)return!1;let c=r.$from.before(1),p=o.nodeAt(c)?.attrs??{};return this.isActive(e)?ed(i.nodes.paragraph,p)(e,n):ed(l,_t(Ae({},p),{level:this.level}))(e,n)}}isActive(e){let{schema:n}=e,i=Rh(e),r=n.nodes.heading;if(!r)return!1;let o=[r,n.nodes.text,n.nodes.blockquote];return!!i.filter(u=>o.includes(u.type)).find(u=>u.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}},Po=class{constructor(e){this.align=e}toggle(){return(e,n)=>{let{doc:i,selection:r,tr:o,schema:l}=e,{from:c,to:u}=r,p=!1;return i.nodesBetween(c,u,(f,g)=>{let y=f.type;if([l.nodes.paragraph,l.nodes.heading].includes(y)){p=!0;let b=f.attrs.align===this.align?null:this.align;o.setNodeMarkup(g,y,_t(Ae({},f.attrs),{align:b}))}return!0}),p?(o.docChanged&&n?.(o),!0):!1}}isActive(e){return!!Rh(e).find(r=>r.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}},vN={strict:!0},Uh=class{update(e){return(n,i)=>{let{schema:r,selection:o}=n,l=r.marks.link;return!l||o.empty?!1:Io(l,e)(n,i)}}insert(e,n){return(i,r)=>{let{schema:o,tr:l}=i;if(!o.marks.link)return!1;let u={href:n.href,title:n.title??e,target:n.target??"_blank"},p=o.text(e,[o.marks.link.create(u)]);return l.replaceSelectionWith(p,!1).scrollIntoView(),l.docChanged?(r?.(l),!0):!1}}isActive(e,n=vN){if(n.strict)return!0;let{schema:i}=e,r=i.marks.link;return r?nd(e,r):!1}remove(e,n){return Nv()(e,n)}canExecute(e){let n={href:""};return this.insert("Exec",n)(e)||this.update(n)(e)}},ty=class{insert(e,n){return(i,r)=>{let{schema:o,tr:l,selection:c}=i,u=o.nodes.image;if(!u)return!1;let p=Ae({width:null,src:e},n);!p.width&&c instanceof ie&&c.node.type===u&&(p.width=c.node.attrs.width),l.replaceSelectionWith(u.createAndFill(p));let f=l.doc.resolve(l.selection.anchor-l.selection.$anchor.nodeBefore.nodeSize);return l.setSelection(new ie(f)).scrollIntoView(),l.docChanged?(r?.(l),!0):!1}}isActive(e){let{selection:n}=e;return n instanceof ie?n.node.type.name==="image":!1}},Os=class{constructor(e,n="color"){this.name=e,this.attrName=n}apply(e){return(n,i)=>{let{schema:r,selection:o,doc:l}=n,c=r.marks[this.name];if(!c)return!1;let{from:u,to:p,empty:f}=o;if(!f&&u+1===p){let g=l.nodeAt(u);if(g?.isAtom&&!g.isText&&g.isLeaf)return!1}return Vh(c,e)(n,i)}}isActive(e){let{schema:n}=e,i=n.marks[this.name];return i?nd(e,i):!1}getActiveColors(e){if(!this.isActive(e))return[];let{schema:n}=e;return Iv(e).filter(o=>o.type===n.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(e,n)=>{let{schema:i}=e,r=i.marks[this.name];return r?Pv(r)(e,n):!1}}canExecute(e){let n=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(n)(e)}},yN=["link"],qh=class{insert(){return(e,n)=>{let{tr:i}=e,{ranges:r,empty:o}=i.selection;return o||(Object.entries(e.schema.marks).forEach(([l,c])=>{yN.includes(l)||r.forEach(u=>{i.removeMark(u.$from.pos,u.$to.pos,c)})}),n(i)),!0}}canExecute(){return!0}},bN=["paragraph","heading","blockquote"],zv=0,Wv=10,wN=(t,e,n)=>{let i=t.doc.nodeAt(e);if(!i)return!1;let r=i.attrs.indent??0,o=h_(r+(n==="increase"?1:-1),zv,Wv);if(o===r||o<zv||o>Wv)return!1;let l=_t(Ae({},i.attrs),{indent:o});return t.setNodeMarkup(e,i.type,l),!0},As=class{constructor(e){this.method="increase",this.method=e}insert(){return(e,n)=>{let{tr:i,doc:r}=e,{from:o,to:l}=i.selection,c=!1;return r.nodesBetween(o,l,(u,p)=>{let f=u.type;return bN.includes(f.name)?(c=wN(i,p,this.method),!1):!u.type.name.includes("list")}),c?(i.docChanged&&n?.(i),!0):!1}}canExecute(e){return this.insert()(e)}},dd=class{constructor(e){this.mode="undo",this.mode=e}insert(){return(e,n)=>this.mode==="undo"?sd(e,n):Wa(e,n)}canExecute(e){return this.insert()(e)}},CN=new xi("strong"),xN=new xi("em"),TN=new xi("code"),SN=new xi("u"),DN=new xi("s"),MN=new jh,kN=new $h,EN=new qh,ON=new Is(!0),IN=new Is(!1),AN=new nr(1),NN=new nr(2),PN=new nr(3),RN=new nr(4),FN=new nr(5),BN=new nr(6),VN=new Po("left"),LN=new Po("center"),HN=new Po("right"),zN=new Po("justify"),WN=new Uh,GN=new ty,jN=new Os("text_color","color"),$N=new Os("text_background_color","backgroundColor"),UN=new As("increase"),qN=new As("decrease"),JN=new xi("sup"),KN=new xi("sub"),YN=new dd("undo"),QN=new dd("redo"),ud={bold:CN,italic:xN,code:TN,underline:SN,strike:DN,blockquote:MN,bullet_list:ON,ordered_list:IN,h1:AN,h2:NN,h3:PN,h4:RN,h5:FN,h6:BN,align_left:VN,align_center:LN,align_right:HN,align_justify:zN,superscript:JN,subscript:KN},Gv={horizontal_rule:kN,format_clear:EN,indent:UN,outdent:qN,undo:YN,redo:QN},ja=WN,jv=GN,ZN=jN,XN=$N,Jh={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},Kh=class{constructor(e={}){this.locals=Jh,this.get=n=>{let i=this.locals[n];return i?Fg(i)?i:vr(i):vr("")},this.locals=Ae(Ae({},Jh),e)}},eP=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,tP=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,nP=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,iP=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,rP=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,oP=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,sP=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,aP=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,lP=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,cP=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,dP=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,uP=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,pP=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,hP=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,fP=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,mP=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,gP=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,_P=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,vP=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,yP='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',bP='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',wP='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',CP='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',xP='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',TP='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',SP=20,DP=20,MP="currentColor",ny={bold:eP,italic:tP,code:nP,underline:iP,strike:rP,ordered_list:oP,bullet_list:sP,blockquote:aP,link:lP,unlink:cP,image:dP,align_left:uP,align_center:pP,align_right:hP,align_justify:fP,text_color:mP,color_fill:gP,horizontal_rule:_P,format_clear:vP,indent:yP,outdent:bP,superscript:wP,subscript:CP,undo:xP,redo:TP,path:"<path></path>"},Yh=class{static get(e,n=MP){let i=ny[e];return i&&(i.includes("<path")||i.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${n}
          height=${SP}
          width=${DP}
        >
          ${i}
        </svg>
      `:i}},Qh=(()=>{let e=class e{constructor(){this.locals={},this.icons={}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ro=(()=>{let e=class e{constructor(i){this.config=i}get locals(){return new Kh(this.config.locals)}getIcon(i){return this.config.icons[i]?this.config.icons[i]:Yh.get(i)}};e.\u0275fac=function(r){return new(r||e)(Vi(Qh,8))},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$v=t=>({locals:t.locals??{},icons:t.icons??{}}),Ns=(()=>{let e=class e{constructor(i){this.sanitizer=i}transform(i){return Qv(i)?i:this.sanitizer.bypassSecurityTrustHtml(i)}};e.\u0275fac=function(r){return new(r||e)(K(t0,16))},e.\u0275pipe=Gg({name:"sanitizeHtml",type:e,pure:!0});let t=e;return t})(),kP=(()=>{let e=class e{get name(){return this.toolbarItem}constructor(i,r){this.ngxeService=i,this.menuService=r,this.isActive=!1,this.disabled=!1,this.update=o=>{let{state:l}=o,c=ud[this.name];this.isActive=c.isActive(l),this.disabled=!c.canExecute(l)}}toggle(){let{state:i,dispatch:r}=this.editorView;ud[this.name].toggle()(i,r)}onMouseClick(i){i.preventDefault(),i.button===0&&this.toggle()}onKeydown(){this.toggle()}getTitle(i){return this.ngxeService.locals.get(i)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(Ro),K(Vr))},e.\u0275cmp=le({type:e,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:14,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(r,o){r&1&&(E(0,"button",0),we(1,"sanitizeHtml"),we(2,"async"),we(3,"async"),z("mousedown",function(c){return o.onMouseClick(c)})("keydown.enter",function(){return o.onKeydown()})("keydown.space",function(){return o.onKeydown()}),k()),r&2&&(Re("NgxEditor__MenuItem--Active",o.isActive)("NgxEditor--Disabled",o.disabled),I("disabled",o.disabled)("innerHTML",Ce(1,8,o.html),di)("title",Ce(2,10,o.getTitle(o.name)))("ariaLabel",Ce(3,12,o.getTitle(o.name))))},dependencies:[eo,Ns]});let t=e;return t})(),EP=(()=>{let e=class e{get name(){return this.toolbarItem}constructor(i,r){this.ngxeService=i,this.menuService=r,this.disabled=!1,this.update=o=>{let{state:l}=o,c=Gv[this.name];this.disabled=!c.canExecute(l)}}onMouseClick(i){i.preventDefault(),i.button===0&&this.insert()}onKeydown(){this.insert()}insert(){let{state:i,dispatch:r}=this.editorView;Gv[this.name].insert()(i,r)}getTitle(i){return this.ngxeService.locals.get(i)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(Ro),K(Vr))},e.\u0275cmp=le({type:e,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:12,consts:[[1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(r,o){r&1&&(E(0,"button",0),we(1,"sanitizeHtml"),we(2,"async"),we(3,"async"),z("mousedown",function(c){return o.onMouseClick(c)})("keydown.enter",function(){return o.onKeydown()})("keydown.space",function(){return o.onKeydown()}),k()),r&2&&(Re("NgxEditor--Disabled",o.disabled),I("disabled",o.disabled)("innerHTML",Ce(1,6,o.html),di)("title",Ce(2,8,o.getTitle(o.name)))("ariaLabel",Ce(3,10,o.getTitle(o.name))))},dependencies:[eo,Ns]});let t=e;return t})(),Uv={showOpenInNewTab:!0},OP=(()=>{let e=class e{constructor(i,r,o){this.el=i,this.ngxeService=r,this.menuService=o,this.options=Uv,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.componentId=Mp(),this.setText=()=>{let{state:{selection:l,doc:c}}=this.editorView,{empty:u,from:p,to:f}=l,g=u?"":c.textBetween(p,f);g&&(this.text.patchValue(g),this.text.disable())},this.update=l=>{let{state:c}=l;this.isActive=ja.isActive(c,{strict:!1}),this.canExecute=ja.canExecute(c)}}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(i){!this.el.nativeElement.contains(i.target)&&this.showPopup&&this.hidePopup()}getId(i){return`${i}-${this.componentId}`}getLabel(i){return this.ngxeService.locals.get(i)}hidePopup(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}togglePopup(){let{state:i,dispatch:r}=this.editorView;if(this.isActive){ja.remove(i,r);return}this.showPopup=!this.showPopup,this.showPopup&&this.setText()}onTogglePopupMouseClick(i){i.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}insertLink(i){i.preventDefault();let{text:r,href:o,openInNewTab:l}=this.form.getRawValue(),{dispatch:c,state:u}=this.editorView,{selection:p}=u,f;this.options.showOpenInNewTab&&(f=l?"_blank":"_self");let g={title:o,href:o,target:f};p.empty?(ja.insert(r,g)(u,c),this.editorView.focus()):ja.update(g)(u,c),this.hidePopup()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new no({href:new ji("",[Tr.required,Tr.pattern(this.menuService.editor.linkValidationPattern)]),text:new ji("",[Tr.required]),openInNewTab:new ji(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(vt),K(Ro),K(Vr))},e.\u0275cmp=le({type:e,selectors:[["ngx-link"]],hostBindings:function(r,o){r&1&&z("mousedown",function(c){return o.onDocumentClick(c)},!1,ia)},inputs:{options:[te.HasDecoratorInputTransform,"options","options",i=>Ae(Ae({},Uv),i)]},features:[Jg],decls:5,vars:16,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","href","formControlName","href","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off",3,"id"],["class","NgxEditor__Popup--FormGroup",4,"ngIf"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"],["type","checkbox","formControlName","openInNewTab"]],template:function(r,o){r&1&&(E(0,"button",0),we(1,"sanitizeHtml"),we(2,"async"),we(3,"async"),z("mousedown",function(c){return o.onTogglePopupMouseClick(c)})("keydown.enter",function(){return o.onTogglePopupKeydown()})("keydown.space",function(){return o.onTogglePopupKeydown()}),k(),J(4,R2,20,18,"div",1)),r&2&&(Re("NgxEditor__MenuItem--Active",o.isActive||o.showPopup)("NgxEditor--Disabled",!o.canExecute),I("disabled",!o.canExecute)("innerHTML",Ce(1,10,o.icon),di)("title",Ce(2,12,o.title))("ariaLabel",Ce(3,14,o.title))("ariaExpanded",o.showPopup),D(4),I("ngIf",o.showPopup))},dependencies:[Xr,ro,_n,Zu,vn,io,pc,hc,eo,Ns]});let t=e;return t})(),IP=(()=>{let e=class e{constructor(i,r,o){this.ngxeService=i,this.menuService=r,this.el=o,this.isDropdownOpen=!1,this.disabledItems=[],this.update=l=>{let{state:c}=l;this.disabledItems=[];let u=[];this.items.forEach(p=>{let f=ud[p];f.isActive(c)&&u.push(p),f.canExecute(c)||this.disabledItems.push(p)}),u.length===1?[this.activeItem]=u:this.activeItem=null}}get isSelected(){return!!(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(i){!this.el.nativeElement.contains(i)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(i){return this.ngxeService.locals.get(i)}getIsDropdownActive(i){return this.activeItem===i}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onToggleDropdownMouseClick(i){i.preventDefault(),i.button===0&&this.toggleDropdown()}onToggleDropdownKeydown(){this.toggleDropdown()}trackByIndex(i){return i}selectItem(i){let r=ud[i],{state:o,dispatch:l}=this.editorView;r.toggle()(o,l),this.isDropdownOpen=!1}onDropdownItemMouseClick(i,r){i.preventDefault(),i.button===0&&this.selectItem(r)}onDropdownItemKeydown(i,r){i.preventDefault(),this.selectItem(r)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(Ro),K(Vr),K(vt))},e.\u0275cmp=le({type:e,selectors:[["ngx-dropdown"]],hostBindings:function(r,o){r&1&&z("mousedown",function(c){return o.onDocumentClick(c.target)},!1,ia)},inputs:{group:"group",items:"items"},decls:5,vars:13,consts:[["type","button","aria-haspopup","listbox",1,"NgxEditor__Dropdown--Text",3,"mousedown","keydown.enter","keydown.space","disabled","ariaLabel","ariaExpanded"],["class","NgxEditor__Dropdown--DropdownMenu","role","listbox",4,"ngIf"],["role","listbox",1,"NgxEditor__Dropdown--DropdownMenu"],["type","button","class","NgxEditor__Dropdown--Item","role","option",3,"ngClass","ariaLabel","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","role","option",1,"NgxEditor__Dropdown--Item",3,"mousedown","keydown.enter","keydown.space","ngClass","ariaLabel"]],template:function(r,o){r&1&&(E(0,"button",0),we(1,"async"),z("mousedown",function(c){return o.onToggleDropdownMouseClick(c)})("keydown.enter",function(){return o.onToggleDropdownKeydown()})("keydown.space",function(){return o.onToggleDropdownKeydown()}),$(2),we(3,"async"),k(),J(4,V2,2,2,"div",1)),r&2&&(Re("NgxEditor__Dropdown--Selected",o.isSelected)("NgxEditor--Disabled",o.isDropdownDisabled),I("disabled",o.isDropdownDisabled)("ariaLabel",Ce(1,9,o.getName(o.activeItem||o.group)))("ariaExpanded",o.isDropdownOpen),D(2),it(" ",Ce(3,11,o.getName(o.activeItem||o.group)),`
`),D(2),I("ngIf",o.isDropdownOpen))},dependencies:[Ht,Yl,Xr,eo]});let t=e;return t})(),AP=(()=>{let e=class e{constructor(i,r,o){this.el=i,this.ngxeService=r,this.menuService=o,this.showPopup=!1,this.isActive=!1,this.componentId=Mp(),this.form=new no({src:new ji("",[Tr.required,Tr.pattern(`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)`)]),alt:new ji(""),title:new ji("")}),this.update=l=>{let{state:c}=l;this.isActive=jv.isActive(c)}}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(i){!this.el.nativeElement.contains(i.target)&&this.showPopup&&this.hideForm()}getId(i){return`${i}-${this.componentId}`}getLabel(i){return this.ngxeService.locals.get(i)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}togglePopup(){this.showPopup=!this.showPopup,this.showPopup&&this.fillForm()}onTogglePopupMouseClick(i){i.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}fillForm(){let{state:i}=this.editorView,{selection:r}=i;if(r instanceof ie&&this.isActive){let{src:o,alt:l="",title:c=""}=r.node.attrs;this.form.setValue({src:o,alt:l,title:c})}}insertLink(i){i.preventDefault();let{src:r,alt:o,title:l}=this.form.getRawValue(),{dispatch:c,state:u}=this.editorView,p={alt:o,title:l};jv.insert(r,p)(u,c),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(vt),K(Ro),K(Vr))},e.\u0275cmp=le({type:e,selectors:[["ngx-image"]],hostBindings:function(r,o){r&1&&z("mousedown",function(c){return o.onDocumentClick(c)},!1,ia)},decls:5,vars:13,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","href","formControlName","src","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off",3,"id"],["type","text","formControlName","title","autocomplete","off",3,"id"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(r,o){r&1&&(E(0,"button",0),we(1,"sanitizeHtml"),we(2,"async"),we(3,"async"),z("mousedown",function(c){return o.onTogglePopupMouseClick(c)})("keydown.enter",function(){return o.onTogglePopupKeydown()})("keydown.space",function(){return o.onTogglePopupKeydown()}),k(),J(4,H2,24,21,"div",1)),r&2&&(Re("NgxEditor__MenuItem--Active",o.isActive||o.showPopup),I("innerHTML",Ce(1,7,o.icon),di)("title",Ce(2,9,o.getLabel("insertImage")))("ariaLabel",Ce(3,11,o.getLabel("insertImage")))("ariaExpanded",o.showPopup),D(4),I("ngIf",o.showPopup))},dependencies:[Xr,ro,_n,vn,io,pc,hc,eo,Ns]});let t=e;return t})(),NP=(()=>{let e=class e{constructor(i,r,o){this.el=i,this.menuService=r,this.ngxeService=o,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=l=>{let{state:c}=l;this.canExecute=this.command.canExecute(c),this.isActive=this.command.isActive(c),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(c))}}get title(){return this.getLabel(this.type==="text_color"?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon(this.type==="text_color"?"text_color":"color_fill")}get command(){return this.type==="text_color"?ZN:XN}getContrastYIQ(i){let r=i.replace("#",""),o=parseInt(r.substring(0,2),16),l=parseInt(r.substring(2,4),16),c=parseInt(r.substring(4,6),16);return(o*299+l*587+c*114)/1e3>=128?"black":"white"}onDocumentClick(i){!this.el.nativeElement.contains(i.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(){this.showPopup=!this.showPopup}onTogglePopupMouseClick(i){i.preventDefault(),i.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}remove(){let{state:i,dispatch:r}=this.editorView;this.command.remove()(i,r),this.hidePopup()}onRemoveMouseClick(i){i.preventDefault(),i.button===0&&(i.preventDefault(),this.remove())}onRemoveKeydown(){this.remove()}trackByIndex(i){return i}selectColor(i){let{state:r,dispatch:o}=this.editorView;if(this.type==="text_color"){let l={color:i};this.command.apply(l)(r,o)}else{let l={backgroundColor:i};this.command.apply(l)(r,o)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}onColorSelectMouseClick(i,r){i.preventDefault(),i.button===0&&this.selectColor(r)}onColorSelectKeydown(i){this.selectColor(i)}getLabel(i){return this.ngxeService.locals.get(i)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(vt),K(Vr),K(Ro))},e.\u0275cmp=le({type:e,selectors:[["ngx-color-picker"]],hostBindings:function(r,o){r&1&&z("mousedown",function(c){return o.onDocumentClick(c)},!1,ia)},inputs:{presets:"presets",type:"type"},decls:5,vars:15,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"mousedown","keydown.enter","keydown.space","disabled"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"mousedown","keydown.enter","keydown.space","ngStyle","title","ngClass"]],template:function(r,o){r&1&&(E(0,"button",0),we(1,"sanitizeHtml"),we(2,"async"),we(3,"async"),z("mousedown",function(c){return o.onTogglePopupMouseClick(c)})("keydown.enter",function(){return o.onTogglePopupKeydown()})("keydown.space",function(){return o.onTogglePopupKeydown()}),k(),J(4,$2,5,6,"div",1)),r&2&&(Re("NgxEditor__MenuItem--Active",o.isActive||o.showPopup)("NgxEditor--Disabled",!o.canExecute),I("disabled",!o.canExecute)("innerHTML",Ce(1,9,o.icon),di)("title",Ce(2,11,o.title))("ariaLabel",Ce(3,13,o.title)),D(4),I("ngIf",o.showPopup))},dependencies:[Ht,Yl,Xr,Xg,eo,Ns],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']});let t=e;return t})();var PP=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]];var RP=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],iy=(()=>{let e=class e{constructor(i){this.menuService=i,this.toolbar=PP,this.colorPresets=RP,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify","superscript","subscript"],this.insertCommands=["horizontal_rule","format_clear","indent","outdent","undo","redo"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--IconContainer"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){let r=[];return this.colorPresets.forEach((o,l)=>{let c=Math.floor(l/8);r[c]||r.push([]),r[c].push(o)}),r}trackByIndex(i){return i}isDropDown(i){return!!i?.heading}getDropdownItems(i){return i}isLinkItem(i){return i==="link"?!0:typeof i=="object"&&typeof i?.link=="object"}isLinkWithOptions(i){return typeof i=="object"&&typeof i?.link=="object"}getLinkOptions(i){return i?.link}ngOnInit(){if(!this.editor)throw new _s("Required editor instance to initialize menu component");this.menuService.editor=this.editor}};e.\u0275fac=function(r){return new(r||e)(K(Vr))},e.\u0275cmp=le({type:e,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[gn([Vr])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"options"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(r,o){r&1&&(E(0,"div",0),J(1,iN,2,2,"ng-container",1)(2,rN,2,1,"ng-container",2),k()),r&2&&(I("ngClass",fi(4,U2,o.disabled,o.dropdownPlacement==="top")),D(),I("ngForOf",o.toolbar)("ngForTrackBy",o.trackByIndex),D(),I("ngIf",o.customMenuRef))},dependencies:[Ht,Yl,Xr,Cr,kP,EP,OP,IP,AP,NP,e0]});let t=e;return t})();var FP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ci({type:e}),e.\u0275inj=li({providers:[Ns],imports:[Ku,N0]});let t=e;return t})(),cd=new qn("NgxEditorConfig"),qv={locals:Jh,icons:ny},ry=(()=>{let e=class e{static forRoot(i=qv){return{ngModule:e,providers:[{provide:cd,useValue:i},{provide:Qh,useFactory:$v,deps:[cd]}]}}static forChild(i=qv){return{ngModule:e,providers:[{provide:cd,useValue:i},{provide:Qh,useFactory:$v,deps:[cd]},Ro]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ci({type:e}),e.\u0275inj=li({imports:[Ku,FP]});let t=e;return t})();var nn=(t,e=!1)=>(n,i)=>{let r=new xi(t);return e?r.toggle()(n,i):r.apply()(n,i)},Zh=class{constructor(e){if(this.applyTrx=n=>{this.state=this.state.apply(n??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=n=>{this.applyTrx(n)},!e)throw new _s("Required view to initialize commands.");this.view=e,this.state=e.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;let e=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);let n=this.tr.setMeta("FORCE_EMIT",e);return this.view.dispatch(n),!0}focus(e="end"){let n=e==="start"?me.atStart(this.state.doc):me.atEnd(this.state.doc);return this.tr.setSelection(n),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(e){return this.tr.insertText(e),this.applyTrx(),this}insertNewLine(){return Es(...[Mh,Oh,Ih,Ah])(this.state,this.dispatch),this}applyMark(e){return nn(e,!1)(this.state,this.dispatch),this}toggleMark(e){return nn(e,!0)(this.state,this.dispatch),this}bold(){return nn("strong")(this.state,this.dispatch),this}toggleBold(){return nn("strong",!0)(this.state,this.dispatch),this}italics(){return nn("em")(this.state,this.dispatch),this}toggleItalics(){return nn("em",!0)(this.state,this.dispatch),this}underline(){return nn("u")(this.state,this.dispatch),this}toggleUnderline(){return nn("u",!0)(this.state,this.dispatch),this}strike(){return nn("s")(this.state,this.dispatch),this}toggleStrike(){return nn("s",!0)(this.state,this.dispatch),this}code(){return nn("code")(this.state,this.dispatch),this}toggleCode(){return nn("code",!0)(this.state,this.dispatch),this}superscript(){return nn("sup")(this.state,this.dispatch),this}subscript(){return nn("sub")(this.state,this.dispatch),this}toggleOrderedList(){return new Is(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new Is(!0).toggle()(this.state,this.dispatch),this}toggleHeading(e){return new nr(e).toggle()(this.state,this.dispatch),this}insertLink(e,n){return new Uh().insert(e,n)(this.state,this.dispatch),this}updateLink(e){return new Uh().update(e)(this.state,this.dispatch),this}insertImage(e,n={}){return new ty().insert(e,n)(this.state,this.dispatch),this}textColor(e){return new Os("text_color").apply({color:e})(this.state,this.dispatch),this}backgroundColor(e){return new Os("text_background_color").apply({backgroundColor:e})(this.state,this.dispatch),this}removeTextColor(){return new Os("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new Os("text_background_color").remove()(this.state,this.dispatch),this}align(e){return new Po(e).toggle()(this.state,this.dispatch),this}insertHTML(e){let{selection:n,schema:i,tr:r}=this.state,{from:o,to:l}=n,c=document.createElement("div");c.innerHTML=Yv(e)?e.trim():e;let u=Or.fromSchema(i).parseSlice(c),p=r.replaceRange(o,l,u);return this.applyTrx(p),this}indent(){return new As("increase").insert()(this.state,this.dispatch),this}outdent(){return new As("decrease").insert()(this.state,this.dispatch),this}},BP=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,VP=t=>td(/^\s*>\s$/,t),LP=t=>td(/^(?:\d+)\.\s$/,t,e=>({order:Number(e[1])}),(e,n)=>n.childCount+n.attrs.order===Number(e[1])),HP=t=>td(/^\s*(?:[-+*])\s$/,t),zP=t=>Nh(/^```$/,t),WP=(t,e)=>Nh(new RegExp(`^(#{1,${e}})\\s$`),t,n=>({level:n[1].length})),GP=t=>Bh(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,t),jP=t=>Bh(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,t),$P=t=>{let e=Ov.concat(Ev,kv);return e.push(GP(t.marks.strong)),e.push(jP(t.marks.em)),e.push(VP(t.nodes.blockquote)),e.push(LP(t.nodes.ordered_list)),e.push(HP(t.nodes.bullet_list)),e.push(zP(t.nodes.code_block)),e.push(WP(t.nodes.heading,6)),Mv({rules:e})},UP=(t,e)=>{let n={};n["Mod-z"]=sd,BP?n["Shift-Mod-z"]=Wa:n["Mod-y"]=Wa;let i=[Ga({"Mod-b":Io(t.marks.strong),"Mod-i":Io(t.marks.em),"Mod-u":Io(t.marks.u),"Mod-`":Io(t.marks.code)}),Ga({Enter:mv(t.nodes.list_item),"Shift-Enter":Es(Eh,(r,o)=>{let{tr:l}=r,c=t.nodes.hard_break;return o(l.replaceSelectionWith(c.create()).scrollIntoView()),!0}),"Mod-[":Th(t.nodes.list_item),"Mod-]":Sh(t.nodes.list_item),Tab:Sh(t.nodes.list_item)}),Ga(Sv)];return e.history&&i.push(Ga(n)),i},qP=(t,e)=>{let n=[];return e.keyboardShortcuts&&n.push(...UP(t,{history:e.history})),e.history&&n.push(Vv()),e.inputRules&&n.push($P(t)),n},oy={linkOnPaste:!0,resizeImage:!0},Jv={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:za,plugins:[],nodeViews:{},attributes:{},features:oy,handleScrollToSelection:null,linkValidationPattern:`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)|(mailto:.*[@].*)`},pd=class{constructor(e=Jv){this.valueChangesSubject=new nt,this.updateSubject=new nt,this.options=Ae(Ae({},Jv),e),this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||za}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new Zh(this.view)}get features(){return Ae(Ae({},oy),this.options.features)}handleTransactions(e){let n=this.view.state.apply(e);if(this.view.updateState(n),this.updateSubject.next(this.view),!e.docChanged&&!e.getMeta("FORCE_EMIT"))return;let i=n.doc.toJSON();this.valueChangesSubject.next(i)}createEditor(){let{options:e,schema:n}=this,{content:i=null,nodeViews:r}=e,{history:o=!0,keyboardShortcuts:l=!0,inputRules:c=!0}=e,u=Hv(i,n,e.parseOptions),p=e.plugins??[],f=e.attributes??{},g=qP(n,{history:o,keyboardShortcuts:l,inputRules:c});this.view=new Qc(null,{state:zc.create({doc:u,schema:n,plugins:[...g,...p]}),nodeViews:r,dispatchTransaction:this.handleTransactions.bind(this),attributes:f,handleScrollToSelection:e.handleScrollToSelection})}setContent(e){if(p_(e))return;let{state:n}=this.view,{tr:i,doc:r}=n,o=Hv(e,this.schema,this.options.parseOptions);i.replaceWith(0,n.doc.content.size,o),!r.eq(i.doc)&&i.docChanged&&this.view.dispatch(i)}registerPlugin(e){let{state:n}=this.view,i=[...n.plugins,e],r=n.reconfigure({plugins:i});this.view.updateState(r)}destroy(){this.view.destroy()}};var Vn=(()=>{let e=class e{constructor(){this.name=be.required(),this.size=be(16),this.color=be(),this.textColor=ss(()=>this.color()===void 0?"":"text-"+this.color()),this.href=ss(()=>"assets/images/icons/bootstrap-icons-selected.svg#"+this.name())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-icon"]],inputs:{name:[te.SignalBased,"name"],size:[te.SignalBased,"size"],color:[te.SignalBased,"color"]},standalone:!0,features:[ye],decls:2,vars:4,consts:[["fill","currentColor",1,"bi",3,"ngClass"]],template:function(r,o){r&1&&($g(),E(0,"svg",0),q(1,"use"),k()),r&2&&(I("ngClass",o.textColor()),ze("width",o.size())("height",o.size()),D(),ze("href",o.href(),null,"xlink"))},dependencies:[Ht],encapsulation:2});let t=e;return t})();var KP=t=>({"mt-2":t}),YP=(t,e)=>({"small-editor":t,"large-editor":e});function QP(t,e){if(t&1){let n=Te();E(0,"div",0),q(1,"div",2),E(2,"button",3),z("click",function(){re(n);let r=R();return oe(r.makeEditable())}),q(3,"app-icon",4),k()()}if(t&2){let n=R();I("ngClass",Ot(2,KP,!n.small())),D(),I("innerHTML",n.content(),di)}}function ZP(t,e){if(t&1){let n=Te();E(0,"button",10),z("click",function(){re(n);let r=R(2);return oe(r.closeEditable())}),q(1,"app-icon",11),k()}t&2&&(D(),I("size",24))}function XP(t,e){if(t&1){let n=Te();E(0,"div",1)(1,"div",5),q(2,"ngx-editor-menu",6),J(3,ZP,2,1,"button",7),k(),E(4,"div",8)(5,"ngx-editor",9),z("ngModelChange",function(r){re(n);let o=R();return oe(o.onContentChange(r))}),k()()()}if(t&2){let n=R();I("ngClass",fi(6,YP,n.small(),!n.small())),D(2),I("editor",n.editor)("toolbar",n.toolbar),D(),Ee(3,n.createMode()?-1:3),D(2),I("editor",n.editor)("ngModel",n.content())}}var eR={history:!0},hd=(()=>{let e=class e{constructor(){this.editMode=!1,this.content=be(""),this.createMode=be(!1),this.contentUpdated=fn(),this.small=be(!1),this.commonToolBar=[["undo"],["bold","italic"],["ordered_list","bullet_list"]],this.toolbar=[]}ngOnInit(){this.createMode()&&this._makeEditable()}initEditor(){this.editor===void 0&&(this.editor=new pd(eR),this.toolbar=this.small()?[...this.commonToolBar,["link"]]:[...this.commonToolBar,["link","image"]])}ngOnDestroy(){this.editor?.destroy()}onContentChange(i){this.createMode()&&this.contentUpdated.emit({editMode:this.editMode,content:this.content()})}makeEditable(){this._makeEditable(),this.contentUpdated.emit({editMode:this.editMode,content:this.content()})}_makeEditable(){this.editMode=!0,this.initEditor()}closeEditable(){this.editMode=!1,this.contentUpdated.emit({editMode:this.editMode,content:this.content()})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-custom-editor"]],inputs:{content:[te.SignalBased,"content"],createMode:[te.SignalBased,"createMode"],small:[te.SignalBased,"small"]},outputs:{contentUpdated:"contentUpdated"},standalone:!0,features:[ye],decls:2,vars:2,consts:[[1,"position-relative","content-display","ps-1",3,"ngClass"],[3,"ngClass"],[3,"innerHTML"],["type","button",1,"btn","btn-link","bg-transparent","top-right-button-edit",3,"click"],["name","pencil-fill"],[1,"menu-wrapper"],[3,"editor","toolbar"],["type","button",1,"btn","btn-link","bg-transparent","top-right-button-save"],[1,"editor-wrapper"],[3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-link","bg-transparent","top-right-button-save",3,"click"],["name","check-lg","color","success",3,"size"]],template:function(r,o){r&1&&J(0,QP,4,4,"div",0)(1,XP,6,9,"div",1),r&2&&(Ee(0,o.editMode?-1:0),D(),Ee(1,o.editMode&&o.editor?1:-1))},dependencies:[Ht,Vn,ry,ey,iy,mi,vn,Qn],styles:[".menu-wrapper[_ngcontent-%COMP%]{border:var(--bs-border-width) solid var(--bs-border-color);border-bottom:0;border-radius:4px 4px 0 0;position:relative}.editor-wrapper[_ngcontent-%COMP%]{border:var(--bs-border-width) solid var(--bs-border-color);border-radius:0 0 4px 4px}.top-right-button[_ngcontent-%COMP%], .top-right-button-save[_ngcontent-%COMP%], .top-right-button-edit[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.top-right-button-edit[_ngcontent-%COMP%]{font-size:1.2rem;padding:.25rem}.top-right-button-save[_ngcontent-%COMP%]{font-size:1.5rem;padding:0 .3rem}.content-display[_ngcontent-%COMP%]{min-height:2rem}"]});let t=e;return t})();var tR=t=>({"btn-sm":t}),Ps=(()=>{let e=class e{constructor(){this.icon=be.required(),this.iconClicked=fn(),this.small=be(!1),this.title=be(),this.color=be()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-icon-button"]],inputs:{icon:[te.SignalBased,"icon"],small:[te.SignalBased,"small"],title:[te.SignalBased,"title"],color:[te.SignalBased,"color"]},outputs:{iconClicked:"iconClicked"},standalone:!0,features:[ye],decls:2,vars:6,consts:[[1,"btn","bg-body",3,"click","ngClass"],[3,"name","color"]],template:function(r,o){r&1&&(E(0,"button",0),z("click",function(){return o.iconClicked.emit()}),q(1,"app-icon",1),k()),r&2&&(I("ngClass",Ot(4,tR,o.small)),ze("title",o.title),D(),I("name",o.icon())("color",o.color()))},dependencies:[Ht,Vn],encapsulation:2});let t=e;return t})();var nR=t=>({small:t});function iR(t,e){if(t&1){let n=Te();E(0,"button",2),z("click",function(){re(n);let r=R();return oe(r.tagDeleted.emit(r.label()))}),k()}}var fd=(()=>{let e=class e{constructor(){this.label=be(""),this.editable=be(!1),this.tagDeleted=fn(),this.small=be(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-chip"]],inputs:{label:[te.SignalBased,"label"],editable:[te.SignalBased,"editable"],small:[te.SignalBased,"small"]},outputs:{tagDeleted:"tagDeleted"},standalone:!0,features:[ye],decls:4,vars:5,consts:[[1,"d-inline-flex","bg-body-tertiary","text-nowrap","align-items-center","chip-display","px-1",3,"ngClass"],["type","button",1,"btn-close","small","p-0","m-0","ms-1"],["type","button",1,"btn-close","small","p-0","m-0","ms-1",3,"click"]],template:function(r,o){r&1&&(E(0,"div",0)(1,"span"),$(2),k(),J(3,iR,1,0,"button",1),k()),r&2&&(I("ngClass",Ot(3,nR,o.small())),D(2),We(o.label()),D(),Ee(3,o.editable()?3:-1))},dependencies:[Ht],styles:[".chip-display[_ngcontent-%COMP%]{border:1px solid #333;border-radius:12px;margin:4px 8px 4px 0}"]});let t=e;return t})();function rR(t,e){if(t&1){let n=Te();E(0,"app-chip",5),z("tagDeleted",function(){let r=re(n).$implicit,o=R(2);return oe(o.tagDeleted.emit(r))}),k()}if(t&2){let n=e.$implicit;I("label",n)("editable",!0)}}function oR(t,e){if(t&1&&(E(0,"div",0),Vt(1,rR,1,2,"app-chip",4,zi),k()),t&2){let n=R();D(),Lt(n.tags())}}var md=(()=>{let e=class e{constructor(){this.tags=be([]),this.tagDeleted=fn(),this.tagAdded=fn(),this.newTag=""}addTag(){if(this.newTag.length>0){let i=this.newTag.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-");i.length>0&&(this.tagAdded.emit(i),this.newTag="")}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-tag-list-editable"]],inputs:{tags:[te.SignalBased,"tags"]},outputs:{tagDeleted:"tagDeleted",tagAdded:"tagAdded"},standalone:!0,features:[ye],decls:5,vars:2,consts:[[1,"d-inline-block","me-4"],[1,"d-inline-block"],["type","text","placeholder","add tag",1,"border-0","border-bottom","me-1",3,"ngModelChange","keydown.enter","ngModel"],["icon","plus-circle",3,"iconClicked"],[3,"label","editable"],[3,"tagDeleted","label","editable"]],template:function(r,o){r&1&&(E(0,"div"),J(1,oR,3,0,"div",0),E(2,"div",1)(3,"input",2),hi("ngModelChange",function(c){return pi(o.newTag,c)||(o.newTag=c),c}),z("keydown.enter",function(){return o.addTag()}),k(),E(4,"app-icon-button",3),z("iconClicked",function(){return o.addTag()}),k()()()),r&2&&(D(),Ee(1,o.tags().length>0?1:-1),D(2),ui("ngModel",o.newTag))},dependencies:[fd,mi,_n,vn,Qn,Ps],encapsulation:2});let t=e;return t})();var sy=(()=>{let e=class e{constructor(){this.activeModal=j(gs),this.title="",this.summary="",this.tags=[],this.summaryEditMode=!1}onSubmit(){this.activeModal.close()}onSummaryChange(i){this.summaryEditMode=i.editMode,i.editMode||(this.summary=i.content)}addTag(i){this.tags.push(i)}deleteTag(i){this.tags=this.tags.filter(r=>r!==i)}cancel(){this.activeModal.close("cancel")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-new-idea-modal"]],standalone:!0,features:[ye],decls:20,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],["id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["id","summary",3,"contentUpdated","content","small","createMode"],[3,"tagAdded","tagDeleted","tags"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary","me-3",3,"click"],["type","button",1,"btn","btn-outline-primary",3,"click"]],template:function(r,o){r&1&&(E(0,"div",0)(1,"h5",1),$(2,"Submit a new Idea"),k(),E(3,"button",2),z("click",function(){return o.activeModal.dismiss("Cross click")}),k()(),E(4,"div",3)(5,"form")(6,"h6"),$(7,"Title"),k(),E(8,"div",4)(9,"input",5),hi("ngModelChange",function(c){return pi(o.title,c)||(o.title=c),c}),k()(),E(10,"h6",6),$(11,"Summary"),k(),E(12,"app-custom-editor",7),z("contentUpdated",function(c){return o.onSummaryChange(c)}),k(),E(13,"div",6)(14,"app-tag-list-editable",8),z("tagAdded",function(c){return o.addTag(c)})("tagDeleted",function(c){return o.deleteTag(c)}),k()()()(),E(15,"div",9)(16,"button",10),z("click",function(){return o.cancel()}),$(17,"Cancel "),k(),E(18,"button",11),z("click",function(){return o.onSubmit()}),$(19,"Submit"),k()()),r&2&&(D(9),ui("ngModel",o.title),D(3),I("content",o.summary)("small",!0)("createMode",!0),D(2),I("tags",o.tags))},dependencies:[mi,ro,_n,vn,io,pa,Qn,ua,hd,md]});let t=e;return t})();function Xh(t){return Array.isArray(t)?t:[t]}var ef;try{ef=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ef=!1}var ay=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Yu(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||ef)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(Vi(ju))},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ly=new Set,Fo,aR=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cR}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&lR(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(Vi(ay),Vi(Ug,8))},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lR(t,e){if(!ly.has(t))try{Fo||(Fo=document.createElement("style"),e&&Fo.setAttribute("nonce",e),Fo.setAttribute("type","text/css"),document.head.appendChild(Fo)),Fo.sheet&&(Fo.sheet.insertRule(`@media ${t} {body{ }}`,0),ly.add(t))}catch(n){console.error(n)}}function cR(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var dy=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new nt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return cy(Xh(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=cy(Xh(i)).map(c=>this._registerQuery(c).observable),l=Hu(o);return l=Vg(l.pipe(yr(1)),l.pipe(Hl(1),Vl(0))),l.pipe(Qt(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:f})=>{u.matches=u.matches||p,u.breakpoints[f]=p}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),l={observable:new ts(c=>{let u=p=>this._zone.run(()=>c.next(p));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(zl(r),Qt(({matches:c})=>({query:i,matches:c})),Ke(this._destroySubject)),mql:r};return this._queries.set(i,l),l}};e.\u0275fac=function(r){return new(r||e)(Vi(aR),Vi(Hi))},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cy(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var $a={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function uR(t,e){if(t&1&&q(0,"app-chip",0),t&2){let n=e.$implicit,i=R();I("label",n)("small",i.small())}}var uy=(()=>{let e=class e{constructor(){this.tags=be([]),this.small=be(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-tag-list"]],inputs:{tags:[te.SignalBased,"tags"],small:[te.SignalBased,"small"]},standalone:!0,features:[ye],decls:3,vars:0,consts:[[3,"label","small"]],template:function(r,o){r&1&&(E(0,"div"),Vt(1,uR,1,2,"app-chip",0,zi),k()),r&2&&(D(),Lt(o.tags()))},dependencies:[fd],encapsulation:2});let t=e;return t})();function pR(t,e){if(t&1&&(E(0,"div",0)(1,"div",1)(2,"h6",2),$(3),k(),q(4,"div",3)(5,"app-tag-list",4),E(6,"div",5)(7,"span",6),q(8,"app-icon",7),E(9,"span",8),$(10),k()(),E(11,"span",9),q(12,"app-icon",10),E(13,"span",8),$(14),k()(),E(15,"span",11),q(16,"app-icon",12),E(17,"span",8),$(18),k()(),q(19,"span",13),E(20,"button",14),$(21,"Details "),k()()()()),t&2){let n=R();D(3),Qg("IDEA-",n.idea().id," ",n.idea().title,""),D(),I("innerHTML",n.idea().summary,di),D(),I("tags",n.idea().tags)("small",!0),D(5),We(n.idea().viewCount),D(4),We(n.idea().voteCount),D(4),We(n.idea().commentCount),D(2),Jl("routerLink","/ideas/details/",n.idea().id,"")}}var py=(()=>{let e=class e{constructor(){this.idea=be.required()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-idea-card"]],inputs:{idea:[te.SignalBased,"idea"]},standalone:!0,features:[ye],decls:1,vars:1,consts:[[1,"card","h-100"],[1,"card-body","pb-2"],[1,"card-title"],[1,"mb-1","summary",3,"innerHTML"],[3,"tags","small"],[1,"d-flex","mt-2"],["title","Views"],["name","eye"],[1,"ms-1","me-3"],["title","Votes"],["name","hand-thumbs-up"],["title","Comments"],["name","chat-left"],[1,"spacer"],["type","button",1,"btn","btn-link","py-0","text-decoration-none",3,"routerLink"]],template:function(r,o){r&1&&J(0,pR,22,10,"div",0),r&2&&Ee(0,o.idea()?0:-1)},dependencies:[uy,Vn,Zl],styles:[".summary[_ngcontent-%COMP%]{max-height:20rem!important;overflow:auto}"]});let t=e;return t})();var gd=(()=>{let e=class e{constructor(){this.collapsed=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-nav-header"]],standalone:!0,features:[ye],decls:20,vars:4,consts:[[1,"navbar","navbar-expand-md","bg-primary","navbar-dark"],[1,"container-fluid"],[1,"d-inline-flex","align-items-center"],["src","assets/images/icons/yoga.svg","alt",""],["href","#",1,"navbar-brand","ms-2","me-3"],[1,"text-white","d-none","d-lg-inline-block","pt-1"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarContent",1,"navbar-collapse"],[1,"spacer"],[1,"d-inline-block","mt-2","mt-md-0","ms-0","ms-lg-3"],["type","button","routerLink","/user/profile","title","Profile",1,"btn","btn-primary","position-relative"],[1,"position-absolute","d-inline-block","notifications","translate-middle","bg-danger","border","border-light","rounded-circle"],[1,"visually-hidden"],["name","person-circle",3,"size"],["type","button","title","SignOut",1,"btn","btn-primary","ms-2"],["name","box-arrow-right",3,"size"]],template:function(r,o){r&1&&(E(0,"nav",0)(1,"div",1)(2,"div",2),q(3,"img",3),E(4,"a",4),$(5,"SadhSangat"),k(),E(6,"small",5),$(7,"In company of the Learned!"),k()(),E(8,"button",6),z("click",function(){return o.collapsed=!o.collapsed}),q(9,"span",7),k(),E(10,"div",8),q(11,"span",9),E(12,"div",10)(13,"button",11)(14,"div",12)(15,"span",13),$(16,"New alerts"),k()(),q(17,"app-icon",14),k(),E(18,"button",15),q(19,"app-icon",16),k()()()()()),r&2&&(D(10),Re("collapse",o.collapsed),D(7),I("size",24),D(2),I("size",24))},dependencies:[Zl,Vn],styles:[".notifications[_ngcontent-%COMP%]{top:8px;left:65%!important;padding:.25rem}"]});let t=e;return t})();var ir=Ag(tf());var _d={currentUser:{name:"Pooja Biswas",email:"pooja.biswas@gmail.com",memberSince:"2024-01-10",ideasPosted:1,comments:0,votes:2},ideas:[{id:1,title:"Bharat Nirmaan Project: Involving Students in Nation-Building",summary:[["<p>The Bharat Nirmaan Project (BNP) proposes the integration of two elective courses dedicated to nation-building","initiatives within the BTech curriculum of top-tier educational institutions like IITs.","By providing students with opportunities to engage in real-world projects aligned with India's development goals,","the initiative aims to channel the expertise and creativity of bright young minds towards collective efforts to fortify and advance the nation.","This will help loosen the strong top-down bureaucratic grip on innovation for the nation.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The Ministry of Human Resources and boards of top universities are the primary target audience for this proposal.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Presently, the majority of government roles are executed by bureaucrats, with limited opportunities for lateral entry.","Innovation process in government remains in a tight grip of a top-down bureaucracy.","Most of the brightest students of India, largely emerging from top-tier educational institutions, are anticipated to","predominantly engage in private sector endeavors, seldom crossing paths with bureaucrats in government roles.","This situation raises a pertinent question: how to get these highly capable individuals involved in nation building without employing them?</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>To enhance the focus on nation-building in top-tier educational institutions like IIT etc, the proposal is to include","2 elective courses dedicated to Bharat Nirmaan Projects (BNP), ideally scheduled in the second and final years of the BTech curriculum.</p>"],["<p>In these elective courses, students would have the flexibility to choose a subject or idea aligned with nation-building efforts.","The selected subject could be research-oriented, implementation-focused, or a blend of both, providing students with","a comprehensive and hands-on understanding of contributing to the betterment of the nation.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include representatives from the boards of top universities to help frame and advocate for the proposal.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope involves developing a detailed proposal to be presented to the Ministry of Human Resources and Development,","outlining the structure and implementation plan for integrating BNP courses into the BTech curriculum.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>If accepted, the proposal would lead to curated and well-researched project proposals from students, large scale","implementation of successful prototypes, and increased interest and investment in Research and Development (R&D) activities.","The attachment provides a detailed proposal for further consideration.</p>"]],tags:["student","project","nation","research"],commentCount:0,viewCount:115,attachmentCount:1,voteCount:19,submittedOn:"2024-02-01",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},attachments:[{attachmentId:1,by:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},label:"Proposal for Bharat Nirmaan Project",filePath:"https://drive.google.com/file/d/14lGHDcRJiNf5EYp-OOu-5Yb2HKYfjpPa/view",fileType:"pdf",on:"2024-02-02"}]},{id:2,title:"AI for Disease Detection: Building a Pipeline for Gathering and Labeling Medical Scans",summary:[["<p>AI holds immense potential for disease detection from medical scans (like like MRI scans, CT scans, X-rays etc),","but the lack of diverse and representative datasets hinders its effectiveness, especially in Indian healthcare settings.","To address this gap, the proposal suggests establishing a robust pipeline for collecting and labeling medical scans from Indian hospitals.","By creating a comprehensive and representative dataset, tailored to Indian conditions and patient demographics,","this initiative aims to enable the development of AI models capable of accurate disease detection, ultimately enhancing healthcare outcomes in India.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The primary stakeholders include healthcare organizations, AI researchers, medical professionals, and government agencies involved in public health initiatives.","Additionally, patients stand to benefit indirectly from improved disease detection and diagnosis.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Models, trained on data from western countries, are available to detect various deceases.","The problem lies in the inadequacy of diverse and representative medical scan datasets for training AI models in disease detection, particularly in the context of India.","By building a pipeline to collect and label medical scans from Indian hospitals, there is an opportunity to overcome this challenge and leverage AI for more effective healthcare solutions.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves developing a systematic workflow encompassing data collection, normalization, and labeling of medical scans sourced from Indian hospitals.","This process will ensure the creation of a large and diverse dataset that accurately reflects the conditions","encountered in Indian healthcare settings, facilitating the training of AI models for disease detection.","Apart from the technical challenges, there will be some complex logistical issues as well.","Collaboration with hospitals to provide the scans, or with experts who can label the scans is non-trivial.","Making them do it for free is even more complex.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should consist of interdisciplinary experts, including data scientists, medical professionals, domain specialists, project managers, and IT professionals.","Collaborations with hospitals, healthcare organizations, and academic institutions will also be crucial for successful implementation.</p>"],["<p><b>What is the scope?</b></p>"],["<p>Training a model is not in the scope of this idea.","One just needs to build a workflow to gather raw scan data.","It need not even focus on one kind of data or one diseases.","It should work for any kind of scans.","Same workflow should world for chest x-rays and eye scans, data being captured in different repositories obviously.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The project eventually aims to deliver a large repository of labeled medical scans tailored to Indian healthcare settings.","This dataset will serve as a foundational resource for AI researchers to develop and deploy disease detection models optimized for Indian patient populations.","Ultimately, the initiative seeks to advance medical diagnostics and improve healthcare outcomes in India through AI-enabled solutions.","Here the scope is limited to defining the workflow that can be used to gather scans, normalize it and then label it correctly.","Try it out with a manual process to gather 100 scans from a hospital on 5 occasions.","Different hospitals might scan in different format or size or technologies.","How are they normalized? How to use crowd sourcing for labelling? What incentives can be provided to the hospitals","and doctors for collaboration? How is privacy handled? Who owns the IP of the model which might be trained on this data? Not all questions needs to be answered in this case.","The defined workflow should be robust enough so that when something like covid strikes again, India should be","able to gather scans across India for a month or two and should be able to train a model soon after.</p>"]],tags:["ai","health","medical"],commentCount:0,viewCount:48,attachmentCount:0,voteCount:8,submittedOn:"2024-02-16",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:3,title:"Waste Exchange Platform for Recycling Optimization",summary:[["<p>Proposing a waste exchange platform to connect waste producers with recyclers, aiming to reduce landfill waste and promote recycling.","The platform facilitates efficient waste trade, decoupling recyclers from specific producers and incentivizing waste segregation and aggregation.","Through analysis and recommendations, the report aims to provide a detailed solution for software development and policy recommendations to promote recycling.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Waste producers such as cities and industries, as well as waste recyclers.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>There is a significant volume of recyclable waste going to landfills due to the lack of an efficient connection between waste producers and recyclers.","One-on-one deals are cumbersome and only feasible for large municipalities, discouraging smaller entities from recycling initiatives.","The absence of a marketplace for waste leads to minimal incentives for waste segregation and aggregation.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves creating a waste exchange portal where waste producers can list recyclable waste quantities for sale, while recyclers can bid for them.","This platform would enable efficient waste trade, allowing recyclers to purchase from any available producer rather than being tied to specific ones.","The platform should accommodate various waste types such as green garbage, fly ash, tyres, solar panels,","and aluminium/glass bottles, with solutions to optimize transportation, particularly for specialized waste that may need to be transported across states.","The proposed solution involves creating a waste exchange portal where waste producers can list recyclable waste quantities for sale, while recyclers can bid for them.","This platform would enable efficient waste trade, allowing recyclers to purchase from any available producer rather than being tied to specific ones.</p>"],["<p>Power supply is enabled by GenCo, TransCo and Disco.","Along with TransCo is a power exchanges which enabled power trade based on demand and supply.","Create an analysis report for a similar model for recycling, especially the role of the transco which ties the waste producers to large waste recycler.</p>"],["<p><b>Are there existing alternatives?</b></p>"],["<p>Existing alternatives include international sites like <a href='https://www.wastetrade.com/buy/' target='_blank'>Wastetrade</a>","and <a href='https://www.waste-outlet.com/product-listing/' target='_blank'>Waste-outlet</a>, ","along with an <a href='https://smartnet.niua.org/smartcode/solutions/waste-exchange.html' target='_blank'>Indian site</a> mentioned to be active in Tamil Nadu.","However, detailed access to these platforms is limited.","The backend code for a waste exchange platform in India is <a href='https://openforge.gov.in/plugins/git/iwx/waste-exchange-backend' target='_blank'>available</a>.</p>"],["<p><b>What is the scope?</b></p>"],["<p>Scope is limited to analysis report for a comprehensive solution recommendation.","Software and policy recommendation will follow later.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The analysis report provides a comprehensive solution recommendation for developing a waste exchange platform.","It includes detailed software requirements for platform development and policy recommendations to promote waste segregation, aggregation, and investment in recycling research.","By implementing the proposed solution, the aim is to significantly reduce landfill waste, increase recycling rates, and create a more sustainable waste management ecosystem.</p>"]],tags:["recycle","waste"],commentCount:0,viewCount:69,attachmentCount:0,voteCount:13,submittedOn:"2024-02-14",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:4,title:"Lake Portal and Health Index: Preserving India's Lakes",summary:[["<p>The Lake Portal and Health Index initiative aims to address the degradation of lakes across India by creating a","comprehensive database of lake information and developing an aggregate index to measure the health of these water bodies.","By providing transparent data and metrics, this project seeks to mobilize action from governments, NGOs, and citizens to rejuvenate and protect India's invaluable lake ecosystems.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Governments (state and central), NGOs, citizens.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Many lakes in India face various threats such as encroachment, pollution, and siltation, leading to their degradation and disappearance.","Despite government promises, the scale of the problem is often underestimated, and concerted action is lacking.","There is a need for a centralized platform to monitor and assess the health of lakes and facilitate informed decision-making and public engagement.","Say in Bengaluru, many lakes have degraded and some are very polluted like the infamous Bellandur lake.","This issue comes up only in the summer months when there is usual water scarcity in Bengaluru.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The Lake Portal and Health Index initiative proposes a multifaceted solution to address the challenges faced by India's lakes:</p>"],["<p><i>Lake Portal Development:</i></p>"],["<ul><li><p> Create a user-friendly web portal to register and catalog all lakes in India, including detailed information","such as name, location, current area, historical area, water source, water quality, presence of encroachment, and pollution levels.</p></li>"],["<li><p> Establish standardized protocols for data collection and verification, involving collaboration with government agencies, environmental experts, NGOs, and local communities.</p></li></ul>"],["<p><i>Lake Health Index Formulation:</i></p>"],["<ul><li><p> Develop a Lake Health Index (LHI) based on key metrics indicative of lake health, such as water quality, biodiversity, ecological integrity, encroachment, and conservation efforts.</p></li>"],["<li><p> Define a formula or methodology to calculate the LHI for individual lakes, considering factors like water clarity,","dissolved oxygen levels, nutrient concentrations, habitat availability, and regulatory compliance.</p></li>"],["<li><p> Aggregate the LHI scores at various levels, including city, state, and national levels, to assess the overall health of lakes and track trends over time.</p></li></ul>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>There are many NGOs and in some case lone individuals who have done a commendable jobs rejuvenating many lakes on their own.","They can provide guidance for this idea.</p>"],["<p><b>What is the scope?</b></p>"],["<p>Scope is limited to building the portal and the health index.","Policy advocacy will follow later.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The Lake Portal and Health Index initiative aims to build a comprehensive data repository.","Establish a centralized database of lake information to facilitate informed decision-making and resource allocation.","A repository which can provide empirical evidence of lake health and degradation trends to inform policy interventions and advocacy efforts.</p>"],["<p>Come up with the detailed proposal.","What information about the lakes will be captured? Some information are not that easy to get.","For example reaching out to the government to get original land records for the lake or to do a chemical test of the water of the lake are non-trivial tasks.","Who gathers all that information and how is it verified? Should there be teams who take ownership of each lake.","Define the detailed workflow so that the portal software can be built.</p>"],["<p>Also come up with a formula to calculate the lake health index and how to aggregate it at various levels.</p>"],["<p>By leveraging technology, data, and community engagement, the Lake Portal and Health Index initiative seeks to catalyze","collective action and foster a culture of stewardship towards India's precious lakes.</p>"],["<p>NGOs and citizens living next to the lake can rally around the portal.","Small local movements can be planned using the portal information.","Cumulative PILs can be filed based on information on this portal.","This can be started from cities and then taken to towns and villages.","Note that advocacy is not in scope, mentioned here just for completeness.</p>"]],tags:["lake","urban","water"],commentCount:0,viewCount:84,attachmentCount:0,voteCount:15,submittedOn:"2024-02-04",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:5,title:"Roadmap for Youth Sports Development",summary:[["<p>This proposal outlines a roadmap for young athletes aged 10 to 18 to navigate their journey from recreational sports participation to professional level proficiency.","The initiative addresses the lack of structured guidance for aspiring athletes, particularly in smaller cities and less popular sports.","The roadmap provides a clear progression path, starting with self-learning and culminating in professional training, tailored to the specific needs of each sport.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Budding sports persons, trainers, sports academies, and government bodies involved in sports development.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The lack of a clear pathway for young athletes to develop their skills and progress in sports is a significant challenge.","In smaller cities and for less popular sports, this problem is even more pronounced.","Many young athletes lack guidance on how to improve and whether they have the potential for higher-level competition.","A structured roadmap is needed to provide clarity and direction to aspiring athletes.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to create a roadmap for each sport, guiding young athletes from introductory levels to professional proficiency.","Taking badminton as an example, the roadmap could include self-learning resources such as instructional videos covering different kinds of serves, shots, smashes, defence, court management etc.","Annual assessments or tests can provide feedback and guide athletes to the next stage of training, whether it's local coaching or professional academies.","The roadmap aims to streamline the progression process and empower young athletes to pursue their sporting goals with confidence.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include sports coaches, mentors, and experts in each sport.","Collaboration with sports academies, training centers, and government bodies will be crucial for implementing the roadmap effectively.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>While there are some resources available for sports training and development, there is a lack of comprehensive and standardized roadmaps for young athletes across different sports.","Existing structures for popular sports like cricket provide a model, but similar guidance is lacking for other sports.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes defining a structured roadmap for each sport, outlining the progression from introductory levels to professional training.","The focus is on providing clear guidance and resources for young athletes to develop their skills and pursue their sporting aspirations.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>Define a roadmap for a sport.","Typically, self help, assessment, local training, assessment, professional training.","Do it for multiple sports.","Try to keep them as similar in approach as possible.","It helps in explaining it later.","Do not worry about who will provide the tests or training.","There will be academies, coaching centers that will plugin.","This is just to provide a platform for students and coaches to come together in a structured way.</p>"],["<p>Future considerations may include the development of an app or portal to facilitate access to resources and support for young athletes following the roadmap.</p>"]],tags:["sports","education"],commentCount:0,viewCount:58,attachmentCount:0,voteCount:11,submittedOn:"2024-02-07",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:6,title:"Planning for a Citizen-Sourced Service Issue Reporting Platform",summary:[["<p>This proposal outlines the planning phase for a citizen-sourced service issue reporting platform.","The platform aims to address the lack of transparency and accountability in government service issue reporting by","providing citizens with a user-friendly app to capture and report issues such as potholes and broken infrastructure.","Reports will be aggregated on a map for visualization, fostering transparency and efficient problem-solving.","The planning includes defining the workflow, UI mockups, and additional information capture for issue severity assessment.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Government agencies and citizens.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Existing channels for reporting government service issues lack transparency and accountability, leading to frustration among citizens.","There's a need for a platform where citizens can easily report service issues and track their resolution progress, promoting transparency and efficient problem-solving.","Government says everything is fine and the opposition says that nothing is working.","Reality is something in between.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to develop a user-friendly app where citizens can capture photos of service issues,","such as potholes or broken infrastructure, and upload them along with location data.","These reports will be aggregated and displayed on a map, allowing users to visualize the distribution of issues across different areas.","Since the platform is independent of government control, data manipulation or censorship is mitigated.</p>"],["<p>For example, one capture photo of a pothole with the latitude and longitude.","This information can be aggregated on the map at sector, city level.","People / government can zoom in to see each individual issue, along with the photo.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team requires a skilled web/app developer to execute the development of the platform.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>Check out <a href='https://www.fixmystreet.com/' target='_blank'>FixMyStreet</a>.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes planning the citizen-facing workflow and user interface (UI) mockups.","It excludes software development and government-side functionality for marking issues as resolved.","The current focus is on defining the reporting process and UI elements.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The planning phase involves defining the workflow for issue reporting like potholes, large garbage dumps, hooked up electric poles for power theft, broken water delivery pipe etc.","It captures additional information beyond photos, such as issue severity indicators.","For example, for potholes, width and depth measurements could indicate severity.","UI mockups will illustrate the reporting process and map visualization.","Additionally, defining criteria for initial user access, such as restricting the app to certain user groups like college students, will be outlined.</p>"]],tags:["issue","reporting"],commentCount:0,viewCount:62,attachmentCount:0,voteCount:10,submittedOn:"2024-02-13",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:7,title:"Common School Admission Portal",summary:[["<p>The proposal suggests creating a common admission portal for all schools in a city to streamline the admission process for parents and reduce logistical challenges.","The portal will centralize school listings, application submission, interview scheduling, and result publication,","simplifying the admission journey for parents while providing schools with a unified platform for admissions.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The primary target audience is parents seeking school admission for their children.","Schools will also utilize the portal for admissions.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Parents face challenges such as visiting multiple schools, managing admission forms, interview schedules, and refund processes during school admissions.","They take admission into multiple schools, as the admission happens on different days and then struggle for refunds.","A common portal can streamline this process and reduce the hassle for parents.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is a common admission portal with features including:</p>"],["<ul><li><p> Listing of all participating schools with seat availability details, class, board, fees and other details.</p></li>"],["<li><p> Single application form with photo</p></li>"],["<li><p> Ability to apply to multiple schools with fees</p></li>"],["<li><p> Management of interview schedules.</p></li>"],["<li><p> Synchronized result publication matching parent preferences.</p></li>"],["<li><p> Seat allocation process and final result.</p></li></ul>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include school administrators from various schools, parents for insights, and technical experts to develop the portal.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The proposal aims to research the challenges faced during school admissions in cities like Delhi or Bengaluru and propose a solution to streamline the process.","It outlines the features of the portal, integration with schools, matching results with parent preferences, and potential adoption strategies.","Once reviewed, the portal can be developed to simplify school admissions for parents and schools alike.","Basically come up with the proposal to reduce the logistical headache of the parents.","Note that this portal does not interfere with the fees structure or the interview process or admission criteria.","Also do an analysis about the chance of adoption for this project.","What kind of help from State or law can force the schools to use this portal.","Once the proposed solution is reviewed, a portal for the same can be built.</p>"]],tags:["school","admission","urban"],commentCount:0,viewCount:63,attachmentCount:0,voteCount:11,submittedOn:"2024-02-08",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:8,title:"Integrated Agrivoltaics: Maximizing Benefits through PM-KUSUM Scheme",summary:[["<p>This proposal aims to integrate agrivoltaics with the benefits of the Pradhan Mantri Kisan Urja Suraksha evam Utthaan Mahabhiyan ","<a href='https://www.india.gov.in/spotlight/pm-kusum-pradhan-mantri-kisan-urja-suraksha-evam-utthaan-mahabhiyan-scheme' target='_blank'>PM-KUSUM</a>","scheme to maximize land productivity and renewable energy generation.","By combining solar installations with agricultural and aquaculture practices, farmers can optimize land use and diversify income streams while contributing to renewable energy goals.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Farmers interested in maximizing land productivity, reducing energy costs, and contributing to renewable energy generation.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The PM-KUSUM scheme aims to set up decentralized grid-connected renewable energy power plants primarily on barren land.","However, limiting solar installations to barren land overlooks the potential for utilizing agricultural and fertile land for both solar energy generation and farming/aquaculture activities.","This presents an opportunity to promote agrivoltaics, which can enhance land productivity, promote sustainable agriculture, and support renewable energy goals.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to develop a DIY template for integrated agrivoltaics that combines solar installations with agriculture and aquaculture practices.","This template will provide guidelines and recommendations for farmers interested in implementing agrivoltaic systems on their land.","Key aspects to be addressed include:</p>"],["<p><i>Agricultural Integration</i> : Identify suitable crops and farming practices that can coexist with solar panels,","taking into account factors such as sunlight availability, spacing, irrigation requirements, and crop compatibility.</p>"],["<p><i>Aquaculture Integration</i> : Determine suitable fish species and pond structures that can be integrated with solar","installations, considering factors such as water depth, oxygenation, and temperature regulation.</p>"],["<p><i>Solar Panel Design</i> : Recommend optimal solar panel configurations, heights, and orientations to maximize energy","generation while minimizing shading and interference with agricultural/aquaculture activities.</p>"],["<p><i>Cost-Benefit Analysis</i> : Assess the economic viability of agrivoltaic systems, including upfront installation costs,","ongoing maintenance expenses, potential yield improvements, energy savings, and revenue from renewable energy generation.</p>"],["<p><i>Regulatory and Policy Considerations</i> : Provide guidance on regulatory requirements, permits, and incentives related","to agrivoltaic installations under PM-KUSUM, ensuring compliance with relevant laws and regulations.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include agricultural experts, aquaculture specialists, renewable energy professionals, and farmers with experience in implementing integrated agrivoltaic systems.","Collaboration with government agencies, research institutions, and industry stakeholders will be essential to ensure the effectiveness and scalability of the proposed template.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>While there are examples of farmers implementing agrivoltaic systems informally, there is a lack of standardized guidelines and templates for widespread adoption.","This proposal seeks to fill this gap by providing a structured approach to integrated agrivoltaics tailored to the PM-KUSUM scheme.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope of the proposal is to develop a comprehensive template for integrated agrivoltaics, covering agricultural, aquaculture, and solar energy aspects.","The template will serve as a practical guide for farmers interested in implementing agrivoltaic systems under the PM-KUSUM scheme, promoting sustainable land use and renewable energy generation.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The proposed template for integrated agrivoltaics will offer farmers a systematic approach to leveraging their land for both agricultural/aquaculture production and solar energy generation.","By optimizing land use and diversifying income streams, farmers can enhance resilience, sustainability, and productivity while contributing to India's renewable energy transition.</p>"],["<p>Have a look at <a href='https://cstep.in/drupal/sites/default/files/2024-02/Integrated%20Value%20Chain%20Approach%20for%20Agrivoltaic%20Systems.pdf' target='_blank'>this doc</a> and","<a href='https://undecidedmf.com/episodes/solar-panels-plus-farming-agrivoltaics-explained/' target='_blank'>this link</a>.</p>"]],tags:["agrivoltaics","agriculture","solar","rural"],commentCount:0,viewCount:60,attachmentCount:0,voteCount:9,submittedOn:"2024-02-10",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:9,title:"Agricultural Machinery Rental Portal: Enhancing Access to Technology for Small-scale Farmers",summary:[["<p>This proposal aims to address the challenge faced by small-scale farmers in accessing expensive agricultural machinery by introducing a pay-as-you-go model through an online portal.","By facilitating transparent and convenient rental of machinery and services, the initiative seeks to enhance productivity and reduce labor costs for farmers across India.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Small-scale farmers and stakeholders in the agriculture sector, including agri-businesses and machinery manufacturers.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Many small-scale farmers in India lack access to expensive agricultural machinery due to financial constraints, limiting their productivity and increasing labor costs.","Existing rental services for machinery are fragmented and not widely known to farmers, leading to inefficiencies and missed opportunities for mechanization.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to develop an online portal that connects farmers with agricultural machinery rental services, enabling them to access machinery and services on a pay-as-you-go basis.","The portal will serve as a platform for agri-businesses and machinery manufacturers to offer their machinery","(like a tractor, harvester) and services (like ploughing, tilling or harvesting) for rent, with transparent pricing, descriptions, agreements, and contracts.","Features of the portal will include automated payment processing, scheduling, and issue resolution to streamline the rental process for both farmers and providers.","Additionally, providers can offer tailored packages for specific crops, such as rice cultivation packages per acre, which include the necessary machinery and services for each phase of cultivation.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include agricultural experts, agri-business representatives, machinery manufacturers (e.g., Mahindra), and small-scale farmers.","Collaboration with stakeholders from different regions and states will ensure the platform meets the diverse needs of farmers across India.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>While there are local businesses offering agricultural machinery rental services, there is currently no centralized platform","that aggregates these services and provides transparent, user-friendly rental options for farmers.","The proposed portal aims to fill this gap by offering a comprehensive solution with standardized processes and transparent pricing.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope of the proposal is to define the concept and features of the agricultural machinery rental portal,","including the rental process, payment mechanisms, service offerings, and tailored packages for specific crops.","The focus is on outlining the functionalities and benefits of the portal without delving into the development of the actual software.","Take three different representative states and check the feasibility and desirability of the proposal.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome of the proposal will be a refined concept and recommended solution for the agricultural machinery rental portal.","This includes identifying machinery and service offerings, mapping them to specific crops, and gathering feedback from farmers and machinery providers to tailor packages to their needs.","By streamlining access to agricultural machinery and services, the portal aims to drive mechanization and improve productivity for small-scale farmers in India.</p>"]],tags:["agriculture","machine","rural"],commentCount:0,viewCount:54,attachmentCount:0,voteCount:9,submittedOn:"2024-02-11",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:10,title:"Government Service Audit: Enhancing Citizen Experience",summary:[["<p>This proposal advocates for the systematic audit of government services to identify inefficiencies, bottlenecks, and opportunities for improvement.","By engaging citizens in the audit process and documenting their experiences, the initiative aims to enhance the","user-friendliness and efficiency of government services, ultimately benefiting both the government and citizens.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Government agencies responsible for delivering public services, as well as citizens who interact with these services.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Citizens often encounter challenges and frustrations when dealing with government offices for various services such as obtaining a passport or driver's license.","These challenges include confusing processes, unnecessary bureaucracy, and interactions with unhelpful or corrupt staff.","There is an opportunity to streamline and improve government service delivery to make it more user-friendly and efficient.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to conduct audits of government service processes to identify areas for improvement.","Any citizen can participate in these audits by documenting their experiences and observations while interacting with government services.","The audit will assess various aspects of the service process, including accessibility of information, ease of","online application, efficiency of workflow, personnel conduct, and overall user experience.","Recommendations for improvement will be provided based on the audit findings, with a focus on simplifying processes, reducing bureaucracy, and enhancing customer service.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The audit team can comprise volunteers from diverse backgrounds and demographics, representing different segments of society.","While no specific expertise is required, individuals with experience in auditing, process improvement, or public administration may provide valuable insights.","Collaboration with government agencies and experts in service delivery will facilitate the implementation of audit recommendations.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The audit will focus on a specific government service, such as obtaining a passport or driver's license, and systematically evaluate each step of the process.","Key areas of assessment will include information accessibility, online application experience, workflow efficiency, staff behavior, and overall user satisfaction.","The audit findings will be compiled into a comprehensive report, highlighting areas for improvement and providing actionable recommendations.","See if integration with some other service like aadhar will make the process simple.","Another example - can there be a short cut form to renew a passport with no change in any detail?</p>"],["<p>Additionally, a template for conducting future audits will be developed, enabling ongoing assessment of government services across different locations and target audiences.","A platform will be created to facilitate citizen participation in audits, allowing for a collaborative effort to enhance the quality and efficiency of government service delivery.</p>"]],tags:["audit","government","service"],commentCount:0,viewCount:55,attachmentCount:0,voteCount:9,submittedOn:"2024-02-12",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:11,title:"Designing a Mobile Eye Test Clinic for Rural Areas",summary:[["<p>The proposal outlines the concept of a non-emergency mobile eye test clinic aimed at providing convenient and accessible eye testing services to rural communities.","By addressing the challenge of limited access to eye care facilities in remote villages, this initiative aims to","enhance early detection and intervention for various eye conditions, including cataract and glaucoma.","The mobile clinic, equipped with essential testing equipment, can travel to villages, conduct preliminary eye tests,","and refer patients to specialized eye clinics for further evaluation and treatment if necessary.","Collaboration with private eye clinics and potential government support can facilitate the implementation of this solution.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The target audience includes rural communities with limited access to eye care facilities, private eye clinics","interested in expanding their reach, and potentially government health departments seeking to improve healthcare access in rural areas.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Many individuals in rural areas lack awareness of their eye health and face challenges accessing eye care services due to geographical barriers.","The opportunity lies in deploying a mobile eye test clinic to these underserved areas, providing convenient and timely eye testing services to prevent vision loss and address eye conditions early.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves the deployment of a mobile eye test clinic equipped with essential eye testing equipment to travel to rural villages and conduct preliminary eye tests.","The clinic can identify individuals with eye conditions such as cataract and glaucoma and refer them to specialized eye clinics for further evaluation and treatment.","Private eye clinics can operate the mobile clinic, potentially receiving support from government health departments to bootstrap the project.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should comprise experts in optometry, ophthalmology, and healthcare administration, along with individuals experienced in mobile healthcare service delivery and logistics management.","Collaboration with government health officials and private healthcare providers will also be essential.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The project aims to establish a feasible and viable model for operating a mobile eye test clinic, including cost estimation, operational logistics, and catchment area analysis.","Additionally, exploring the development of central IT infrastructure for managing clinic operations, patient data,","promotions, and payments can enhance the efficiency and scalability of the initiative.","Further exploration of potential expansions into other mobile healthcare services, such as blood testing,","and optimizing the supply chain for eyeglass distribution can contribute to improving overall healthcare access in rural areas.</p>"]],tags:["health","medical","rural"],commentCount:0,viewCount:58,attachmentCount:0,voteCount:10,submittedOn:"2024-02-09",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:14,title:"Certificate Course in Non-Urban Water Management and Permaculture",summary:[["<p>This proposal outlines the development of a certificate course tailored for non-urban areas focusing on water management techniques and permaculture principles.","The initiative aims to address the lack of awareness and training in water rejuvenation and sustainable agriculture practices in rural communities.","The course will be designed to empower individuals with practical knowledge and skills to implement effective water management and permaculture techniques in their communities.","These courses can be provided in ITIs, agriculture institutes or online to anyone interested.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Rural residents, farmers, agricultural workers, and anyone interested in sustainable water management and agriculture practices.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Many rural communities in India lack awareness and training in effective water management techniques and sustainable agriculture practices.","Despite the efforts of organizations like Isha Foundation, Pani Foundation, and <a href='https://drcsc.org/' target='_blank'>DRCSC</a>,","there is a need to make these practices more widespread and accessible to rural populations.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to design a certificate course that provides comprehensive training in non-urban water management and permaculture.","The course will cover topics such as rainwater harvesting, soil conservation, agroforestry, and sustainable land use practices.","Expert instructors and practitioners in water rejuvenation and permaculture will develop the course curriculum,","ensuring that it is tailored to the specific needs and challenges of rural India.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include experts in water rejuvenation, permaculture, and sustainable agriculture practices.","Collaboration with organizations like Isha Foundation, Pani Foundation, and DRCSC can provide valuable insights and support in course development and implementation.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p><a href='https://workspace.oregonstate.edu/osu-permaculture-design' target='_blank'>Here</a> is an example of a course.","Sadhguru is working on river basin and soil and many more.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes developing a comprehensive course curriculum that covers essential topics in non-urban water management and permaculture.","The course will be designed to be accessible to individuals with varying levels of technical expertise,","making it suitable for farmers, agricultural workers, and community members interested in sustainable practices.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome will be a detailed course outline and curriculum for the Certificate Course in Non-Urban Water Management and Permaculture.","The course will provide practical knowledge and skills to empower rural communities to implement sustainable water management and agriculture practices.","Future considerations may include the development of training materials, instructor guides,","and outreach strategies to promote the course and facilitate its implementation in rural areas.</p>"]],tags:["water","agriculture","education","permaculture"],commentCount:0,viewCount:55,attachmentCount:0,voteCount:8,submittedOn:"2024-02-17",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:13,title:"Introducing Reverse Startup: Empowering MSMEs and Cooperatives",summary:[["<p>Typically small startup do innovation and at some stage they are acquired by larger companies.","The proposal suggests the concept of Reverse Startup, where established companies research and create well-defined templates for setting up small industries, farms, or businesses.","These templates, tailored to specific sectors like dairy farming, silkworm farming, or fishery ponds, provide","comprehensive guidance and resources for aspiring entrepreneurs, MSMEs, and cooperatives.","By leveraging the expertise and resources of larger companies, the aim is to facilitate the replication of successful","business models, increase the speed of implementation, and enhance the chances of success for smaller ventures.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>MSMEs, cooperatives, and aspiring entrepreneurs seeking guidance and resources for setting up small industries or businesses.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Many aspiring entrepreneurs, especially in rural areas, face challenges in researching and implementing business ideas due to a lack of resources and expertise.","Reverse Startup addresses this by providing well-researched templates and support for setting up small industries or farms.","An example could be a rural cooperative wanting to setup a dairy farm or a silkworm farm or a fishery pond or pearl farming.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>Lets take the example of a village in Jharkhand wanting to set a dairy cooperative.","Established companies like AMUL can create a well research template for a dairy farm with the latest technologies and practices.","Using the template one should be able to build a farm as a DIY project.","This template will have a few parameters to fill in, like available capital, available land, breed of animal etc.","The template can be provided free of cost as part of CSR.","On top of this AMUL can also help setup the farm at actual cost.","It can help procure the equipment, animals, do the construction.","It can help the team get the needed loan (say mudra loan), setup the cooperative entity, tie it up with a dairy buyer like itself or Sudha in Jharkhand etc.","It can also provide mentorship for a period (at a cost) so that people learn the right practices over time.","The main idea is that bigger companies should provide a well researched template for starting a small firm so that success can be replicated.","Speed of replication and chances of success would be higher.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>While there are companies offering services for setting up farms or industries, the expertise and resources of larger companies can ensure higher quality and success rates.","Reverse Startup provides well-researched templates and support, increasing the chances of success for aspiring entrepreneurs.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes evaluating the feasibility and desirability of Reverse Startup, focusing on creating rough","templates for various sectors and analyzing the potential impact on MSMEs and cooperatives.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The analysis report will outline how Reverse Startup can be implemented effectively, demonstrating its feasibility through sample templates and real-world user feedback.","Will the users build the farm based on the DIY template or would they be ready to pay the company to build the same.","The aim is to empower MSMEs and cooperatives by providing them with the necessary resources and support to set up successful ventures.</p>"]],tags:["msme","startup"],commentCount:0,viewCount:45,attachmentCount:0,voteCount:8,submittedOn:"2024-02-15",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:14,title:"CitizenConnect: Empowering Communities to Shape Political Agendas",summary:[["<p>CitizenConnect is a digital platform designed to empower citizens to voice their local issues and concerns,","which are then aggregated and prioritized at various levels of governance or at MLA and MP level.","By enabling bottom-up participation in the political process, CitizenConnect aims to foster greater transparency,","accountability, and responsiveness in policy-making, ultimately strengthening democratic engagement and trust in the electoral system.","Political parties can use this information to build their manifestos.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Citizens of India and political parties.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Currently the manifestos that are created by political parties are created top down.","They decide what they want to promise.","Many times the promises are vague or generic and often ignore the priorities of the public.","This leads to people debating between promises which they never wanted.","Some unique requirements of a region is totally missed by all parties.","Parties focus only on the high decibel topics.","Citizens may feel disconnected from the political process, leading to a lack of trust and reduced participation.","There is a need for a platform that enables citizens to voice their concerns and influence policy-making in a bottom-up manner.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>CitizenConnect offers a solution to address the challenges faced by citizens and political parties:</p>"],["<p><i>Digital Platform:</i></p>"],["<ul><li><p> Develop a user-friendly web portal and mobile application (app) for citizens to submit and track local issues and concerns.</p></li>"],["<li><p> Prioritize simplicity and accessibility to ensure participation from citizens of all demographics.</p></li></ul>"],["<p><i>Issue Submission and Aggregation:</i></p>"],["<ul><li><p> Enable citizens to submit local issues, concerns, and suggestions through the platform, specifying the geographic location and category of the issue.</p></li>"],["<li><p> Aggregate and categorize submitted issues at the village, city, district, state, and parliamentary constituency levels to identify common themes and priorities.</p></li></ul>"],["<p><i>Prioritization and Ranking:</i></p>"],["<ul><li><p> Implement a transparent process for prioritizing and ranking issues based on factors such as the number of submissions, severity, and impact on the community.</p></li>"],["<li><p> Allow citizens to vote or provide feedback on issues to further refine their importance and urgency.</p></li></ul>"],["<p><i>Data Visualization and Mapping:</i></p>"],["<ul><li><p> Utilize data visualization techniques to represent aggregated issues and priorities in an intuitive and accessible manner, including interactive maps and charts.</p></li>"],["<li><p> Enable users to explore and analyze local issues geographically, facilitating a deeper understanding of regional challenges and opportunities.</p></li></ul>"],["<p><i>Engagement with Political Parties:</i></p>"],["<ul><li><p> Provide access to aggregated issue data to political parties and candidates, enabling them to develop informed and responsive manifestos based on citizen priorities.</p></li>"],["<li><p> Encourage political parties to engage with citizens directly through the platform, fostering dialogue and accountability.</p></li></ul>"],["<p><i>Feedback Mechanism:</i></p>"],["<ul><li><p> Establish a feedback mechanism for citizens to track the status of submitted issues, receive updates on actions taken by political representatives, and provide input on policy outcomes.</p></li></ul>"],["<p>Idea is to flip the process.","Issues are collected at the bottom and aggregated at the top.","This effectively brings out specific issues that the citizens wants to be resolved and their relative priorities.","Now the parties cannot easily side step this data and impose their own issues on the citizens.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should consist of software developers, UI/UX designers, data analysts, political analysts, and experts familiar with electoral laws and regulations.","Collaboration with civil society organizations, political parties, and government agencies will be essential to ensure broad-based participation and support.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>There probably might be app in other countries.","We can borrow ideas from those apps and replicate it in India.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>CitizenConnect aims to achieve the following outcomes:</p>"],["<ul><li><p> Empowered Citizens : Enable citizens to actively participate in the political process by voicing their concerns and shaping policy agendas.</p></li>"],["<li><p> Responsive Governance : Facilitate data-driven decision-making and policy formulation by providing policymakers with insights into citizen priorities and preferences.</p></li>"],["<li><p> Enhanced Democratic Engagement : Foster greater transparency, accountability, and trust in the electoral system by promoting dialogue and collaboration between citizens and political stakeholders.</p></li>"],["<li><p> Improved Policy Outcomes : Contribute to the development of more targeted, effective, and inclusive policies that address the diverse needs and aspirations of local communities across India.</p></li></ul>"],["<p>Through its innovative approach and citizen-centric design, CitizenConnect seeks to democratize the political process and promote meaningful civic engagement at all levels of governance.</p>"],["<p>Details out how the approach would work.","Who will gather the information? What information will be gathered and how will those be aggregated and prioritized? What will be the complete workflow.","Some sample mockup of the portal UI will also help.","Define what the final data would look like.","What format will it be in? Will there be an atlas showing the issues on the map?</p>"]],tags:["policy","democracy","election"],commentCount:0,viewCount:40,attachmentCount:0,voteCount:7,submittedOn:"2024-02-20",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:15,title:"",relation:"relates-to",relationLabel:"Similar To"}]},{id:15,title:"VoterAssist: Empowering Indian Voters with Essential Election Information",summary:[["<p>VoterAssist is a mobile application designed to provide comprehensive information and guidance to voters during Indian elections.","By leveraging data from the Election Commission of India (ECI) and implementing user-centric features, ","VoterAssist aims to streamline the voting process and empower citizens with the knowledge they need to participate effectively in elections.</p>"],["<p>There are two sites for american elections, <a href='https://www.votinginfoproject.org/about' target='_blank'>votinginfoproject</a>)","and <a href='https://www.democracy.works/' target='_blank'>democracy.works</a>.","Idea is to replicate the same in India.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Citizens of India eligible to vote in elections.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Accessing relevant information about elections, polling booths, candidates, and voting procedures can be challenging for Indian voters.","Existing platforms may lack user-centric features or fail to provide comprehensive guidance tailored to individual voters.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>VoterAssist offers a solution to address the challenges faced by Indian voters:</p>"],["<p><i>User-Friendly Interface:</i></p>"],["<ul><li><p> Develop a mobile application with an intuitive and user-friendly interface.</p></li>"],["<li><p> Prioritize simplicity and ease of use to ensure accessibility for voters of all demographics.</p></li></ul>"],["<p><i>Comprehensive Information:</i></p>"],["<ul><li><p> Integrate data from the Election Commission of India (ECI) to provide comprehensive information about elections, polling stations, candidates, and voting procedures.</p></li>"],["<li><p> Include features to verify voter registration status, polling booth locations, and voter ID details.</p></li></ul>"],["<p><i>Personalized Guidance:</i></p>"],["<ul><li><p> Offer personalized guidance based on the voter's location and registration details.</p></li>"],["<li><p> Provide tailored recommendations for polling booths, voting timings, and candidate information relevant to the voter's constituency.</p></li></ul>"],["<p><i>Real-Time Updates:</i></p>"],["<ul><li><p> Implement features to deliver real-time updates and notifications about election-related news, announcements, and changes in voting procedures.</p></li>"],["<li><p> Ensure timely dissemination of critical information to voters to enhance their preparedness for elections.</p></li></ul>"],["<p><i>QR Code Integration:</i></p>"],["<ul><li><p> Enable QR code functionality to streamline the voting process.</p></li>"],["<li><p> Allow voters to generate and scan QR codes for quick access to their voter information, reducing waiting times at polling stations.</p></li></ul>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should consist of software developers, UI/UX designers, data analysts, and experts familiar with election laws and regulations.","Collaboration with the Election Commission of India (ECI) and relevant stakeholders will be essential to access and integrate official election data.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>VoterAssist aims to achieve the following outcomes:</p>"],["<p><i>Empowered Voters</i> : Provide Indian citizens with the information and tools they need","to participate confidently and effectively in elections.</p>"],["<p><i>Increased Voter Engagement</i> : Foster greater voter engagement and turnout by simplifying the","voting process and enhancing accessibility to election-related information.</p>"],["<p><i>Improved Election Transparency</i> : Enhance transparency and accountability in the electoral process","by enabling voters to access accurate and up-to-date information about elections and candidates.</p>"],["<p><i>Streamlined Voting Experience</i> : Streamline the voting experience for voters by leveraging","technology to provide personalized guidance and facilitate seamless interactions with the electoral system.</p>"],["<p>Through its user-centric design and robust features, VoterAssist aims to empower Indian voters and strengthen democratic participation across the nation.</p>"],["<p>Study the above mentioned project and their features.","Study other similar projects, Indian too if any.</p>"],["<p>Come up with the list of features that the app should have and design the workflow and UI/UX and the needed data.</p>"]],tags:["election","voter","democracy"],commentCount:0,viewCount:41,attachmentCount:0,voteCount:6,submittedOn:"2024-02-21",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:14,title:"",relation:"relates-to",relationLabel:"Similar To"}]},{id:16,title:"Anonymous Information Portal for Police Cases",summary:[["<p>The proposal suggests the creation of an anonymous information portal for police cases in India to address the","reluctance of witnesses or informants to come forward due to fear of retaliation or involvement in legal proceedings.","The portal will allow individuals to provide anonymous information about police cases,","aiding law enforcement agencies in investigations without compromising the safety or privacy of the informants.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The primary beneficiaries are state police departments and central investigation agencies in India.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Witnesses or individuals with information about police cases often hesitate to come forward due to fear of retaliation or involvement in legal proceedings.","This leads to crucial information being withheld from law enforcement agencies, hindering investigations.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposal suggests building a portal where individuals can anonymously provide information about police cases.","Users can search for cases based on location and other criteria, then submit details anonymously.","Any specific information like vehicle number, number of people or their description etc.","They can provide some information about the context of the incident, say something about the relationship of parties involved.","Law enforcement agencies can access this information to aid investigations without compromising the anonymity of the informants.","Though there is no guarantee that the information is correct.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include representatives from law enforcement agencies to guide the development process and ensure alignment with investigative needs.","Additionally, legal experts are required to draft policies safeguarding informant anonymity.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes researching the needs of law enforcement agencies and designing a user-friendly portal for anonymous information submission.","Workflow, data collection methods for text, pictures, audio, video, document etc, verification processes, and legal safeguards need to be defined.","Additionally, consideration should be given to expanding the portal's use for preemptive reporting of potential threats, like an impending terrorist threats.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The analysis report will outline a comprehensive solution for the creation of an anonymous information portal,","addressing the challenges of witness reluctance and informant safety.","It will propose a workflow, data collection methods, verification processes, and legal safeguards,","ensuring effective utilization by law enforcement agencies while protecting informant anonymity.","This is something similar to safeguards provided to whistleblowers.</p>"],["<p><a href='https://spotcrime.com/ny/new+york' target='_blank'>spotcrime</a></p>"]],tags:["police"],commentCount:0,viewCount:44,attachmentCount:0,voteCount:7,submittedOn:"2024-02-19",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:17,title:"Scheme to buy credits from a remote solar farm",summary:[["<p>Many individuals donot buy solar panels because they do not have favourable roof or any roof.","Sometimes they do not want the maintenance headache.","Devise a scheme for individuals who can invest in remote solar farm and in return get power","credits every month from their distribution company.</p>"]],details:[],tags:["solar","urban"],commentCount:0,viewCount:49,attachmentCount:0,voteCount:9,submittedOn:"2024-02-07",submittedBy:{name:"Tapan Jha",email:"tapan.jha@gmail.com"},linkedIdeas:[{id:26,title:"Solar scheme for Apartment Complexes",relation:"similar-to",relationLabel:"Similar To"}]},{id:18,title:"Rural Gig Economy Platform: Connecting Agricultural Labour Supply and Demand",summary:[["<p>This proposal introduces a rural gig economy platform aimed at bridging the gap between agricultural labour supply and demand in rural areas.","By leveraging the gig economy model, the initiative seeks to provide flexible employment opportunities","for local and migrant workers while addressing labour shortages in agriculture.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Local and migrant workers seeking employment opportunities in agriculture, as well as agricultural enterprises and farmers in need of labour.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>There is a persistent mismatch between the supply and demand for agricultural labour in rural areas, leading to labour shortages during critical farming activities such as harvesting.","This gap poses challenges for farmers and agricultural enterprises, impacting productivity and output.","However, traditional employment models in rural areas often lack flexibility and fail to effectively address fluctuating labour demands.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to establish a rural gig economy platform that functions similarly to urban gig economy platforms, such as food delivery services.","The platform will enable farmers and agricultural enterprises to post job listings for various agricultural tasks,","such as harvesting, planting, and crop maintenance, specifying the required skills, duration, and compensation.","Local and migrant workers can then browse available job listings and apply for tasks that match their skills and availability.","Payments can be structured on a per-task basis or hourly/daily rates, providing flexibility for both employers and workers.","The platform will facilitate the matchmaking process, connecting job seekers with available opportunities and facilitating communication and coordination between parties.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include experts in rural development, agriculture, and technology, as well as stakeholders","from the agricultural sector, including farmers, agricultural enterprises, and labour unions.","Collaboration with local communities and government agencies will be essential to ensure the platform","meets the needs of rural workers and addresses local labour market dynamics.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>While traditional methods of hiring agricultural labour exist, such as through local contacts or","labour contractors, these methods often lack transparency, efficiency, and flexibility.","The proposed gig economy platform offers a modern and scalable solution to address these limitations,","providing a transparent and accessible marketplace for agricultural labour.</p>"],["<p>List a few areas where there is a demand for labour and the season of high demand.","For example, during high demand time, like sowing and harvesting, labourers can move from nearby cities to rural to take up high paying though short term jobs.","If there are many odd jobs in the same village, a labourer can visit the village and plan to do as many tasks as possible.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope of the proposal is to outline the concept and features of the rural gig economy platform,","including job posting, worker matching, payment processing, and communication tools.","The focus is on defining the functionality and benefits of the platform without delving into the development of the actual software.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The proposed solution aims to explore the concept of a rural gig economy platform and present a framework for its implementation.","Key aspects include identifying agricultural tasks and job categories, defining payment structures and rates,","and outlining strategies for attracting both job seekers and employers to the platform.","By facilitating flexible employment opportunities in agriculture, the platform seeks to enhance labour market efficiency and support rural livelihoods.</p>"]],tags:["rural","labour","agriculture"],commentCount:0,viewCount:44,attachmentCount:0,voteCount:7,submittedOn:"2024-02-22",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:19,title:"Unified Agri App: Empowering Farmers with Integrated Agricultural Solutions",summary:[["<p>The Unified Agri App aims to streamline agricultural services and empower farmers by providing a single,","comprehensive platform for accessing essential tools, information, and market opportunities.","By consolidating existing services and incorporating innovative features, the app prioritizes","farmer-centric design and usability to enhance productivity and profitability in agriculture.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Farmers, agri-businesses, agricultural policymakers, and government agencies.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The proliferation of disparate agricultural apps and services in India creates complexity and inefficiency","for farmers, who must navigate multiple platforms to access essential tools and resources.","A unified solution is needed to centralize agricultural services, streamline workflows, and empower farmers","with access to critical information and market opportunities.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The Unified Agri App offers a holistic approach to agricultural management, integrating key features and services into a single, user-friendly platform:</p>"],["<p><i>Unified Dashboard:</i></p>"],["<ul><li>Centralized dashboard providing access to all app features and services.</li>"],["<li>Personalized farmer profiles with relevant information and preferences.</li></ul>"],["<p><i>Marketplace Integration:</i></p>"],["<ul><li>Seamless integration with <a href='https://enam.gov.in/web/stakeholders-Involved/Apmcs' target='_blank'>e-NAM</a>,","<a href='https://www.itcportal.com/businesses/agri-business/e-choupal.aspx' target='_blank'>ITC e-choupal</a>,","<a href='https://ondc.org/' target='_blank'>ONDC</a> and other agricultural marketplaces.</li>"],["<li>Farmers can buy/sell produce, access real-time market prices, and track transactions.</li></ul>"],["<p><i>Crop Management Tools:</i></p>"],["<ul><li>Crop selection guidance based on soil health, climate data, and market demand.</li>"],["<li>Crop planning calendar with alerts for sowing, watering, and harvesting activities.</li></ul>"],["<p><i>Weather and Pest Forecasting:</i></p>"],["<ul><li>Real-time weather updates and forecasts tailored to the farmer's location.</li>"],["<li>Pest and disease alerts with recommended mitigation strategies.</li></ul>"],["<p><i>Knowledge Hub:</i></p>"],["<ul><li>Access to agricultural articles, tutorials, and best practices.</li>"],["<li>Expert advice and consultation services for crop management and problem-solving.</li></ul>"],["<p><i>Financial Services:</i></p>"],["<ul><li>Integration with banking and financial institutions for loan applications, insurance, and subsidy claims.</li>"],["<li>Budgeting tools and financial literacy resources for better financial management.</li></ul>"],["<p><i>Community Engagement:</i></p>"],["<ul><li>Farmer forums and discussion groups for knowledge sharing and peer support.</li>"],["<li>Collaboration opportunities with other farmers, agri-businesses, and government agencies.</li></ul>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should include agricultural experts, software engineers, UI/UX designers, and representatives from farmer communities and agri-businesses.","Collaboration with existing agricultural service providers and government agencies will be essential to ensure seamless integration and data interoperability.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>Yes, there are apps as mentioned in the summary but they work in silos.</p>"],["<p><b>What is the scope?</b></p>"],["<p>Scope is limited to designing a crude UI mockup and publishing a document about the services, existent and proposed.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The Unified Agri App will serve as a comprehensive platform for farmers to access essential tools, information, and market opportunities</p>"],["<ul><li>Simplified Access : Farmers can access multiple services and tools through a single, intuitive interface, reducing complexity and saving time.</li>"],["<li>Enhanced Productivity : Integrated crop management tools, market insights, and weather forecasting empower farmers to make informed decisions and optimize agricultural practices</li>"],["<li>Market Connectivity : Seamless integration with agricultural marketplaces facilitates efficient buying and selling of produce, leading to improved market access and profitability.</li>"],["<li>Community Building: Farmer forums and collaboration features foster knowledge sharing, peer support, and community engagement, strengthening the agricultural ecosystem.</li></ul>"],["<p>Publish a document with the list of all the services / features that were studied and finally proposed.","Having a rough API design for the services would be bonus.","Then publish a mockup of the new unified app.</p>"]],tags:["agriculture","rural","app"],commentCount:0,viewCount:41,attachmentCount:0,voteCount:8,submittedOn:"2024-02-18",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:20,title:"Agri Prediction Service: Optimizing Crop Planning and Market Preparedness",summary:[["<p>The Agri Prediction Service aims to provide farmers, agri-businesses, and government agencies with predictive insights into crop production levels based on pre-season acreage commitments.","By leveraging farmer input and data-driven forecasting techniques, the service enables proactive planning and decision-making to address potential crop scarcity or surplus scenarios.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Farmers, agri-businesses, government agencies, and agricultural policymakers.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The unpredictability of crop production often leads to market imbalances, causing price volatility, wastage, and supply chain disruptions.","By providing early insights into anticipated crop yields based on pre-season acreage commitments,","the Agri Prediction Service addresses the need for proactive planning and risk mitigation in the agricultural sector.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution consists of two main components: Pre-season Acreage Registration and Crop Production Forecasting.</p>"],["<p><i>Pre-season Acreage Registration:</i></p>"],["<ul><li><p> Farmers register their planned crop acreage at the beginning of the season through the Agri Prediction Service portal or mobile application.</p></li>"],["<li><p> Information captured includes crop type, estimated acreage, location, and additional contextual factors (e.g., irrigation method, soil type).</p></li>"],["<li><p> The service aggregates and analyzes registered acreage data to identify trends, patterns, and potential areas of overproduction or underproduction.</p></li></ul>"],["<p><i>Crop Production Forecasting:</i></p>"],["<ul><li><p> Leveraging historical data, weather forecasts, and machine learning algorithms, the service generates crop","production forecasts for registered crops at various geographic levels (e.g., district, state, country).</p></li>"],["<li><p> Forecasting models consider factors such as acreage distribution, historical yields, weather conditions, and agronomic variables to predict crop production levels.</p></li>"],["<li><p> Forecasts are regularly updated throughout the season to incorporate new data and account for changing conditions (e.g., weather anomalies, pest outbreaks).</p></li></ul>"],["<p>During the registration phase, if a farmer notices that too many farmers are growing a particular crop, he or she can switch to a different crop.","Early forecast provides enough lead time for governments to intervene.","For example, government or businessmen can import an item for which scarcity is predicted.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should include agricultural experts, data scientists, software engineers, and domain specialists in agri-business and market analysis.","Collaboration with agricultural research institutions, farmer associations, and government agencies will be essential to ensure data accuracy and relevance.</p>"],["<p><b>What is the scope?</b></p>"],["<p>Detail out the solution.","Define the workflow.","What all information will be captured and how will that be used to make a prediction.</p>"],["<p>Building the software or the model is not part of the scope.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The Agri Prediction Service will provide actionable insights and forecasts to support informed decision-making across the agricultural value chain:</p>"],["<p><i>Farmers</i> : Optimize crop planning and diversification based on predicted market demand and potential oversupply.</p>"],["<p><i>Agri-businesses</i> : Anticipate market trends and adjust procurement, pricing, and inventory management strategies accordingly.</p>"],["<p><i>Government Agencies</i> : Plan interventions, subsidies, and import/export policies to address anticipated crop shortages or surpluses.</p>"],["<p><i>Policy Makers</i> : Formulate evidence-based agricultural policies and programs to promote market stability, sustainability, and food security.</p>"],["<p>By facilitating proactive planning and risk management, the Agri Prediction Service contributes to a more resilient","and efficient agricultural ecosystem, benefiting farmers, businesses, and consumers alike.</p>"]],tags:["agriculture","forecast"],commentCount:0,viewCount:35,attachmentCount:0,voteCount:6,submittedOn:"2024-02-23",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:19,title:"",relation:"supports"}]},{id:21,title:"Introducing the Timeline App: Exploring History in 3D",summary:[["<p>The proposal suggests the development of a Timeline App\u2014a platform designed to offer an interactive exploration of historical events based on various search criteria.","Unlike traditional linear approaches to history, this app provides users with the flexibility to zoom in or out,","focus on specific regions, time ranges, or aspects of history such as kingdoms, wars, architecture, art, and more.","By leveraging rich interactive features similar to exploring a globe, users can navigate through history with ease, accessing curated events displayed on a timeline or map interface.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Historians, students, and anyone interested in exploring history in a dynamic and interactive way.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Traditional methods of teaching history are often linear and lack the flexibility to focus on specific regions or aspects.","The Timeline App addresses this by providing an interactive platform for exploring history based on various search criteria.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The Timeline App offers a rich interactive experience where users can explore historical events based on search criteria","such as time range, region, or specific aspects of history (like kingdoms, wars, people, architecture, art, music, attire etc).","The app provides curated events displayed on a timeline or map interface, allowing users to zoom in or out and access","additional details through external links like YouTube video or Wikipedia page.","For example search for details about bhakti movement between 1300 and 1700 or show temple architecture built in the last millennia.","Important pages can even be translated to many Indian languages.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>Historians, history teachers, and UI design experts are essential members of the team to ensure the app's historical accuracy and user-friendly interface.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>Currently, there are no similar apps offering such a comprehensive and interactive approach to exploring history.","The Timeline App stands out by providing rich interactive features and curated content for a dynamic historical exploration experience.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes designing (not building) the software and defining the user interface for the Timeline App.","Content creation and population will be ongoing tasks, with a focus on capturing historical data effectively.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The app will offer a seamless and engaging experience for users to explore history in 3D.","Design mock screenshots providing a preview of the app's interface.","Additionally, the proposal outlines strategies for capturing historical data effectively to ensure the app's richness in interaction and content.","For example google has defined KML for storing map data, then community can provide map data.","Similarly define how can data be captured to be effective.","Note that content creation and population will be an ongoing task.","The aim is to provide richness in interaction.</p>"]],tags:["culture","history","app"],commentCount:0,viewCount:44,attachmentCount:0,voteCount:6,submittedOn:"2024-02-24",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:32,relation:"supports"}]},{id:22,title:"Enhancing Adoption of DigiLocker",summary:[["<p>This proposal outlines an in-depth study of <a href='https://www.digilocker.gov.in/statistics' target='_blank'>DigiLocker</a>,","a government service for storing digital documents, and proposes strategies to enhance its adoption among citizens.","The analysis encompasses the current usage of DigiLocker, challenges hindering its widespread adoption, and potential solutions to make the service more user-friendly and popular.","The scope includes exploring document providers, identifying reasons for low usage, proposing improvements, and outlining strategies for promoting the service.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Citizens seeking secure and sovereign storage for digital documents.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Citizens often resort to commercial cloud storage services like Google Drive or Dropbox for storing important documents, compromising data sovereignty and privacy.","If the document is stored in a US data center, then the US government has rights to view it.","Additionally, many still rely on paper copies for certificates, mark sheets and other documents, facing challenges in storage and safety.","DigiLocker offers a solution, but its adoption remains low due to various factors such as lack of awareness and usability issues.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves conducting a comprehensive analysis of DigiLocker's current usage,","identifying barriers to adoption, and proposing improvements to address these challenges.","This includes exploring onboarded document providers, understanding user behavior, and suggesting enhancements to make the service more user-friendly and appealing.","Additionally, strategies for promoting DigiLocker among citizens will be developed to increase awareness and usage.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team requires engineers with expertise in document storage, encryption, and privacy, along with individuals familiar with user experience design and marketing.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes:</p>"],["<ul><li><p> Analyzing the current usage and onboarding status of document providers on DigiLocker.","Mostly it is being used to store documents provided by the government like aadhar, tax related document etc.</p></li>"],["<li><p> Identifying reasons for low adoption and usage patterns among citizens.","Many of my documents might have been kept in digilocker by the government but I have never used the service.","Why do we prefer gdrive to digilocker.</p></li>"],["<li><p> Proposing improvements to enhance user experience and usability.</p></li>"],["<li><p> Listing additional document providers to onboard and showcasing the digitalization potential of common paper documents.","Can educational institutes or education boards be added as document provider? Can my certificates be digitized?</p></li>"],["<li><p> Outlining strategies for promoting DigiLocker to increase awareness and usage.","Can I show a traffic police a digital driving license from digilocker.</p></li></ul>"],["<p><b>What results will be achieved?</b></p>"],["<p>The analysis report will provide insights into DigiLocker's usage, challenges, and potential improvements.","It will propose enhancements to make the service more user-friendly and suggest strategies for increasing its popularity among citizens.","Additionally, recommendations for onboarding more document providers and showcasing the utility of DigiLocker for various documents will be provided.","Ultimately, the goal is to promote the adoption of DigiLocker as a secure and sovereign document storage solution for citizens.</p>"]],tags:["digilocker"],commentCount:0,viewCount:31,attachmentCount:0,voteCount:5,submittedOn:"2024-03-02",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:23,title:"Technology Solutions for Matching Missing Children",summary:[["<p>This proposal outlines the development of technology solutions to effectively map reported missing children to those found by law enforcement agencies.","The initiative aims to address the challenge of child trafficking and the difficulty in reuniting rescued","children with their families, particularly in cases where children are abducted from remote areas.","The scope includes studying existing initiatives, building new technologies or improving existing ones,","and collaborating with NGOs and government agencies for implementation.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Police departments, government agencies, NGOs working on child welfare, and concerned citizens.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Child trafficking poses a significant threat, and reuniting rescued children with their families is often challenging,","especially when children are abducted from remote or economically disadvantaged areas.","Existing methods for matching missing children with found children are often inefficient and rely heavily on manual processes.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves developing new technology or enhancing existing technologies to improve the matching process.","This includes studying existing initiatives both in India and abroad, identifying gaps and opportunities, and building software and infrastructure to streamline the process.","The technology may leverage biometric data, facial recognition, or other innovative approaches to improve accuracy and efficiency.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include representatives from NGOs specializing in child welfare, data scientists, experts in","biometrics and facial recognition, and technology professionals with experience in software development and infrastructure.","Collaboration with law enforcement agencies and government bodies will be essential for effective implementation.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>There are existing initiatives, such as those highlighted in the <a href='https://timesofindia.indiatimes.com/blogs/darksides/leveraging-technology-to-reconnect-missing-children-with-their-families-in-india/' target='_blank'>Times of India article</a>,","that address the issue of reuniting missing children with their families using technology.","However, there is room for improvement and innovation in this space, particularly in the context of India's unique challenges and requirements.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes studying existing initiatives, identifying technological solutions, and finalizing a plan in collaboration with NGOs and government agencies.","The focus is on developing a comprehensive roadmap for implementing technology solutions to match missing children more effectively.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome will be a detailed plan for leveraging technology to match missing children with their families, tailored to the specific needs and challenges of India.","The plan will provide recommendations for technology solutions, infrastructure requirements, and implementation strategies, with input from relevant stakeholders.","Future steps may include the actual implementation of the plan, with the team providing technical support and expertise to NGOs and government agencies involved in child welfare initiatives.</p>"]],tags:["children","missing","police"],commentCount:0,viewCount:39,attachmentCount:0,voteCount:6,submittedOn:"2024-02-26",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:24,relation:"relates-to"}]},{id:24,title:"Leveraging Technology to Combat Child Trafficking",summary:[["<p>Child trafficking remains a pressing issue, particularly in vulnerable regions like tribal areas in Jharkhand and Odisha,","where children are often lured away from their families under false pretenses and exploited for labor or worse.","This proposal aims to explore how technology can be harnessed to prevent and mitigate child trafficking,","working in collaboration with governments, NGOs, and other stakeholders.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Governments, NGOs, law enforcement agencies, and communities affected by child trafficking.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Child trafficking persists as a significant challenge in regions such as Jharkhand and Odisha, where impoverished families","are susceptible to exploitation by traffickers who promise better opportunities for their children but instead subject them to exploitation and abuse (like bonded labour or sex trade).","There is a critical need for innovative solutions to prevent and combat child trafficking and ensure the safety and well-being of vulnerable children.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>No solution is proposed.","Idea is to explore whether technology can be leveraged to address various aspects of child trafficking, including prevention, detection, intervention, and support:</p>"],["<p><i>Prevention and Awareness:</i></p>"],["<ul><li><p> Develop educational campaigns and digital resources to raise awareness among vulnerable communities about","the dangers of child trafficking and how to recognize and report suspicious activities.</p></li>"],["<li><p> Utilize mobile apps, social media platforms, and community networks to disseminate information and resources","to at-risk populations, empowering them to make informed decisions and protect their children.</p></li></ul>"],["<p><i>Data Analytics and Monitoring:</i></p>"],["<ul><li><p> Establish a centralized database or platform to collect and analyze data related to child trafficking cases,","including demographic information, trafficking routes, modus operandi of traffickers, and outcomes of intervention efforts.</p></li>"],["<li><p> Use data analytics and machine learning algorithms to identify patterns and trends in child trafficking activities,","enabling proactive intervention and resource allocation by law enforcement agencies and NGOs.</p></li></ul>"],["<p><i>Technological Solutions for Tracking and Monitoring:</i></p>"],["<ul><li><p> Explore the use of GPS tracking devices, biometric identification systems, and mobile applications to monitor","the movement and whereabouts of vulnerable children and detect any deviations from their expected routes or activities.</p></li>"],["<li><p> Develop secure communication channels and reporting mechanisms for children to seek help or alert authorities","in case of emergencies or suspicious situations, ensuring their safety and confidentiality.</p></li></ul>"],["<p><i>Collaboration and Coordination:</i></p>"],["<ul><li><p> Facilitate collaboration and information-sharing among government agencies, NGOs, law enforcement,","and community organizations through digital platforms and communication tools.</p></li>"],["<li><p> Implement protocols and mechanisms for cross-border cooperation and coordination to address the transnational","nature of child trafficking networks and facilitate swift and effective responses to cases involving multiple jurisdictions.</p></li></ul>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should comprise experts in child protection, law enforcement, data analytics, technology development, and community engagement.","Collaboration with NGOs, government agencies, and community leaders is essential to ensure the effectiveness and relevance of the proposed solutions.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>By harnessing the power of technology and fostering collaboration among stakeholders, this initiative aims to make","significant strides in combating child trafficking and safeguarding the rights and well-being of children in vulnerable communities.</p>"],["<p>As no solution is proposed here, be very open ended.","Explore and find avenues where technology can help.","The field is large but one can start with poor children from tribal areas moving to cities for work.","Some expected results (hopefully) of the proposal are as follows.</p>"],["<ul><li><p> Increased awareness and vigilance among vulnerable communities about the risks of child trafficking.</p></li>"],["<li><p> Enhanced data-driven decision-making and targeted interventions by leveraging technology and data analytics.</p></li>"],["<li><p> Improved coordination and collaboration among stakeholders to prevent, detect, and respond to child trafficking incidents effectively.</p></li>"],["<li><p> Empowerment of children with technology-enabled tools and resources to protect themselves and seek assistance when needed.</p></li>"],["<li><p> Reduction in the prevalence and impact of child trafficking through comprehensive, technology-driven strategies and interventions.</p></li></ul>"]],tags:["child","trafficking"],commentCount:0,viewCount:35,attachmentCount:0,voteCount:5,submittedOn:"2024-02-27",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:23,relation:"relates-to"}]},{id:25,title:"Producers' Responsibility for Recycling Research Policy Proposal",summary:[["<p>Proposal to mandate that product producers conduct research into recycling methods for their products.","Take the example of solar panels and tyre.","Producers of these products should be made to do research on recycling or disposing their products.","They can do the research in-house or fund universities for the same.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Government authorities, product producers, and recyclers</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Solar panels, tyres, and various other products contribute to landfill waste with no clear responsibility for proper disposal or recycling.","The lack of post-consumer product management poses environmental challenges, especially concerning the disposal","of materials like solar panels, despite government initiatives promoting renewable energy adoption.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution mandates that product producers conduct research into recycling methods for their products.","This research obligation doesn't necessitate direct involvement in recycling operations but focuses on developing technologies and processes for effective recycling or disposal.","Producers can either conduct in-house research or fund universities and research institutions for this purpose.","Collaboration with existing research entities or private companies with expertise in recycling technology can expedite progress.","Since they are deeply involved with building the product, it should not be too costly to fund this research.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The policy statement will outline the following:</p>"],["<p><i>Mandate Details</i> : Clear guidelines stipulating the requirement for product producers to engage in recycling research.</p>"],["<p><i>Research Funding Options</i> : Producers can either conduct research internally or fund external research institutions.</p>"],["<p><i>Collaboration Framework</i> : Encouragement for collaboration between producers and existing research entities to leverage expertise and resources efficiently.</p>"],["<p><i>Compliance Measures</i> : Establishing mechanisms for monitoring and ensuring compliance with the research mandate.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The policy proposal aims to shift the responsibility for recycling research onto product producers or producer consortia.","By focusing on products like solar panels and tyres as examples, the proposed policy encourages innovation in recycling technologies and processes.","Ultimately, this initiative strives to foster sustainable product lifecycle management, reducing environmental impact and promoting circular economy principles.</p>"]],tags:["recycle","research"],commentCount:0,viewCount:29,attachmentCount:0,voteCount:4,submittedOn:"2024-03-04",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:26,title:"Solar scheme for Apartment Complexes",summary:[["<p>Many HOA of high rise apartment complexes have large unused roofs, capital and large maintenance staff.","Devise a solar scheme for them where the investment and benefits can be pooled in.","Focus more on the pooling strategy, especially when the power generated is more than that used by common areas.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Apartment's house owners associations (HOA)</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>People living in large aparment complexes have roofs which is a common areas and mostly unused.","They are well aware of the benfits of solar.","They have the capital to install solar panel and also paid staff to take care of the same.","But there is no agreed template to share the cost and the benefits.","How will the installation cost be shared?","Power generated will be used for common areas but what if the power generated is more than that.","How will that be shared?","Will there be any subsidy from the government? Government usually provides subsidy to individuals but what about this group.","What if only some house owners want to install solar? How will that work out?</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>No solution is proposed here.","Idea is to work with 2-3 apartment complexes and come up with a proposal that would work and bring the most benefits to the HOA.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>It would nice to have a representative from a solar installation company.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>Aim is to come up a proposal / template.","A template that any HOA can follow to install solar and share the capital and benefits.","One can also have a proposal for the state/central government to launch as a scheme for HOA.</p>"]],tags:["solar","urban"],commentCount:0,viewCount:31,attachmentCount:0,voteCount:5,submittedOn:"2024-02-29",submittedBy:{name:"Pooja Biswas",email:"pooja.biswas@gmail.com"}},{id:27,title:"Comprehensive Planning Framework for a New Indian City",summary:[["<p>Do a thorough planning exercise to gather and incorporate best practices from around the world into","a comprehensive framework for development of a new city with population 50 lakhs to 1 crore.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Government bodies, urban planners, city developers.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The lack of planned cities in India has led to chaotic urban growth and environmental degradation.","Existing cities like Bengaluru have suffered from unplanned expansion, resulting in infrastructure strain and quality-of-life issues.","Despite opportunities, the creation of new cities, as seen in China, has been minimal in India.","There's a need for a comprehensive planning framework to guide the development of new cities, incorporating global best practices tailored to the Indian context.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves conducting a thorough planning exercise to gather and incorporate best practices","from around the world into a comprehensive framework for new city development in India.","This framework will cover various aspects including water management, power infrastructure, urban layout, transportation, security, green spaces, and more.","College students, under the guidance of professors, will collaborate to research, analyze, and compile these best practices into a template document suitable for new city planning.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team will comprise college students from various disciplines such as urban planning, architecture, civil engineering, environmental science, and sociology.","Professors and experts in relevant fields will provide guidance and oversight.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome of this initiative will be a comprehensive planning framework template for new Indian cities.","The template will serve as a repository of best practices covering various aspects of city planning, including infrastructure, sustainability, and quality of life.","While not directly planning a real city, this framework will provide valuable guidance for future city development","projects, ensuring sustainable, well-designed urban spaces for India's growing population.","Additionally, the framework can be adapted for new layouts within existing cities, promoting better urban design and development practices nationwide.</p>"]],tags:["urban","planning"],commentCount:0,viewCount:44,attachmentCount:0,voteCount:6,submittedOn:"2024-02-25",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:28,title:"AI for Detecting Illegal Shell Companies",summary:[["<p>The proposal suggests leveraging artificial intelligence (AI) to classify companies as legal or","fraudulent based on public financial details and information about shell companies.","Targeted at government departments like Income Tax and the Enforcement Directorate (ED), the AI model aims","to assist in identifying and investigating potentially fraudulent companies, contributing to enhanced regulatory oversight and fraud prevention.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Government departments such as Income Tax and the Enforcement Directorate (ED), responsible for detecting and investigating fraudulent activities.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The problem lies in the proliferation of shell companies used for fraudulent purposes,","posing challenges for regulatory authorities to identify and investigate them efficiently.","The opportunity lies in leveraging AI to analyze public financial data and detect potential fraudulent activities.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves developing a machine learning model trained on existing data and past manual detection efforts by IT officials.","The model would predict the probability of a company being fraudulent based on features extracted from public financial data.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should comprise experts from the IT department, ED, and other relevant stakeholders with domain expertise in financial fraud detection.</p>"],["<p><b>Are there existing alternatives?</b></p>"],["<p>While there may not be direct alternatives for this specific solution, similar approaches have been employed in other domains, such as fraud detection in SIM card registrations.","For example, many sim cards were deactivated when they were found to be registered to the same phone number.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The main challenge lies in gathering high-quality data, detecting relevant features, and ensuring accurate labeling for model training.","An analysis report should assess the state of available data, identify potential features, and evaluate label quality,","including criteria such as invalid or duplicate phone and address details, dormant companies, and background checks on company owners.","The ultimate goal is to develop an AI model that can effectively identify illegal shell companies, thereby enhancing regulatory efforts to combat financial fraud.</p>"]],tags:["ai","company","legal"],commentCount:0,viewCount:26,attachmentCount:0,voteCount:4,submittedOn:"2024-03-02",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:29,title:"Proposal to Make Large Cash Holding Illegal",summary:[["<p>The accumulation of large amounts of unaccounted cash, commonly referred to as black money, remains a significant challenge in India.</p>"],["<p>To address this issue effectively, we propose making the possession of large amounts of cash beyond a certain limit illegal, with immediate confiscation of the excess cash by the state.","This should be the case even when the money was earned legally.</p>"]],details:[["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The accumulation of large amounts of unaccounted cash, commonly referred to as black money, remains a significant challenge in India.","Despite efforts by law enforcement agencies to crack down on this illicit practice through raids and investigations,","prosecuting offenders and recovering the ill-gotten gains can be a prolonged and challenging process.","This not only undermines the integrity of the financial system but also deprives the government of much-needed revenue.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>To address this issue effectively, we propose making the possession of large amounts of cash beyond a certain","limit illegal, with immediate confiscation of the excess cash by the state.","This measure aims to deter individuals from hoarding unaccounted cash and create a strong disincentive for engaging in illicit financial activities.</p>"],["<p><i>Establishment of Cash Holding Limit</i> : Define a threshold limit, such as 10 lakhs, beyond which the possession of cash would be deemed illegal.","This limit should be set at a level that is reasonable for legitimate cash transactions but effectively curtails the hoarding of black money.</p>"],["<p><i>Immediate Confiscation and Penalty</i> : Upon detection of cash holdings exceeding the prescribed limit during","raids or investigations, the excess amount should be confiscated by the government without the need for lengthy legal proceedings.","Even if the money was earned legally, the cash beyond the limit now belongs to the government.","If the money is found to be ill gotten then additional penalties can be imposed, including monetary fines and potential imprisonment.</p>"],["<p><i>Streamlined Enforcement Process</i> : Empower law enforcement agencies, particularly the Income Tax Department,","to conduct raids and seizures based on suspicion of large cash holdings, without the burden of proving the source of funds upfront.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The implementation of this proposal would require collaboration between government agencies, legal experts, financial regulators, and tax authorities.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>Come up with a proposal which can be presented to the Union government.</p>"],["<p>By implementing measures to make large cash holding illegal and instituting swift and decisive enforcement mechanisms,","the government can significantly mitigate the prevalence of black money and strengthen the integrity of India's financial system.","This proposal represents a proactive step towards combating financial crime and promoting transparency and accountability in economic transactions.</p>"]],tags:["legal","finance"],commentCount:0,viewCount:32,attachmentCount:0,voteCount:6,submittedOn:"2024-02-28",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:30,title:"Securing the Nation's Power Infrastructure",summary:[["<p>This proposal outlines the identification of vulnerabilities in the nation's power infrastructure and the development of strategies to prevent and mitigate potential attacks.","The initiative aims to address the growing threat of adversarial forces targeting critical power infrastructure","and proposes research, defense mechanisms, and audit procedures to safeguard against such threats.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Government agencies responsible for power infrastructure, defense agencies, and the power industry.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The nation's power infrastructure is susceptible to attacks from adversarial forces, posing a significant risk to national security and public safety.","Identifying vulnerabilities and implementing effective defenses is critical to safeguarding the power grid from disruption and ensuring uninterrupted electricity supply.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves conducting research to identify potential vulnerabilities in the power infrastructure, including smart equipment, AI systems, and networked devices.","This research will inform the development of defense mechanisms and audit procedures to prevent and mitigate attacks.","Additionally, establishing research labs, collaboration with experts from academia and industry,","and implementing regular audits will strengthen the resilience of the power infrastructure against threats.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should comprise power distribution experts, defense experts, cybersecurity specialists, and researchers with expertise in critical infrastructure protection.","Collaboration with academic institutions, defense agencies, and power industry stakeholders will be essential for comprehensive analysis and solution development.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>While there may be existing solutions and practices for securing power infrastructure, the proposed initiative aims to","enhance capabilities by conducting continuous research, developing advanced defense mechanisms, and implementing robust audit procedures.","Establishing dedicated research labs and fostering collaboration between stakeholders will ensure a proactive approach to addressing emerging threats.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome will be a comprehensive strategy for securing the nation's power infrastructure, including the","identification of vulnerabilities, the development of defense mechanisms, and the implementation of audit procedures.","Collaboration with academic institutions and industry stakeholders will ensure the adoption of best practices and continuous improvement in safeguarding critical power assets.","Additionally, the establishment of research labs and regular audits will provide ongoing monitoring and","evaluation to maintain the resilience of the power infrastructure against evolving threats.</p>"]],tags:["power","security","audit"],commentCount:0,viewCount:29,attachmentCount:0,voteCount:3,submittedOn:"2024-03-05",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:31,title:'Launching "Amrit Kaal Patrika": A Monthly Educational Newspaper',summary:[['<p>The proposal introduces "Amrit Kaal Patrika," a monthly newspaper aimed at students from class 8 to graduation.',"With a focus on providing substantive and informative content, the newspaper will cover various challenges facing","India and the world, offering discussions on solutions across different domains such as technology, economics, politics, sports, spirituality etc.","The newspaper aims to depart from noisy and partisan news coverage, providing a platform for deeper discussions and informed decision-making.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The primary target audience includes students from class 8 to graduation, aiming to provide them with substantive and educational content.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Existing news sources often lack substance and provide noisy and partisan coverage, hindering informed decision-making.",`"Amrit Kaal Patrika" aims to address this gap by offering a monthly newspaper with deeper discussions and educational content tailored to students' needs.</p>`],["<p><b>What solution are you proposing?</b></p>"],['<p>"Amrit Kaal Patrika" will be a concise four-page monthly newspaper, with the first two pages in an Indian language and the other two pages in English.',"There will be different editions for different Indian languages, each emphasising on the relevant areas of India.","Students can be encouraged by their parents to read the paper from end to end.","Reading one page per week should not be difficult.","It covers important issues with ideas from both the sides.","Helps people make informed decisions.","If the student reads this paper from class 8th till graduation or more, he should be in good shape for UPSC general paper.","That should be the kind of content of this paper.","Also the quality of language, both Indian and English, used in the paper should be good.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team may include retired editors (like Mr M.","J.","Akbar) or journalists with experience in content curation and educational publishing.","Collaboration with educators and subject matter experts can also enhance the quality and relevance of the newspaper's content.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],['<p>While there are newspapers and magazines available in India, "Amrit Kaal Patrika" distinguishes itself by targeting students and offering deeper educational content.',"Its focus on substantive discussions and informed decision-making sets it apart from mainstream news sources.","This is also different from <a href='https://newindiasamachar.pib.gov.in/' target='_blank'>new india samachar</a></p>"],["<p><b>What results will be achieved?</b></p>"],['<p>The proposed outcome includes the creation of a sample edition of "Amrit Kaal Patrika," showcasing its intent and content structure.',"It can be four pages long, if it is broadsheet size (like most of the news papers in India) or 8 pages long if midday paper size.</p>"]],tags:["news","media","student","education"],commentCount:0,viewCount:86,attachmentCount:0,voteCount:16,submittedOn:"2024-02-06",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:-1,relation:"similar-to"}]},{id:32,title:'Introducing "Sanatan App": A Mobile Platform for Cultural Heritage',summary:[['<p>The proposal outlines the development of the "Sanatan App," a mobile application designed to bridge the gap',"between contemporary families and the rich cultural heritage of Sanatan traditions.","Recognizing the desire among parents to transmit Sanatan Sanskars to their children, especially in urban and foreign settings,","the app aims to provide an immersive experience encompassing diverse aspects of cultural heritage.","Through curated content, including videos, quizzes, and interactive features across eight distinct streams,","the app seeks to facilitate the systematic passage of Sanatan traditions across generations.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The target audience includes all families interested in learning about Sanatan civilization and transmitting its traditions to future generations.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>In contemporary society, numerous parents express the desire to transmit Sanatan Sanskars to their children.","However, a notable obstacle emerges as many lack the requisite knowledge, particularly among those residing in urban, metropolitan areas, and foreign lands.","The challenges are further compounded for families in nuclear setups.","The critical question becomes: How can effective tools or mechanisms be devised to facilitate the systematic","passage of Sanatan traditions across generations, addressing the specific difficulties faced by parents?</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>Build a mobile app designed to enrich families with the vibrant tapestry of cultural heritage through an immersive experience.","This app would have an array of features, including videos, quizzes, and captivating content across eight diverse streams outlined in the accompanying diagram.","Each stream unfolds with approximately 50 concise videos, carefully curated for a weekly family session lasting 30 minutes to an hour.</p>"],["<p>Checkout the attachments for a short proposal for this app.</p>"],["<p><img src='./docs/images/sanatan.drawio.png'/></p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team may include experts from various fields relevant to the eight streams of cultural heritage.","Collaboration with content creators and subject matter experts will enrich the app's offerings.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],['<p>While there are existing resources on Sanatan traditions, the "Sanatan App" distinguishes itself',"by providing a comprehensive and immersive platform accessible to families.","By curating content across diverse streams and fostering interactive engagement, the app offers a unique and enriching experience.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope of the app extends beyond Hinduism to encompass other Sanatan traditions, including Buddhism, Jainism, and Sikhism, providing a holistic view of cultural heritage.</p>"],["<p><b>What results will be achieved?</b></p>"],[`<p>The "Sanatan App" aims to provide a platform for content providers to contribute to the app's offerings.`,"By defining a strategy for content creation and curation, the app will offer a rich tapestry of cultural","heritage accessible to families worldwide, fostering deeper engagement and understanding.</p>"]],tags:["sanatan","culture","civilization"],commentCount:0,viewCount:95,attachmentCount:1,voteCount:18,submittedOn:"2024-02-02",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},attachments:[{attachmentId:2,by:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},label:"Proposal for Sanatan App",filePath:"https://drive.google.com/file/d/1pE6fHHSFZQXPalaJTQCnrSscSzHxMq7Q/view",fileType:"pdf",on:"2024-02-02"}],linkedIdeas:[{id:33,relation:"supported-by"}],team:[{name:"Rajan Reddy",email:"rajan.reddy@gmail.com",roles:["guide"]},{name:"Kishan Desai",email:"kishan.desai@gmail.com",roles:["sponsor"]},{name:"Anil Bhuiya",email:"anil.bhuiya@gmail.com",roles:["owner","member"]},{name:"Manish Shankar",email:"manish.shankar@gmail.com",roles:["mentor"]}]},{id:33,title:"Introducing the Sanatan Awareness Index: Evaluating Knowledge of Tradition",summary:[["<p>The proposal suggests the creation of a Sanatan Awareness Index\u2014a metric designed to gauge individuals' understanding of Sanatan philosophy and traditions.","With the increasing influence of Western culture on media and education, many Indian families are losing touch","with their cultural heritage, leading to confusion and potential identity crises, especially among the younger generation.","By implementing a standardized questionnaire or assessment, individuals can assess their awareness of Sanatan traditions and track their progress over time.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>The target audience includes Sanatan families in India and abroad who seek to assess their understanding of Sanatan traditions.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Because of western influence in our media and education, Indian families and loosing touch with","the sanatan traditions, leading to confusion and potential identity crises.","Some kids do not know why Diwali is celebrated but are clear about Christmas.","The Sanatan Awareness Index addresses this by providing a measure of individuals' awareness of Sanatan philosophy and traditions.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposal focuses on creating a standardized Sanatan Awareness Index\u2014a questionnaire or assessment","tool to measure individuals' knowledge of Sanatan traditions.","This index will enable individuals to assess their awareness levels and track progress over time.","This can be tracked not only at the individual level but also at an aggregate level, like some group, city, state, country etc.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team may include experts in Sanatan philosophy, culture, and education, as well as individuals experienced in developing assessment tools and questionnaires.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The Sanatan Awareness Index will define a set of criteria to measure awareness of Sanatan traditions and develop a standardized questionnaire or assessment tool.","Individuals can use this index to evaluate their knowledge and focus on areas for improvement.","Over time, the questionnaire can be repeated to track progress at individual or aggregate level and assess the","effectiveness of efforts to promote Sanatan awareness by gurus, swamis, mutts, thought leaders and parents.</p>"]],tags:["sanatan","metric","culture"],commentCount:0,viewCount:94,attachmentCount:0,voteCount:17,submittedOn:"2024-02-03",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"},linkedIdeas:[{id:32,relation:"supports"}]},{id:34,title:"GeoDataMapper: Visualizing Tabular Data on Interactive Maps",summary:[["<p>GeoDataMapper is a software solution designed to transform tabular data, such as the","<a href='https://indiawris.gov.in/wiki/doku.php?id=cgwb_ground_water_resources' target='_blank'>water table data</a>","provided by the Central Ground Water Board (CGWB), into interactive maps for enhanced visualization and analysis.","By integrating geographical information with temporal data, GeoDataMapper empowers policy analysts and","stakeholders to gain insights, track changes, and make informed decisions based on spatial trends.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Policy analysts, government agencies, environmental organizations, and researchers.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>While tabular data provides valuable insights, visualizing complex datasets, particularly those related to geographical regions, can be challenging.","Static tables may not effectively convey spatial patterns or temporal changes, hindering comprehensive analysis and decision-making.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>GeoDataMapper offers a comprehensive solution for visualizing tabular data on interactive maps:</p>"],["<p><i>Data Import and Parsing:</i></p>"],["<ul><li><p> Import tabular datasets in standard formats (e.g., CSV, Excel) containing geographical attributes and corresponding values.</p></li>"],["<li><p> Parse data to extract geographic coordinates and attributes for mapping.</p></li></ul>"],["<p><i>Map Representation:</i></p>"],["<ul><li><p> Render data on interactive maps using geographical information systems (GIS) technology.</p></li>"],["<li><p> Display data points, polygons, or heatmaps representing attribute values across geographical regions.</p></li></ul>"],["<p><i>Temporal Analysis:</i></p>"],["<ul><li><p> Enable time-series analysis by visualizing temporal changes in data over multiple years or periods.</p></li>"],["<li><p> Incorporate temporal sliders or filters to adjust the displayed data for specific timeframes.</p></li></ul>"],["<p><i>Spatial Comparison:</i></p>"],["<ul><li><p> Facilitate spatial comparison by overlaying data from different years or datasets.</p></li>"],["<li><p> Highlight areas of significant change or trends between datasets for comparative analysis.</p></li></ul>"],["<p><i>Granular Exploration:</i></p>"],["<ul><li><p> Support zooming and panning functionality for users to explore data at different spatial scales.</p></li>"],["<li><p> Provide tooltips or pop-ups to display detailed information about specific data points or regions upon interaction.</p></li></ul>"],["<p><i>Customization and Export:</i></p>"],["<ul><li><p> Allow users to customize map visualizations with color schemes, legends, and annotations.</p></li>"],["<li><p> Provide options for exporting map visualizations in various formats for reports or presentations.</p></li></ul>"],["<p>The list of requirements above is quite comprehensive.","One may start with a modest set of features.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The project team should include software developers, GIS specialists, UI/UX designers, and domain experts familiar with the target dataset (e.g., water resource management).","Collaboration with stakeholders and data providers will be essential to ensure data accuracy and relevance.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>There should be some open-source application for the same.","Leverage existing software as much as possible.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>Through its user-friendly interface and powerful visualization capabilities, GeoDataMapper aims to revolutionize","the way tabular data is analyzed and interpreted, empowering users to make data-driven decisions for informed policy and resource management.</p>"],["<p>Build a working prototype of the solution.","Also define the input data format so that the data provider can provide data directly in that format.</p>"]],tags:["visualization","map","tech"],commentCount:0,viewCount:23,attachmentCount:0,voteCount:4,submittedOn:"2024-03-06",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:35,title:"Strategy Proposal for Indian Language Wiktionary",summary:[["<p>This proposal outlines a strategy for creating a dynamic and collaborative Wiktionary platform for Indian languages.","The initiative aims to address the limitations of existing static dictionaries by enabling user contributions, enriching content, and facilitating cross-language linkages.","The scope includes defining the platform's features, workflow, and integration possibilities to provide a comprehensive and user-friendly resource for students, teachers, and language learners.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Students, teachers, language learners, and anyone interested in Indian languages.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Existing online dictionaries for Indian languages are often static and lack user contribution features, limiting their effectiveness and accuracy.","Additionally, translations between Indian languages and integration with other language works are scarce.","There's a need for a dynamic and collaborative platform that allows users to contribute, correct, and expand the dictionary content while facilitating cross-language linkages.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution is to create a Wiktionary platform for Indian languages, leveraging the collaborative model of Wiki to allow user contributions and updates.","Initial content from established dictionary providers can be imported, and users can enrich the dictionary with additional meanings, usage examples, synonyms, and translations.","The platform will facilitate cross-linkages between words in different Indian languages, enhancing the comprehensiveness and utility of the dictionary.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include a lexicographer for linguistic expertise, language teachers for pedagogical insights, and collaboration with dictionary providers for content integration.","Additionally, software developers will be needed to build and maintain the Wiktionary platform.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>Checkout <a href='https://www.wiktionary.org/' target='_blank'>wiktionary</a>.","There are online dictionaries like <a href='https://www.shabdkosh.com/' target='_blank'>shabdkosh</a> but these are not wikitionaries.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes defining the strategy for creating an Indian language Wiktionary, including:</p>"],["<ul><li><p> Identifying target languages based on demand and availability of resources.</p></li>"],["<li><p> Researching existing dictionary content and potential collaboration with dictionary providers.</p></li>"],["<li><p> Designing the Wiktionary platform, including software requirements and workflow for user contributions.</p></li>"],["<li><p> Outlining strategies for promoting user engagement and ensuring quality control.</p></li>"],["<li><p> Determining integration possibilities with existing services and platforms.</p></li></ul>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome will be a detailed strategy proposal for creating an Indian language Wiktionary, outlining the platform's features, workflow, and integration possibilities.","This proposal will serve as a roadmap for development, guiding the implementation of the Wiktionary platform to provide a valuable resource for Indian language learners and enthusiasts.</p>"]],tags:["language"],commentCount:0,viewCount:15,attachmentCount:0,voteCount:3,submittedOn:"2024-03-07",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}},{id:36,title:"Strategy Proposal for Developing a 10k Word Vocabulary List for Indian Languages",summary:[["<p>This proposal outlines a strategy for creating a 10,000-word vocabulary list for Indian languages, clustered into 15 levels of difficulty, ranging from primary school to graduation.","The initiative aims to address the decline in mother tongue proficiency among students by setting a minimum vocabulary target and organizing words into clusters for efficient learning.","The scope includes defining the strategy for word selection, difficulty level determination, and clustering, with potential for expansion to second language learning.</p>"]],details:[["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Students, teachers, and language enthusiasts seeking to improve proficiency in Indian languages.</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>The decline in mother tongue proficiency among students, exacerbated by the dominance of English and the use of","common languages in urban settings, necessitates a structured approach to vocabulary acquisition.","A comprehensive vocabulary list can serve as a benchmark for students to achieve proficiency in their mother tongue.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>The proposed solution involves developing a 10,000-word vocabulary list for Indian languages, organized into 15 levels of difficulty corresponding to educational milestones.","The selection process will involve identifying the most common words through digital text analysis and teacher input.","Clustering words based on semantic similarity will facilitate efficient learning.","Each cluster should be around 15-20 words, something that can be covered in a week.</p>"],["<p>Note the same can be used to learn a second language as well.","Say, my mother tongue is Hindi and I want to learn Tamil.","I can target 10k for Hindi and 3k for Tamil.","For that I can complete first 5 levels for Tamil language.","Try to keep similar clusters at the same level in all the languages.","For example, is cluster 5 in level 1 has the words running, walking, jogging, swimming etc then cluster 5 in level 1 of Hindi and Tamil should have similar words.","This should be the case for the lower levels.","This just makes learning easier.","For the second language, the word should also be transliterated into my mother tongue.","It is not necessary to learn reading and writing the second language.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>The team should include lexicographers for linguistic expertise, language teachers for pedagogical insights, and collaboration with educational institutions for teacher input.","Technical expertise for digital text analysis and data clustering will also be necessary.</p>"],["<p><b>What is the scope?</b></p>"],["<p>The scope includes defining the strategy for word selection, difficulty level determination, and clustering.","The focus is on leveraging digital text analysis, teacher input, and open-source data to develop the vocabulary list.","The strategy will also explore transliteration and cross-language learning possibilities.</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>The outcome will be a detailed strategy for creating a 10,000-word vocabulary list for Indian languages, along with a roadmap for implementation.","This strategy will guide the selection, clustering, and transliteration processes, ensuring a comprehensive and structured approach to vocabulary acquisition.","While the scope is limited to defining the strategy, the proposed approach lays the foundation for further development and utilization of the vocabulary list in educational contexts.</p>"],["<p>Define a strategy to build this list.","Then given pool of teachers, give random words to each teacher and ask them to provide a difficulty level.","The same word can be provided to 10 teachers and the median value can be selected.</p>"],["<p>Then by some means the words can be clustered.","Find technical means to calculate semantic similarity of words.","This is just to get started then teachers can provide inputs.","Scan the net for some open source data for this which can be used to boot strap the process.","Lets say, this is done for Hindi for the first five levels, can the list be simply translated to Tamil to create or atleast bootstrap the lists for Tamil.","Scope is limited to define the strategy.","Lists will not be built here.","While some thought needs to be put in how these lists would be used, defining that is not part of the scope.","One can have cards, books, gamified apps.</p>"]],tags:["language","education"],commentCount:0,viewCount:19,attachmentCount:0,voteCount:3,submittedOn:"2024-03-08",submittedBy:{name:"Sujit Dev",email:"sujit.dev@gmail.com"}}]};var fy=Ag(tf());var hy={ideaDetailsTemplate:[["<p>This section cover content that will be used to assess and pick promising ideas for implementation.","Full details about the idea will be in an external document.","Answer the following questions to impress a team to pick up your idea.","Remove questions which are not relevant and feel free to add more details if needed.</p>"],["<p><b>Who is the customer or the target audience?</b></p>"],["<p>Type of user,  government, org, business</p>"],["<p><b>What is the problem / opportunity statement?</b></p>"],["<p>Few lines about the problem statement.","Even if you attach a document to the idea, please do mention a few lines about the problem statement here.</p>"],["<p><b>What solution are you proposing?</b></p>"],["<p>Mention the high level solution.","It is ok if the solution is not well defined or if there is no solution.","Mention that the solution needs to be explored.</p>"],["<p><b>Who needs to be on the team?</b></p>"],["<p>Especially what kind of expertise do you need. Some mentors, sme, project guide etc.","Set appropriate tags on the idea.</p>"],["<p><b>Are there existing alternatives? How is your solution better than the alternatives?</b></p>"],["<p>Mention any existing solution that you are aware of.","Also mention why that solution is not sufficient and why your solution should be considered.</p>"],["<p><b>What is the scope?</b></p>"],["<p>Define the scope. Any limit on the target audience size?","Limit on the work, like just exploration, analysis and no field word. Any time box?</p>"],["<p><b>What results will be achieved?</b></p>"],["<p>What is the output that you are targeting?","It could just be an analysis report, a policy recommendation, a working solution or even some implementation in the field.</p>"]]};function vd(t){return fy.default.map(t,e=>e.join(" ")).join(`

`)}var mR=vd(hy.ideaDetailsTemplate),gR={ideaDetailsTemplate:mR},my=gR;var _R=new Map(ir.default.map(_d.ideas,t=>[t.ideaId,t.title])),vR=new Map([["supported-by","Supported By"],["supports","Supports"],["relates-to","Relates To"],["similar-to","Similar To"]]),gy=ir.default.map(_d.ideas,t=>(t.summary=vd(t.summary),t.details=ir.default.isEmpty(t.details)?my.ideaDetailsTemplate:vd(t.details),ir.default.isEmpty(t.linkedIdeas)||(t.linkedIdeas=ir.default.filter(t.linkedIdeas,e=>e.ideaId!==-1)),ir.default.isEmpty(t.linkedIdeas)?t.linkedIdeas=void 0:t.linkedIdeas=ir.default.map(t.linkedIdeas,e=>(e.title=_R.get(e.ideaId),e.relationLabel=vR.get(e.relation),e)),t));var yd=(()=>{let e=class e{findIdeas(i){return ea(this,null,function*(){let r=gy;if(i!==void 0&&i.tags&&i.tags.length>0){let o=i.tags[0];r=r.filter(l=>l.tags.includes(o))}return Promise.resolve({page:0,size:r.length,items:r})})}getIdeaById(i){return ea(this,null,function*(){let r=ir.default.find(gy,o=>o.id===i);return Promise.resolve(r)})}createIdea(i){throw Error("TODO not implemented.")}getCurrentUserProfile(){return ea(this,null,function*(){return Promise.resolve(_d.currentUser)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ue({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yR=(t,e)=>e.id;function bR(t,e){if(t&1&&(E(0,"div",8),q(1,"app-idea-card",10),k()),t&2){let n=e.$implicit;D(),I("idea",n)}}function wR(t,e){if(t&1){let n=Te();E(0,"div",9)(1,"ngb-pagination",11),hi("pageChange",function(r){re(n);let o=R();return pi(o.page,r)||(o.page=r),oe(r)}),k()()}if(t&2){let n=R();D(),ui("page",n.page),I("pageSize",n.pageSize)("collectionSize",n.ideas.length)}}var vy=(()=>{let e=class e{constructor(i,r,o){this.router=i,this.service=r,this.breakpointObserver=o,this.activatedRoute=j(Ql),this.modalService=j(o_),this.ideas=[],this.searchTag="",this.page=1,this.pageSize=12,this.tagList=[],this.filterTag=l=>l.pipe(Vl(200),Ll(),Qt(c=>{let u=c.toLowerCase();return c.length<2?[]:this.tagList.filter(p=>p.indexOf(u)>-1).slice(0,10)}))}ngOnInit(){let i=this.activatedRoute.snapshot.queryParams.id;if(i){this.router.navigate(["ideas","details",i]);return}this.service.findIdeas().then(r=>{this.ideas=r.items,this.tagList=Array.from(new Set(this.ideas.flatMap(o=>o.tags)).values()).sort()}),this.breakPointSubscription=this.breakpointObserver.observe([$a.Medium,$a.Large]).subscribe(r=>{let o=r.breakpoints,l=12;o[$a.Medium]?l=24:o[$a.Large]&&(l=48),this.pageSize=l})}search(i){this.ideas=[],this.page=1,this.service.findIdeas({tags:[i.item]}).then(r=>this.ideas=r.items)}openNewIdeaModal(){this.modalService.open(sy,{size:"lg",centered:!0})}ngOnDestroy(){this.breakPointSubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(K(n0),K(yd),K(dy))},e.\u0275cmp=le({type:e,selectors:[["app-ideas"]],standalone:!0,features:[ye],decls:16,vars:4,consts:[[1,"p-2"],[1,"d-flex","mx-2","mb-2","align-items-center"],["type","text","placeholder","by Tag",1,"border-0","border-bottom","ms-2",3,"ngModelChange","selectItem","ngModel","selectOnExact","ngbTypeahead"],[1,"spacer"],["type","button",1,"btn","btn-primary",3,"click"],["name","plus-lg"],[1,"container-fluid","content-row"],[1,"row"],[1,"col-sm-12","col-md-6","col-lg-4","col-xxl-3","mb-3"],[1,"d-flex","justify-content-center","mt-3"],[3,"idea"],[3,"pageChange","page","pageSize","collectionSize"]],template:function(r,o){r&1&&(q(0,"app-nav-header"),E(1,"div",0)(2,"div",1)(3,"div")(4,"span"),$(5,"Search"),k(),E(6,"input",2),hi("ngModelChange",function(c){return pi(o.searchTag,c)||(o.searchTag=c),c}),z("selectItem",function(c){return o.search(c)}),k()(),q(7,"span",3),E(8,"button",4),z("click",function(){return o.openNewIdeaModal()}),q(9,"app-icon",5),$(10," Idea "),k()(),E(11,"div",6)(12,"div",7),Vt(13,bR,2,1,"div",8,yR),k()(),J(15,wR,2,3,"div",9),k()),r&2&&(D(6),ui("ngModel",o.searchTag),I("selectOnExact",!0)("ngbTypeahead",o.filterTag),D(7),Lt(o.ideas.slice((o.page-1)*o.pageSize,o.page*o.pageSize)),D(2),Ee(15,o.ideas.length>o.pageSize?15:-1))},dependencies:[gd,mi,_n,vn,Qn,u_,Vn,py,d_],encapsulation:2});let t=e;return t})();function CR(t,e){if(t&1){let n=Te();E(0,"app-icon-button",3),z("iconClicked",function(){re(n);let r=R();return oe(r.updateFollow())}),k()}if(t&2){let n=R();I("small",n.small())}}function xR(t,e){if(t&1){let n=Te();E(0,"app-icon-button",4),z("iconClicked",function(){re(n);let r=R();return oe(r.updateFollow())}),k()}if(t&2){let n=R();I("small",n.small())}}var yy=(()=>{let e=class e{constructor(){this.views=be(0),this.small=be(!1),this.followed=$l(!1),this.followedClicked=fn()}updateFollow(){this.followed.set(!this.followed()),this.followedClicked.emit(this.followed())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-views-like-buttons"]],inputs:{views:[te.SignalBased,"views"],small:[te.SignalBased,"small"],followed:[te.SignalBased,"followed"]},outputs:{followed:"followedChange",followedClicked:"followedClicked"},standalone:!0,features:[ye],decls:5,vars:3,consts:[[1,"views-like-buttons"],["icon","eye","title","Views",3,"small"],["icon","star-fill","title","Unfollow","color","warning",3,"small"],["icon","star-fill","title","Unfollow","color","warning",3,"iconClicked","small"],["icon","star","title","Follow",3,"iconClicked","small"]],template:function(r,o){r&1&&(E(0,"div",0),q(1,"app-icon-button",1),$(2),J(3,CR,1,1,"app-icon-button",2)(4,xR,1,1),k()),r&2&&(D(),I("small",o.small()),D(),it(" ",o.views()," "),D(),Ee(3,o.followed()?3:4))},dependencies:[Ps],styles:[".views-like-buttons[_ngcontent-%COMP%]{border:solid var(--bs-border-width);border-color:var(--bs-border-color);border-radius:var(--bs-border-radius);display:inline-block}"]});let t=e;return t})();var by=(()=>{let e=class e{constructor(){this.count=$l(0),this.small=be(!1),this.countEmitter=fn()}upVote(){this.count.set(this.count()+1),this.countEmitter.emit(this.count())}downVote(){this.count.set(Math.max(this.count()-1,0)),this.countEmitter.emit(this.count())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-vote-count-buttons"]],inputs:{count:[te.SignalBased,"count"],small:[te.SignalBased,"small"]},outputs:{count:"countChange",countEmitter:"countEmitter"},standalone:!0,features:[ye],decls:4,vars:3,consts:[[1,"vote-count-buttons"],["icon","hand-thumbs-up","title","Up Vote",3,"iconClicked","small"],["icon","hand-thumbs-down","title","Down Vote",3,"iconClicked","small"]],template:function(r,o){r&1&&(E(0,"div",0)(1,"app-icon-button",1),z("iconClicked",function(){return o.upVote()}),k(),$(2),E(3,"app-icon-button",2),z("iconClicked",function(){return o.downVote()}),k()()),r&2&&(D(),I("small",o.small()),D(),it(" ",o.count()," "),D(),I("small",o.small()))},dependencies:[Ps],styles:[".vote-count-buttons[_ngcontent-%COMP%]{border:solid var(--bs-border-width);border-color:var(--bs-border-color);border-radius:var(--bs-border-radius);display:inline-block}"]});let t=e;return t})();var wy=t=>[t];function TR(t,e){if(t&1&&(E(0,"div",0),q(1,"img",1),k()),t&2){let n=R();I("ngClass",Ot(3,wy,n.avatarSize())),D(),I("src",n.imgSrc(),Qr),ze("alt",n.imgAlt())}}function SR(t,e){if(t&1&&(E(0,"div",0),$(1),k()),t&2){let n=R();I("ngClass",Ot(2,wy,n.avatarSize())),D(),it(" ",n.letter()," ")}}var Cy=(()=>{let e=class e{constructor(){this.imgSrc=be(),this.imgAlt=be(),this.letter=be(),this.size=be(),this.avatarSize=ss(()=>{let i=this.size();return i===void 0?"":`avatar-${i}`})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-avatar"]],inputs:{imgSrc:[te.SignalBased,"imgSrc"],imgAlt:[te.SignalBased,"imgAlt"],letter:[te.SignalBased,"letter"],size:[te.SignalBased,"size"]},standalone:!0,features:[ye],decls:2,vars:1,consts:[[1,"avatar",3,"ngClass"],[3,"src"]],template:function(r,o){r&1&&J(0,TR,2,5,"div",0)(1,SR,2,4),r&2&&Ee(0,o.imgSrc()?0:o.letter()?1:-1)},dependencies:[Ht],styles:[".avatar[_ngcontent-%COMP%]{border-radius:50%!important;height:3rem!important;width:3rem!important;font-size:1.5rem!important;color:var(--bs-light)!important;background-color:var(--bs-secondary)!important;display:inline-flex;align-items:center;justify-content:center}.avatar-lg[_ngcontent-%COMP%]{height:5rem!important;width:5rem!important;font-size:2.5rem!important}.avatar-xl[_ngcontent-%COMP%]{height:8rem!important;width:8rem!important;font-size:4rem!important}.avatar-sm[_ngcontent-%COMP%]{height:2rem!important;width:2rem!important;font-size:1rem!important}"]});let t=e;return t})();var DR=(t,e)=>e.attachmentId,MR=(t,e)=>e.email,kR=(t,e)=>e.ideaId,ER=()=>({small:!0}),OR=()=>({small:!1});function IR(t,e){t&1&&q(0,"div")}function AR(t,e){t&1&&(E(0,"span",17),$(1,"3-4 lines max"),k())}function NR(t,e){if(t&1){let n=Te();E(0,"div",30)(1,"app-custom-editor",31),z("contentUpdated",function(r){re(n);let o=R(2);return oe(o.onDetailsChange(r))}),k()()}if(t&2){let n=R(2);D(),I("content",n.idea.details||"")}}function PR(t,e){t&1&&(E(0,"div",32)(1,"button",33),$(2,"Add Comment"),k()())}function RR(t,e){if(t&1&&(E(0,"div",32),q(1,"app-icon",35),E(2,"a",36),$(3),k()()),t&2){let n=e.$implicit;D(),I("size",24),D(),Yg("href",n.filePath,Qr),D(),We(n.label)}}function FR(t,e){if(t&1&&(E(0,"div",32)(1,"button",34),$(2,"Upload"),k(),Vt(3,RR,4,3,"div",32,DR),k()),t&2){let n=R(2);D(3),Lt(n.idea.attachments)}}function BR(t,e){t&1&&q(0,"div")}function VR(t,e){if(t&1&&(E(0,"div",38),q(1,"app-avatar",28),E(2,"div",29)(3,"div"),$(4),k(),E(5,"small"),$(6),k()()()),t&2){let n=e.$implicit;D(),I("letter",n.name.charAt(0)),D(3),We(n.name),D(2),We(n.roles.join(", "))}}function LR(t,e){if(t&1&&(E(0,"div")(1,"h6",37),$(2,"Team"),k(),Vt(3,VR,7,3,"div",38,MR),k()),t&2){let n=R(2);D(3),Lt(n.idea.team)}}function HR(t,e){if(t&1&&(E(0,"div")(1,"div"),$(2),k(),E(3,"a",39),$(4),k()()),t&2){let n=e.$implicit;D(2),We(n.relationLabel),D(),Jl("href","/ideas/details/",n.ideaId,"",Qr),D(),it(" ",n.title," ")}}function zR(t,e){if(t&1&&(E(0,"div",19)(1,"h5"),$(2,"Linked Ideas"),k(),Vt(3,HR,5,4,"div",null,kR),k()),t&2){let n=R(2);D(3),Lt(n.idea.linkedIdeas)}}function WR(t,e){if(t&1){let n=Te();E(0,"div")(1,"div",4)(2,"h5",5),$(3),k(),q(4,"span",6),E(5,"div",7),J(6,IR,1,0,"div",8),k(),E(7,"button",9),$(8,"Submit "),k()(),E(9,"div",10)(10,"form",11,1),z("ngSubmit",function(){re(n);let r=R();return oe(r.onSubmit())}),E(12,"div",12)(13,"input",13),hi("ngModelChange",function(r){re(n);let o=R();return pi(o.idea.title,r)||(o.idea.title=r),oe(r)}),k()(),E(14,"div",14)(15,"div",15)(16,"label",16)(17,"h6"),$(18,"Summary"),k()(),q(19,"span",6),J(20,AR,2,0,"span",17),k(),E(21,"app-custom-editor",18),z("contentUpdated",function(r){re(n);let o=R();return oe(o.onSummaryChange(r))}),k()(),E(22,"div",19)(23,"app-tag-list-editable",20),z("tagAdded",function(r){re(n);let o=R();return oe(o.addTag(r))})("tagDeleted",function(r){re(n);let o=R();return oe(o.deleteTag(r))}),k()(),E(24,"ul",21,2),hi("activeIdChange",function(r){re(n);let o=R();return pi(o.activeTab,r)||(o.activeTab=r),oe(r)}),E(26,"li",22)(27,"button",23),$(28,"Details"),k(),J(29,NR,2,1,"ng-template",24),k(),E(30,"li",22)(31,"button",23),$(32,"Comments"),k(),J(33,PR,3,0,"ng-template",24),k(),E(34,"li",22)(35,"button",23),$(36,"Attachments"),k(),J(37,FR,5,0,"ng-template",24),k()(),q(38,"div",25),k(),E(39,"div",26),J(40,BR,1,0,"div",8),E(41,"div",27),q(42,"app-avatar",28),E(43,"div",29)(44,"div"),$(45),k(),E(46,"small"),$(47),k()()(),J(48,LR,5,0,"div")(49,zR,5,0,"div",19),k()()()}if(t&2){let n=Xt(11),i=Xt(25),r=R(),o=Xt(4);D(3),it("IDEA - ",r.idea.id,""),D(3),I("ngTemplateOutlet",o)("ngTemplateOutletContext",Uu(21,ER)),D(),I("disabled",n.invalid),D(6),ui("ngModel",r.idea.title),D(7),Ee(20,r.summaryEditMode?20:-1),D(),I("content",r.idea.summary)("small",!0),D(2),I("tags",r.idea.tags),D(),ui("activeId",r.activeTab),D(2),I("ngbNavItem",1),D(4),I("ngbNavItem",2),D(4),I("ngbNavItem",3),D(4),I("ngbNavOutlet",i),D(2),I("ngTemplateOutlet",o)("ngTemplateOutletContext",Uu(22,OR)),D(2),I("letter",r.idea.submittedBy==null||r.idea.submittedBy.name==null?null:r.idea.submittedBy.name.charAt(0)),D(3),We(r.idea.submittedBy==null?null:r.idea.submittedBy.name),D(2),it("submitted on ",r.idea.submittedOn,""),D(),Ee(48,r.idea.team?48:-1),D(),Ee(49,r.idea.linkedIdeas?49:-1)}}function GR(t,e){if(t&1){let n=Te();E(0,"app-vote-count-buttons",40),z("countEmitter",function(r){re(n);let o=R(2);return oe(o.updateVote(r))}),k(),E(1,"app-views-like-buttons",41),z("followedClicked",function(r){re(n);let o=R(2);return oe(o.updateLike(r))}),k()}if(t&2){let n=R().small,i=R();I("small",n)("count",i.idea.voteCount||0),D(),I("small",n)("views",i.idea.viewCount||0)}}function jR(t,e){if(t&1&&J(0,GR,2,4),t&2){let n=R();Ee(0,n.idea?0:-1)}}var xy=(()=>{let e=class e{constructor(i){this.service=i,this.activatedRoute=j(Ql),this.summaryEditMode=!1,this.detailsEditMode=!1,this.activeTab=1,this.onSummaryChange=r=>{this.summaryEditMode=r.editMode,r.editMode||(this.idea.summary=r.content)},this.onDetailsChange=r=>{this.detailsEditMode=r.editMode,r.editMode||(this.idea.details=r.content)}}ngOnInit(){let i=this.activatedRoute.snapshot.params.id;this.service.getIdeaById(parseInt(i)).then(r=>{this.idea=r})}addTag(i){this.idea.tags.push(i)}deleteTag(i){this.idea.tags=this.idea.tags.filter(r=>r!==i)}onSubmit(){console.log(this.idea?.summary)}updateVote(i){this.idea.voteCount=i}updateLike(i){}};e.\u0275fac=function(r){return new(r||e)(K(yd))},e.\u0275cmp=le({type:e,selectors:[["app-idea-details"]],standalone:!0,features:[ye],decls:5,vars:1,consts:[["voteButtonsRef",""],["ideaForm","ngForm"],["nav","ngbNav"],[1,"p-2"],[1,"d-flex","align-items-center"],[1,"m-0"],[1,"spacer"],[1,"d-inline-block","d-lg-none"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","submit",1,"btn","btn-outline-primary","btn-sm","my-1",3,"disabled"],[1,"row"],[1,"col-lg-9","col-12",3,"ngSubmit"],[1,"form-group"],["id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","mt-3"],[1,"d-flex"],["for","summary"],[1,"small","text-body-emphasis"],["id","summary",3,"contentUpdated","content","small"],[1,"mt-4"],[3,"tagAdded","tagDeleted","tags"],["ngbNav","",1,"nav-tabs","mt-3",3,"activeIdChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"col-12","col-lg-3","ps-lg-2","d-none","d-lg-block"],[1,"d-flex","mt-4"],[3,"letter"],[1,"d-inline-block","ms-3"],[1,"form-group","mt-1"],["id","details",3,"contentUpdated","content"],[1,"mt-3"],["type","button",1,"btn","btn-outline-primary","btn-sm"],["type","button",1,"btn","btn-sm","btn-outline-primary"],["name","file-pdf","color","danger",3,"size"],["target","_blank",1,"ms-3",3,"href"],[1,"mt-4","mb-3"],[1,"d-flex","mt-2"],[3,"href"],[1,"me-2",3,"countEmitter","small","count"],[1,"me-2",3,"followedClicked","small","views"]],template:function(r,o){r&1&&(q(0,"app-nav-header"),E(1,"div",3),J(2,WR,50,23,"div"),k(),J(3,jR,1,1,"ng-template",null,0,Yn)),r&2&&(D(2),Ee(2,o.idea?2:-1))},dependencies:[gd,Cr,mi,ro,_n,vn,io,pa,Qn,ua,hd,md,ba,Cc,a_,l_,xc,Dp,Vn,c_,Cy,by,yy]});let t=e;return t})();var D5=[{path:"details/:id",component:xy},{path:"",component:vy}];export{D5 as ROUTES};
